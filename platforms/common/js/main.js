require=function o(r,s,l){function c(e,t){if(!s[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[e]={exports:{}};r[e][0].call(a.exports,function(t){return c(r[e][1][t]||t)},a,a.exports,o,r,s,l)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,n){"use strict";function u(t){return t.replace(/\b[a-z]/g,r)}var i=t("prime"),a=t("prime/emitter"),s=t("mout/lang/isObject"),c=t("mout/lang/isString"),l=t("mout/lang/isArray"),o=t("mout/lang/isFunction"),d=t("mout/string/trim"),r=t("mout/string/upperCase"),h=t("mout/object/forIn"),p=t("mout/object/mixIn"),f=t("mout/array/remove"),m=t("mout/array/forEach"),g=function(){function t(){return new XMLHttpRequest}function e(){return new ActiveXObject("MSXML2.XMLHTTP")}function n(){return new ActiveXObject("Microsoft.XMLHTTP")}try{return t(),t}catch(t){}try{return e(),e}catch(t){}try{return n(),n}catch(t){}return null}(),v=function(t,o){if(null==t)return"";if(t.toQueryString)return t.toQueryString();var r=[];return h(t,function(t,e){var n;if(o&&(e=o+"["+e+"]"),null!=t){if(l(t)){for(var i={},a=0;a<t.length;a++)i[a]=t[a];n=v(i,e)}else n=s(t)?v(t,e):e+"="+encodeURIComponent(t);r.push(n)}}),r.join("&")},b=JSON.parse,y={"application/json":function(t){return null==t?"":t.toJSON?t.toJSON():JSON.stringify(t)},"application/x-www-form-urlencoded":v},w={"application/json":b,"application/x-www-form-urlencoded":function(t){for(var e=t.split("&"),n={},i=0;i<e.length;i++){var a=e[i].split("="),o=decodeURIComponent(a[0]),r=decodeURIComponent(a[1]),s=/\[\]$/.test(o),l=o.match(/^(.+)\[([^\]]+)\]$/);if(l){o=l[1];var c=l[2];n[o]=n[o]||{},n[o][c]=r}else s?(n[o=o.substring(0,o.length-2)]=n[o]||[],n[o].push(r)):n[o]=r}return n}},x=0,k=[],S=i({constructor:function(){this._header={"Content-Type":"application/x-www-form-urlencoded"}},header:function(t,e){if(s(t))for(var n in t)this.header(n,t[n]);else{if(!arguments.length)return this._header;if(1===arguments.length)return this._header[u(t)];2===arguments.length&&(null==e?delete this._header[u(t)]:this._header[u(t)]=e)}return this},running:function(){return!!this._running},abort:function(){return this._queued&&(f(k,this._queued),delete this._queued),this._xhr&&(this._xhr.abort(),this._end()),this},method:function(t){return arguments.length?(this._method=t.toUpperCase(),this):this._method},data:function(t){return arguments.length?(this._data=t,this):this._data},url:function(t){return arguments.length?(this._url=t,this):this._url},user:function(t){return arguments.length?(this._user=t,this):this._user},password:function(t){return arguments.length?(this._password=t,this):this._password},_send:function(i,a,t,e,n,o,r){var s=this;if(x===O.MAX_REQUESTS)return k.unshift(this._queued=function(){delete s._queued,s._send(i,a,t,e,n,o,r)});x++;var l=this._xhr=O.getRequest();for(var c in l.addEventListener&&m(["progress","load","error","abort","loadend"],function(e){l.addEventListener(e,function(t){s.emit(e,t)},!1)}),l.open(i,a,!0,n,o),null!=n&&"withCredentials"in l&&(l.withCredentials=!0),l.onreadystatechange=function(){if(4===l.readyState){var t=l.status,e=new C(l.responseText,t,function(t){var e=t.split(/\r?\n/),n={};e.pop();for(var i=0,a=e.length;i<a;++i){var o=e[i],r=o.indexOf(":"),s=u(o.slice(0,r)),l=d(o.slice(r+1));n[s]=l}return n}(l.getAllResponseHeaders())),n=e.error?new Error(i+" "+a+" "+t):null;s._end(),r(n,e)}},e)l.setRequestHeader(c,e[c]);l.send(t||null)},_end:function(){this._xhr.onreadystatechange=function(){},delete this._xhr,delete this._running,x--;var t=k.pop();t&&t()},send:function(t){this._running&&this.abort(),this._running=!0,t=t||function(){};var e=this._method||"POST",n=this._data||null,i=this._url,a=this._user||null,o=this._password||null;if(n&&!c(n)){var r=this._header["Content-Type"].split(/ *; */).shift(),s=y[r];s&&(n=s(n))}/GET|HEAD/.test(e)&&n&&(i+=(-1<i.indexOf("?")?"&":"?")+n);var l=p({},this._header);return this._send(e,i,n,l,a,o,t),this}});S.implement(new a);var C=i({constructor:function(t,e,n){this.text=t,this.status=e,this.header=n;var i=e/100|0;this.info=1==i,this.ok=2==i,this.clientError=4==i,this.serverError=5==i,this.error=4==i||5==i;var a=""+n["Content-Length"];this.accepted=202===e,this.noContent="0"==a||204===e||1223===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.notFound=404===e;var o,r=n["Content-Type"]?n["Content-Type"].split(/ *; */).shift():"";this.noContent||(o=w[r]),this.body=o?o(this.text):this.text}}),E="get|post|put|delete|head|patch|options",T=new RegExp("^"+E+"$","i"),O=function(t,e,n,i){var a=new S;return arguments.length&&(T.test(t)||(i=n,n=e,e=t,t="post"),o(n)&&(i=n,n=null),a.method(t),e&&a.url(e),n&&a.data(n),i&&a.send(i)),a};O.encoder=function(t,e){return 1===arguments.length?y[t]:(y[t]=e,O)},O.decoder=function(t,e){return 1===arguments.length?w[t]:(w[t]=e,O)},m(E.split("|"),function(i){O[i]=function(t,e,n){return O(i,t,e,n)}}),O.MAX_REQUESTS=1/0,O.getRequest=g,O.Request=S,O.Response=C,e.exports=O},{"mout/array/forEach":2,"mout/array/remove":4,"mout/lang/isArray":6,"mout/lang/isFunction":7,"mout/lang/isObject":9,"mout/lang/isString":10,"mout/object/forIn":13,"mout/object/mixIn":16,"mout/string/trim":20,"mout/string/upperCase":21,prime:25,"prime/emitter":24}],2:[function(t,e,n){e.exports=function(t,e,n){if(null!=t)for(var i=-1,a=t.length;++i<a&&!1!==e.call(n,t[i],i,t););}},{}],3:[function(t,e,n){e.exports=function(t,e,n){if(n=n||0,null==t)return-1;for(var i=t.length,a=n<0?i+n:n;a<i;){if(t[a]===e)return a;a++}return-1}},{}],4:[function(t,e,n){var i=t("./indexOf");e.exports=function(t,e){var n=i(t,e);-1!==n&&t.splice(n,1)}},{"./indexOf":3}],5:[function(t,e,n){var i=t("../object/mixIn");e.exports=function(t,e){function n(){}return n.prototype=t,i(new n,e)}},{"../object/mixIn":16}],6:[function(t,e,n){var i=t("./isKind"),a=Array.isArray||function(t){return i(t,"Array")};e.exports=a},{"./isKind":8}],7:[function(t,e,n){var i=t("./isKind");e.exports=function(t){return i(t,"Function")}},{"./isKind":8}],8:[function(t,e,n){var i=t("./kindOf");e.exports=function(t,e){return i(t)===e}},{"./kindOf":11}],9:[function(t,e,n){var i=t("./isKind");e.exports=function(t){return i(t,"Object")}},{"./isKind":8}],10:[function(t,e,n){var i=t("./isKind");e.exports=function(t){return i(t,"String")}},{"./isKind":8}],11:[function(t,e,n){var i=/^\[object (.*)\]$/,a=Object.prototype.toString;e.exports=function(t){return null===t?"Null":void 0===t?"Undefined":i.exec(a.call(t))[1]}},{}],12:[function(t,e,n){e.exports=function(t){return null==t?"":t.toString()}},{}],13:[function(t,e,n){var s,l,c=t("./hasOwn");function u(t,e,n,i){return t.call(i,e[n],n,e)}e.exports=function(t,e,n){var i,a=0;for(i in null==s&&function(){for(var t in l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=!0,{toString:null})s=!1}(),t)if(!1===u(e,t,i,n))break;if(s)for(var o=t.constructor,r=!!o&&t===o.prototype;(i=l[a++])&&("constructor"===i&&(r||!c(t,i))||t[i]===Object.prototype[i]||!1!==u(e,t,i,n)););}},{"./hasOwn":15}],14:[function(t,e,n){var o=t("./hasOwn"),r=t("./forIn");e.exports=function(n,i,a){r(n,function(t,e){if(o(n,e))return i.call(a,n[e],e,n)})}},{"./forIn":13,"./hasOwn":15}],15:[function(t,e,n){e.exports=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},{}],16:[function(t,e,n){var o=t("./forOwn");function r(t,e){this[e]=t}e.exports=function(t,e){for(var n,i=0,a=arguments.length;++i<a;)null!=(n=arguments[i])&&o(n,r,t);return t}},{"./forOwn":14}],17:[function(t,e,n){e.exports=[" ","\n","\r","\t","\f","\v"," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","\u2028","\u2029"," "," ","　"]},{}],18:[function(t,e,n){var l=t("../lang/toString"),c=t("./WHITE_SPACES");e.exports=function(t,e){t=l(t),e=e||c;for(var n,i,a=0,o=t.length,r=e.length,s=!0;s&&a<o;)for(s=!1,n=-1,i=t.charAt(a);++n<r;)if(i===e[n]){s=!0,a++;break}return o<=a?"":t.substr(a,o)}},{"../lang/toString":12,"./WHITE_SPACES":17}],19:[function(t,e,n){var s=t("../lang/toString"),l=t("./WHITE_SPACES");e.exports=function(t,e){t=s(t),e=e||l;for(var n,i,a=t.length-1,o=e.length,r=!0;r&&0<=a;)for(r=!1,n=-1,i=t.charAt(a);++n<o;)if(i===e[n]){r=!0,a--;break}return 0<=a?t.substring(0,a+1):""}},{"../lang/toString":12,"./WHITE_SPACES":17}],20:[function(t,e,n){var i=t("../lang/toString"),a=t("./WHITE_SPACES"),o=t("./ltrim"),r=t("./rtrim");e.exports=function(t,e){return t=i(t),o(r(t,e=e||a),e)}},{"../lang/toString":12,"./WHITE_SPACES":17,"./ltrim":18,"./rtrim":19}],21:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return(t=i(t)).toUpperCase()}},{"../lang/toString":12}],22:[function(t,e,n){function i(){return i.get()}i.get="function"==typeof Date.now?Date.now:function(){return+new Date},e.exports=i},{}],23:[function(t,f,e){(function(n,e,i){"use strict";function a(e,t,n,i){e.length||i(function(){u(e)});var a={callback:t,context:n};return e.push(a),function(){var t=l(e,a);-1<t&&e.splice(t,1)}}var o=t("mout/lang/kindOf"),r=t("mout/time/now"),s=t("mout/array/forEach"),l=t("mout/array/indexOf"),c={timeout:{},frame:[],immediate:[]},u=function(t){var e=r();s(t.splice(0),function(t){t.callback.call(t.context,e)})},d=function(t,e,n){return"Number"===o(e)?d.timeout(t,e,n):d.immediate(t,e)};e.process&&n.nextTick?d.immediate=function(t,e){return a(c.immediate,t,e,n.nextTick)}:e.setImmediate?d.immediate=function(t,e){return a(c.immediate,t,e,i)}:e.postMessage&&e.addEventListener?(addEventListener("message",function(t){t.source===e&&"@deferred"===t.data&&(t.stopPropagation(),u(c.immediate))},!0),d.immediate=function(t,e){return a(c.immediate,t,e,function(){postMessage("@deferred","*")})}):d.immediate=function(t,e){return a(c.immediate,t,e,function(t){setTimeout(t,0)})};var h,p=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};d.frame=function(t,e){return a(c.frame,t,e,p)},d.timeout=function(t,e,n){var i=c.timeout;return h=h||d.immediate(function(){h=null,c.timeout={}}),a(i[e]||(i[e]=[]),t,n,function(t){setTimeout(t,e)})},f.exports=d}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:205,"mout/array/forEach":2,"mout/array/indexOf":3,"mout/lang/kindOf":11,"mout/time/now":22,timers:211}],24:[function(t,e,n){"use strict";var r=t("mout/array/indexOf"),o=t("mout/array/forEach"),i=t("./index"),s=t("./defer"),l=Array.prototype.slice,c=i({on:function(t,e){var n=this._listeners||(this._listeners={}),i=n[t]||(n[t]=[]);return-1===r(i,e)&&i.push(e),this},off:function(t,e){var n,i=this._listeners;if(i&&(n=i[t])){var a=r(n,e);for(var o in-1<a&&n.splice(a,1),n.length||delete i[t],i)return this;delete this._listeners}return this},emit:function(n){function t(){var t,e=i._listeners;e&&(t=e[n])&&o(t.slice(0),function(t){return t.apply(i,a)})}var i=this,a=l.call(arguments,1);return a[a.length-1]===c.EMIT_SYNC?(a.pop(),t()):s(t),this}});c.EMIT_SYNC={},e.exports=c},{"./defer":23,"./index":25,"mout/array/forEach":2,"mout/array/indexOf":3}],25:[function(t,e,n){"use strict";var s=t("mout/object/hasOwn"),l=t("mout/object/mixIn"),c=t("mout/lang/createObject"),u=t("mout/lang/kindOf"),r=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(t){r=!1}function d(t){var e=this.prototype;for(var n in t)if(!n.match(f)){if(r){var i=Object.getOwnPropertyDescriptor(t,n);if(i){Object.defineProperty(e,n,i);continue}}e[n]=t[n]}if(h)for(var a=0;n=p[a];a++){var o=t[n];o!==Object.prototype[n]&&(e[n]=o)}return this}var h=!{valueOf:0}.propertyIsEnumerable("valueOf"),p=["toString","valueOf"],f=/^constructor|inherits|mixin$/;e.exports=function(t){"Function"===u(t)&&(t={constructor:t});var e=t.inherits,n=s(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){l(n,e);var i=e.prototype,a=n.prototype=c(i);n.parent=i,a.constructor=n}n.implement||(n.implement=d);var o=t.mixin;if(o){"Array"!==u(o)&&(o=[o]);for(var r=0;r<o.length;r++)n.implement(c(o[r].prototype))}return n.implement(t)}},{"mout/lang/createObject":5,"mout/lang/kindOf":11,"mout/object/hasOwn":15,"mout/object/mixIn":16}],26:[function(t,e,n){e.exports=function(u,n,d,i,h){function p(t){var e=1-t;return 3*e*e*t*u+3*e*t*t*d+t*t*t}function f(t){var e=1-t;return 3*e*e*t*n+3*e*t*t*i+t*t*t}return function(t){var e,n,i,a,o,r,s,l,c=t;for(i=c,r=0;r<8;r++){if(a=p(i)-c,Math.abs(a)<h)return f(i);if(o=3*(2*((s=i)-1)*s+(l=1-s)*l)*u+3*(-s*s*s+2*l*s)*d,Math.abs(o)<1e-6)break;i-=a/o}if(n=1,(i=c)<(e=0))return f(e);if(n<i)return f(n);for(;e<n;){if(a=p(i),Math.abs(a-c)<h)return f(i);a<c?e=i:n=i,i=.5*(n-e)+e}return f(i)}}},{}],27:[function(t,i,a){!function(t){var e=function(t){var r=["N","E","A","D"];function e(t,e){t.super_=e;t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}function n(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:true});if(e&&e.length){Object.defineProperty(this,"path",{value:e,enumerable:true})}}function w(t,e,n){w.super_.call(this,"E",t);Object.defineProperty(this,"lhs",{value:e,enumerable:true});Object.defineProperty(this,"rhs",{value:n,enumerable:true})}function x(t,e){x.super_.call(this,"N",t);Object.defineProperty(this,"rhs",{value:e,enumerable:true})}function k(t,e){k.super_.call(this,"D",t);Object.defineProperty(this,"lhs",{value:e,enumerable:true})}function S(t,e,n){S.super_.call(this,"A",t);Object.defineProperty(this,"index",{value:e,enumerable:true});Object.defineProperty(this,"item",{value:n,enumerable:true})}function s(t,e,n){var i=t.slice((n||e)+1||t.length);t.length=e<0?t.length+e:e;t.push.apply(t,i);return t}function C(t){var e=typeof t;if(e!=="object"){return e}if(t===Math){return"math"}else if(t===null){return"null"}else if(Array.isArray(t)){return"array"}else if(Object.prototype.toString.call(t)==="[object Date]"){return"date"}else if(typeof t.toString==="function"&&/^\/.*\//.test(t.toString())){return"regexp"}return"object"}function l(t){var e=0;if(t.length===0){return e}for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);e=(e<<5)-e+i;e=e&e}return e}function E(t){var e=0;var n=C(t);if(n==="array"){t.forEach(function(t){e+=E(t)});var i="[type: array, hash: "+e+"]";return e+l(i)}if(n==="object"){for(var a in t){if(t.hasOwnProperty(a)){var o="[ type: object, key: "+a+", value hash: "+E(t[a])+"]";e+=l(o)}}return e}var r="[ type: "+n+" ; value: "+t+"]";return e+l(r)}function T(t,e,n,i,a,o,r,s){n=n||[];a=a||[];r=r||[];var l=a.slice(0);if(typeof o!=="undefined"&&o!==null){if(i){if(typeof i==="function"&&i(l,o)){return}else if(typeof i==="object"){if(i.prefilter&&i.prefilter(l,o)){return}if(i.normalize){var c=i.normalize(l,o,t,e);if(c){t=c[0];e=c[1]}}}}l.push(o)}if(C(t)==="regexp"&&C(e)==="regexp"){t=t.toString();e=e.toString()}var u=typeof t;var d=typeof e;var h,p,f,m;var g=u!=="undefined"||r&&r.length>0&&r[r.length-1].lhs&&Object.getOwnPropertyDescriptor(r[r.length-1].lhs,o);var v=d!=="undefined"||r&&r.length>0&&r[r.length-1].rhs&&Object.getOwnPropertyDescriptor(r[r.length-1].rhs,o);if(!g&&v){n.push(new x(l,e))}else if(!v&&g){n.push(new k(l,t))}else if(C(t)!==C(e)){n.push(new w(l,t,e))}else if(C(t)==="date"&&t-e!==0){n.push(new w(l,t,e))}else if(u==="object"&&t!==null&&e!==null){for(h=r.length-1;h>-1;--h){if(r[h].lhs===t){m=true;break}}if(!m){r.push({lhs:t,rhs:e});if(Array.isArray(t)){if(s){t.sort(function(t,e){return E(t)-E(e)});e.sort(function(t,e){return E(t)-E(e)})}h=e.length-1;p=t.length-1;while(h>p){n.push(new S(l,h,new x(undefined,e[h--])))}while(p>h){n.push(new S(l,p,new k(undefined,t[p--])))}for(;h>=0;--h){T(t[h],e[h],n,i,l,h,r,s)}}else{var b=Object.keys(t);var y=Object.keys(e);for(h=0;h<b.length;++h){f=b[h];m=y.indexOf(f);if(m>=0){T(t[f],e[f],n,i,l,f,r,s);y[m]=null}else{T(t[f],undefined,n,i,l,f,r,s)}}for(h=0;h<y.length;++h){f=y[h];if(f){T(undefined,e[f],n,i,l,f,r,s)}}}r.length=r.length-1}else if(t!==e){n.push(new w(l,t,e))}}else if(t!==e){if(!(u==="number"&&isNaN(t)&&isNaN(e))){n.push(new w(l,t,e))}}}function c(t,e,n,i,a){var o=[];T(t,e,o,i,null,null,null,a);if(n){for(var r=0;r<o.length;++r){n(o[r])}}return o}function i(t,e,n,i,a,o,r){return T(t,e,n,i,a,o,r,true)}function a(t,e,n,i){var a=i?function(t){if(t){i.push(t)}}:undefined;var o=c(t,e,a,n);return i?i:o.length?o:undefined}function o(t,e,n,i){var a=i?function(t){if(t){i.push(t)}}:undefined;var o=c(t,e,a,n,true);return i?i:o.length?o:undefined}function u(t,e,n){if(n.path&&n.path.length){var i=t[e],a,o=n.path.length-1;for(a=0;a<o;a++){i=i[n.path[a]]}switch(n.kind){case"A":u(i[n.path[a]],n.index,n.item);break;case"D":delete i[n.path[a]];break;case"E":case"N":i[n.path[a]]=n.rhs;break}}else{switch(n.kind){case"A":u(t[e],n.index,n.item);break;case"D":t=s(t,e);break;case"E":case"N":t[e]=n.rhs;break}}return t}function d(t,e,n){if(typeof n==="undefined"&&e&&~r.indexOf(e.kind)){n=e}if(t&&n&&n.kind){var i=t,a=-1,o=n.path?n.path.length-1:0;while(++a<o){if(typeof i[n.path[a]]==="undefined"){i[n.path[a]]=typeof n.path[a+1]!=="undefined"&&typeof n.path[a+1]==="number"?[]:{}}i=i[n.path[a]]}switch(n.kind){case"A":if(n.path&&typeof i[n.path[a]]==="undefined"){i[n.path[a]]=[]}u(n.path?i[n.path[a]]:i,n.index,n.item);break;case"D":delete i[n.path[a]];break;case"E":case"N":i[n.path[a]]=n.rhs;break}}}function h(t,e,n){if(n.path&&n.path.length){var i=t[e],a,o=n.path.length-1;for(a=0;a<o;a++){i=i[n.path[a]]}switch(n.kind){case"A":h(i[n.path[a]],n.index,n.item);break;case"D":i[n.path[a]]=n.lhs;break;case"E":i[n.path[a]]=n.lhs;break;case"N":delete i[n.path[a]];break}}else{switch(n.kind){case"A":h(t[e],n.index,n.item);break;case"D":t[e]=n.lhs;break;case"E":t[e]=n.lhs;break;case"N":t=s(t,e);break}}return t}function p(t,e,n){if(t&&e&&n&&n.kind){var i=t,a,o;o=n.path.length-1;for(a=0;a<o;a++){if(typeof i[n.path[a]]==="undefined"){i[n.path[a]]={}}i=i[n.path[a]]}switch(n.kind){case"A":h(i[n.path[a]],n.index,n.item);break;case"D":i[n.path[a]]=n.lhs;break;case"E":i[n.path[a]]=n.lhs;break;case"N":delete i[n.path[a]];break}}}function f(e,n,i){if(e&&n){var t=function(t){if(!i||i(e,n,t)){d(e,n,t)}};c(e,n,t)}}if(e(w,n),e(x,n),e(k,n),e(S,n),Object.defineProperties(a,{diff:{value:a,enumerable:true},orderIndependentDiff:{value:o,enumerable:true},observableDiff:{value:c,enumerable:true},orderIndependentObservableDiff:{value:i,enumerable:true},orderIndepHash:{value:E,enumerable:true},applyDiff:{value:f,enumerable:true},applyChange:{value:d,enumerable:true},revertChange:{value:p,enumerable:true},isConflict:{value:function(){return typeof $conflict!=="undefined"},enumerable:true}}),a.DeepDiff=a,t){t.DeepDiff=a}return a}(t);if("function"==typeof define&&define.amd)define("DeepDiff",function(){return e});else if("object"==typeof a||"object"==typeof navigator&&navigator.product.match(/ReactNative/i))i.exports=e;else{var n=t.DeepDiff;e.noConflict=function(){return t.DeepDiff===e&&(t.DeepDiff=n),e},t.DeepDiff=e}}(this)},{}],28:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(i){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(i);if(a){var n=r(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var p=function(){function t(){u(this,t)}return h(t,[{key:"on",value:function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}},{key:"emit",value:function(t){this._callbacks=this._callbacks||{};var e=this._callbacks[t];if(e){for(var n=arguments.length,i=new Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var o,r=k(e);try{for(r.s();!(o=r.n()).done;){o.value.apply(this,i)}}catch(t){r.e(t)}finally{r.f()}}return this}},{key:"off",value:function(t,e){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(var i=0;i<n.length;i++){if(n[i]===e){n.splice(i,1);break}}return this}}]),t}(),f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(x,p);var r=o(x);function x(t,e){var n,i,a;if(u(this,x),(n=r.call(this)).element=t,n.version=x.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");x.instances.push(l(n)),n.element.dropzone=l(n);var o=null!=(a=x.optionsForElement(n.element))?a:{};if(n.options=x.extend({},n.defaultOptions,o,null!=e?e:{}),n.options.forceFallback||!x.isBrowserSupported())return s(n,n.options.fallback.call(l(n)));if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(t){return n.options.renameFilename.call(l(n),t.name,t)}),"string"==typeof n.options.method&&(n.options.method=n.options.method.toUpperCase()),(i=n.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=x.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=x.getElements(n.options.clickable,"clickable")),n.init(),n}return h(x,null,[{key:"initClass",value:function(){this.prototype.Emitter=p,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(t,e,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(t,e){return e()},chunksUploaded:function(t,e){e()},fallback:function(){var t;this.element.className="".concat(this.element.className," dz-browser-not-supported");var e,n=k(this.element.getElementsByTagName("div"));try{for(n.s();!(e=n.n()).done;){var i=e.value;if(/(^| )dz-message($| )/.test(i.className)){(t=i).className="dz-message";break}}}catch(t){n.e(t)}finally{n.f()}t||(t=x.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t));var a=t.getElementsByTagName("span")[0];return a&&(null!=a.textContent?a.textContent=this.options.dictFallbackMessage:null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t,e,n,i){var a={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},o=t.width/t.height;null==e&&null==n?(e=a.srcWidth,n=a.srcHeight):null==e?e=n*o:null==n&&(n=e/o);var r=(e=Math.min(e,a.srcWidth))/(n=Math.min(n,a.srcHeight));if(a.srcWidth>e||a.srcHeight>n)if("crop"===i)r<o?(a.srcHeight=t.height,a.srcWidth=a.srcHeight*r):(a.srcWidth=t.width,a.srcHeight=a.srcWidth/r);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));r<o?n=e/o:e=n*o}return a.srcX=(t.width-a.srcWidth)/2,a.srcY=(t.height-a.srcHeight)/2,a.trgWidth=e,a.trgHeight=n,a},transformFile:function(t,e){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(t)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=x.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var t,i=k(e.previewElement.querySelectorAll("[data-dz-name]"));try{for(i.s();!(t=i.n()).done;){var a=t.value;a.textContent=e.name}}catch(t){i.e(t)}finally{i.f()}var o,r=k(e.previewElement.querySelectorAll("[data-dz-size]"));try{for(r.s();!(o=r.n()).done;)(a=o.value).innerHTML=this.filesize(e.size)}catch(t){r.e(t)}finally{r.f()}this.options.addRemoveLinks&&(e._removeLink=x.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var s,l=function(t){return t.preventDefault(),t.stopPropagation(),e.status===x.UPLOADING?x.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?x.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)},c=k(e.previewElement.querySelectorAll("[data-dz-remove]"));try{for(c.s();!(s=c.n()).done;){s.value.addEventListener("click",l)}}catch(t){c.e(t)}finally{c.f()}}},removedfile:function(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");var n,i=k(t.previewElement.querySelectorAll("[data-dz-thumbnail]"));try{for(i.s();!(n=i.n()).done;){var a=n.value;a.alt=t.name,a.src=e}}catch(t){i.e(t)}finally{i.f()}return setTimeout(function(){return t.previewElement.classList.add("dz-image-preview")},1)}},error:function(t,e){if(t.previewElement){t.previewElement.classList.add("dz-error"),"string"!=typeof e&&e.error&&(e=e.error);var n,i=k(t.previewElement.querySelectorAll("[data-dz-errormessage]"));try{for(i.s();!(n=i.n()).done;){n.value.textContent=e}}catch(t){i.e(t)}finally{i.f()}}},errormultiple:function(){},processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(t,e){if(t.previewElement){var n,i=k(t.previewElement.querySelectorAll("[data-dz-uploadprogress]"));try{for(i.s();!(n=i.n()).done;){var a=n.value;"PROGRESS"===a.nodeName?a.value=e:a.style.width="".concat(e,"%")}}catch(t){i.e(t)}finally{i.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var a=0,o=n;a<o.length;a++){var r=o[a];for(var s in r){var l=r[s];t[s]=l}}return t}}]),h(x,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(t){return t.accepted}).map(function(t){return t})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(t){return!t.accepted}).map(function(t){return t})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(t){return t})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(x.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(x.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(x.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(t){return t.status===x.UPLOADING||t.status===x.QUEUED}).map(function(t){return t})}},{key:"init",value:function(){var o=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(x.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){!function a(){return o.hiddenFileInput&&o.hiddenFileInput.parentNode.removeChild(o.hiddenFileInput),o.hiddenFileInput=document.createElement("input"),o.hiddenFileInput.setAttribute("type","file"),(null===o.options.maxFiles||1<o.options.maxFiles)&&o.hiddenFileInput.setAttribute("multiple","multiple"),o.hiddenFileInput.className="dz-hidden-input",null!==o.options.acceptedFiles&&o.hiddenFileInput.setAttribute("accept",o.options.acceptedFiles),null!==o.options.capture&&o.hiddenFileInput.setAttribute("capture",o.options.capture),o.hiddenFileInput.style.visibility="hidden",o.hiddenFileInput.style.position="absolute",o.hiddenFileInput.style.top="0",o.hiddenFileInput.style.left="0",o.hiddenFileInput.style.height="0",o.hiddenFileInput.style.width="0",x.getElement(o.options.hiddenInputContainer,"hiddenInputContainer").appendChild(o.hiddenFileInput),o.hiddenFileInput.addEventListener("change",function(){var t=o.hiddenFileInput.files;if(t.length){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;o.addFile(i)}}catch(t){n.e(t)}finally{n.f()}}return o.emit("addedfiles",t),a()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;var t,e=k(this.events);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.on(n,this.options[n])}}catch(t){e.e(t)}finally{e.f()}this.on("uploadprogress",function(){return o.updateTotalUploadProgress()}),this.on("removedfile",function(){return o.updateTotalUploadProgress()}),this.on("canceled",function(t){return o.emit("complete",t)}),this.on("complete",function(t){if(0===o.getAddedFiles().length&&0===o.getUploadingFiles().length&&0===o.getQueuedFiles().length)return setTimeout(function(){return o.emit("queuecomplete")},0)});function i(t){return function(t){if(t.dataTransfer.types)for(var e=0;e<t.dataTransfer.types.length;e++)if("Files"===t.dataTransfer.types[e])return!0;return!1}(t)&&(t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1)}return this.listeners=[{element:this.element,events:{dragstart:function(t){return o.emit("dragstart",t)},dragenter:function(t){return i(t),o.emit("dragenter",t)},dragover:function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",i(t),o.emit("dragover",t)},dragleave:function(t){return o.emit("dragleave",t)},drop:function(t){return i(t),o.drop(t)},dragend:function(t){return o.emit("dragend",t)}}}],this.clickableElements.forEach(function(e){return o.listeners.push({element:e,events:{click:function(t){return e===o.element&&t.target!==o.element&&!x.elementInside(t.target,o.element.querySelector(".dz-message"))||o.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,x.instances.splice(x.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var t,e=0,n=0;if(this.getActiveFiles().length){var i,a=k(this.getActiveFiles());try{for(a.s();!(i=a.n()).done;){var o=i.value;e+=o.upload.bytesSent,n+=o.upload.total}}catch(t){a.e(t)}finally{a.f()}t=100*e/n}else t=100;return this.emit("totaluploadprogress",t,n,e)}},{key:"_getParamName",value:function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(t,"]"):"")}},{key:"_renameFile",value:function(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}},{key:"getFallbackForm",value:function(){var t,e;if(t=this.getExistingFallback())return t;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>".concat(this.options.dictFallbackText,"</p>")),n+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var i=x.createElement(n);return"FORM"!==this.element.tagName?(e=x.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:i}},{key:"getExistingFallback",value:function(){for(var t=function(t){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(/(^| )fallback($| )/.test(i.className))return i}}catch(t){n.e(t)}finally{n.f()}},e=0,n=["div","form"];e<n.length;e++){var i,a=n[e];if(i=t(this.element.getElementsByTagName(a)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(i){return function(){var t=[];for(var e in i.events){var n=i.events[e];t.push(i.element.addEventListener(e,n,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(i){return function(){var t=[];for(var e in i.events){var n=i.events[e];t.push(i.element.removeEventListener(e,n,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(t){var e=0,n="b";if(0<t){for(var i=["tb","gb","mb","kb","b"],a=0;a<i.length;a++){var o=i[a];if(Math.pow(this.options.filesizeBase,4-a)/10<=t){e=t/Math.pow(this.options.filesizeBase,4-a),n=o;break}}e=Math.round(10*e)/10}return"<strong>".concat(e,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(t){if(t.dataTransfer){this.emit("drop",t);for(var e=[],n=0;n<t.dataTransfer.files.length;n++)e[n]=t.dataTransfer.files[n];if(e.length){var i=t.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)}this.emit("addedfiles",e)}}},{key:"paste",value:function(t){if(null!=(e=null!=t?t.clipboardData:void 0,n=function(t){return t.items},null!=e?n(e):void 0)){var e,n;this.emit("paste",t);var i=t.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function(t){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.addFile(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"_addFilesFromItems",value:function(o){var r=this;return function(){var t,e=[],n=k(o);try{for(n.s();!(t=n.n()).done;){var i,a=t.value;null!=a.webkitGetAsEntry&&(i=a.webkitGetAsEntry())?i.isFile?e.push(r.addFile(a.getAsFile())):i.isDirectory?e.push(r._addFilesFromDirectory(i,i.name)):e.push(void 0):null!=a.getAsFile&&(null==a.kind||"file"===a.kind)?e.push(r.addFile(a.getAsFile())):e.push(void 0)}}catch(t){n.e(t)}finally{n.f()}return e}()}},{key:"_addFilesFromDirectory",value:function(t,o){function e(e){return t=console,n="log",i=function(t){return t.log(e)},null!=t&&"function"==typeof t[n]?i(t,n):void 0;var t,n,i}var r=this,n=t.createReader();return function a(){return n.readEntries(function(t){if(0<t.length){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isFile?i.file(function(t){if(!r.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath="".concat(o,"/").concat(t.name),r.addFile(t)}):i.isDirectory&&r._addFilesFromDirectory(i,"".concat(o,"/").concat(i.name))}}catch(t){n.e(t)}finally{n.f()}a()}return null},e)}()}},{key:"accept",value:function(t,e){this.options.maxFilesize&&t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):x.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var n=this;e.upload={uuid:x.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=x.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){t?(e.accepted=!1,n._errorProcessing([e],t)):(e.accepted=!0,n.options.autoQueue&&n.enqueueFile(e)),n._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(t){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.enqueueFile(i)}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"enqueueFile",value:function(t){var e=this;if(t.status!==x.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=x.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return e.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(t){var e=this;if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(){return e._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var n=this._thumbnailQueue.shift();return this.createThumbnail(n,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(t){return e.emit("thumbnail",n,t),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(t){if(t.status===x.UPLOADING&&this.cancelUpload(t),this.files=m(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(t){null==t&&(t=!1);var e,n=k(this.files.slice());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.status===x.UPLOADING&&!t||this.removeFile(i)}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"resizeImage",value:function(a,t,e,n,o){var r=this;return this.createThumbnail(a,t,e,n,!0,function(t,e){if(null==e)return o(a);var n=r.options.resizeMimeType;null==n&&(n=a.type);var i=e.toDataURL(n,r.options.resizeQuality);return"image/jpeg"!==n&&"image/jpg"!==n||(i=b.restore(a.dataURL,i)),o(x.dataURItoBlob(i))})}},{key:"createThumbnail",value:function(t,e,n,i,a,o){var r=this,s=new FileReader;s.onload=function(){t.dataURL=s.result,"image/svg+xml"!==t.type?r.createThumbnailFromUrl(t,e,n,i,a,o):null!=o&&o(s.result)},s.readAsDataURL(t)}},{key:"displayExistingFile",value:function(e,t,n,i,a){var o=this,r=!(4<arguments.length&&void 0!==a)||a;if(this.emit("addedfile",e),this.emit("complete",e),r){e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,function(t){o.emit("thumbnail",e,t),n&&n()},i)}else this.emit("thumbnail",e,t),n&&n()}},{key:"createThumbnailFromUrl",value:function(o,r,s,l,e,c,t){var u=this,d=document.createElement("img");return t&&(d.crossOrigin=t),e="from-image"!=getComputedStyle(document.body).imageOrientation&&e,d.onload=function(){var t=function(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&e&&(t=function(t){return EXIF.getData(d,function(){return t(EXIF.getTag(this,"Orientation"))})}),t(function(t){o.width=d.width,o.height=d.height;var e=u.options.resize.call(u,o,r,s,l),n=document.createElement("canvas"),i=n.getContext("2d");switch(n.width=e.trgWidth,n.height=e.trgHeight,4<t&&(n.width=e.trgHeight,n.height=e.trgWidth),t){case 2:i.translate(n.width,0),i.scale(-1,1);break;case 3:i.translate(n.width,n.height),i.rotate(Math.PI);break;case 4:i.translate(0,n.height),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n.width);break;case 7:i.rotate(.5*Math.PI),i.translate(n.height,-n.width),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n.height,0)}v(i,d,null!=e.srcX?e.srcX:0,null!=e.srcY?e.srcY:0,e.srcWidth,e.srcHeight,null!=e.trgX?e.trgX:0,null!=e.trgY?e.trgY:0,e.trgWidth,e.trgHeight);var a=n.toDataURL("image/png");if(null!=c)return c(a,n)})},null!=c&&(d.onerror=c),d.src=o.dataURL}},{key:"processQueue",value:function(){var t=this.options.parallelUploads,e=this.getUploadingFiles().length,n=e;if(!(t<=e)){var i=this.getQueuedFiles();if(0<i.length){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-e));for(;n<t;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(t){return this.processFiles([t])}},{key:"processFiles",value:function(t){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.processing=!0,i.status=x.UPLOADING,this.emit("processing",i)}}catch(t){n.e(t)}finally{n.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(t){return t})}},{key:"cancelUpload",value:function(t){if(t.status===x.UPLOADING){var e,n=this._getFilesWithXhr(t.xhr),i=k(n);try{for(i.s();!(e=i.n()).done;){e.value.status=x.CANCELED}}catch(t){i.e(t)}finally{i.f()}void 0!==t.xhr&&t.xhr.abort();var a,o=k(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;this.emit("canceled",r)}}catch(t){o.e(t)}finally{o.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else t.status!==x.ADDED&&t.status!==x.QUEUED||(t.status=x.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(t){if("function"!=typeof t)return t;for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(this,n)}},{key:"uploadFile",value:function(t){return this.uploadFiles([t])}},{key:"uploadFiles",value:function(l){var c=this;this._transformFiles(l,function(t){if(c.options.chunking){var e=t[0];l[0].upload.chunked=c.options.chunking&&(c.options.forceChunking||e.size>c.options.chunkSize),l[0].upload.totalChunkCount=Math.ceil(e.size/c.options.chunkSize)}if(l[0].upload.chunked){var a=l[0],o=t[0];a.upload.chunks=[];var i=function(){for(var t=0;void 0!==a.upload.chunks[t];)t++;if(!(t>=a.upload.totalChunkCount)){0;var e=t*c.options.chunkSize,n=Math.min(e+c.options.chunkSize,o.size),i={name:c._getParamName(0),data:o.webkitSlice?o.webkitSlice(e,n):o.slice(e,n),filename:a.upload.filename,chunkIndex:t};a.upload.chunks[t]={file:a,index:t,dataBlock:i,status:x.UPLOADING,progress:0,retries:0},c._uploadData(l,[i])}};if(a.upload.finishedChunkUpload=function(t){var e=!0;t.status=x.SUCCESS,t.dataBlock=null,t.xhr=null;for(var n=0;n<a.upload.totalChunkCount;n++){if(void 0===a.upload.chunks[n])return i();a.upload.chunks[n].status!==x.SUCCESS&&(e=!1)}e&&c.options.chunksUploaded(a,function(){c._finished(l,"",null)})},c.options.parallelChunkUploads)for(var n=0;n<a.upload.totalChunkCount;n++)i();else i()}else{for(var r=[],s=0;s<l.length;s++)r[s]={name:c._getParamName(s),data:t[s],filename:l[s].upload.filename};c._uploadData(l,r)}})}},{key:"_getChunk",value:function(t,e){for(var n=0;n<t.upload.totalChunkCount;n++)if(void 0!==t.upload.chunks[n]&&t.upload.chunks[n].xhr===e)return t.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){var n,i=this,a=new XMLHttpRequest,o=k(e);try{for(o.s();!(n=o.n()).done;){n.value.xhr=a}}catch(t){o.e(t)}finally{o.f()}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=a);var r=this.resolveOption(this.options.method,e),s=this.resolveOption(this.options.url,e);a.open(r,s,!0),a.timeout=this.resolveOption(this.options.timeout,e),a.withCredentials=!!this.options.withCredentials,a.onload=function(t){i._finishedUploading(e,a,t)},a.ontimeout=function(){i._handleUploadError(e,a,"Request timedout after ".concat(i.options.timeout/1e3," seconds"))},a.onerror=function(){i._handleUploadError(e,a)},(null!=a.upload?a.upload:a).onprogress=function(t){return i._updateFilesUploadProgress(e,a,t)};var l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var c in this.options.headers&&x.extend(l,this.options.headers),l){var u=l[c];u&&a.setRequestHeader(c,u)}var d=new FormData;if(this.options.params){var h=this.options.params;for(var p in"function"==typeof h&&(h=h.call(this,e,a,e[0].upload.chunked?this._getChunk(e[0],a):null)),h){var f=h[p];if(Array.isArray(f))for(var m=0;m<f.length;m++)d.append(p,f[m]);else d.append(p,f)}}var g,v=k(e);try{for(v.s();!(g=v.n()).done;){var b=g.value;this.emit("sending",b,a,d)}}catch(t){v.e(t)}finally{v.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",e,a,d),this._addFormElementData(d);for(var y=0;y<t.length;y++){var w=t[y];d.append(w.name,w.data,w.filename)}this.submitRequest(a,d,e)}},{key:"_transformFiles",value:function(n,i){for(var t=this,a=[],o=0,e=function(e){t.options.transformFile.call(t,n[e],function(t){a[e]=t,++o===n.length&&i(a)})},r=0;r<n.length;r++)e(r)}},{key:"_addFormElementData",value:function(t){if("FORM"===this.element.tagName){var e,n=k(this.element.querySelectorAll("input, textarea, select, button"));try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i.getAttribute("name"),o=i.getAttribute("type");if(o=o&&o.toLowerCase(),null!=a)if("SELECT"===i.tagName&&i.hasAttribute("multiple")){var r,s=k(i.options);try{for(s.s();!(r=s.n()).done;){var l=r.value;l.selected&&t.append(a,l.value)}}catch(t){s.e(t)}finally{s.f()}}else(!o||"checkbox"!==o&&"radio"!==o||i.checked)&&t.append(a,i.value)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"_updateFilesUploadProgress",value:function(t,e,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,t[0].upload.chunked){var a=t[0],o=this._getChunk(a,e);o.progress=i,o.total=n.total,o.bytesSent=n.loaded;a.upload.progress=0,a.upload.total=0;for(var r=a.upload.bytesSent=0;r<a.upload.totalChunkCount;r++)void 0!==a.upload.chunks[r]&&void 0!==a.upload.chunks[r].progress&&(a.upload.progress+=a.upload.chunks[r].progress,a.upload.total+=a.upload.chunks[r].total,a.upload.bytesSent+=a.upload.chunks[r].bytesSent);a.upload.progress=a.upload.progress/a.upload.totalChunkCount}else{var s,l=k(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.upload.progress=i,c.upload.total=n.total,c.upload.bytesSent=n.loaded}}catch(t){l.e(t)}finally{l.f()}}var u,d=k(t);try{for(d.s();!(u=d.n()).done;){var h=u.value;this.emit("uploadprogress",h,h.upload.progress,h.upload.bytesSent)}}catch(t){d.e(t)}finally{d.f()}}else{var p=!0;i=100;var f,m=k(t);try{for(m.s();!(f=m.n()).done;){var g=f.value;100===g.upload.progress&&g.upload.bytesSent===g.upload.total||(p=!1),g.upload.progress=i,g.upload.bytesSent=g.upload.total}}catch(t){m.e(t)}finally{m.f()}if(p)return;var v,b=k(t);try{for(b.s();!(v=b.n()).done;){var y=v.value;this.emit("uploadprogress",y,i,y.upload.bytesSent)}}catch(t){b.e(t)}finally{b.f()}}}},{key:"_finishedUploading",value:function(t,e,n){var i;if(t[0].status!==x.CANCELED&&4===e.readyState){if("arraybuffer"!==e.responseType&&"blob"!==e.responseType&&(i=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(t){n=t,i="Invalid JSON response from server."}this._updateFilesUploadProgress(t),200<=e.status&&e.status<300?t[0].upload.chunked?t[0].upload.finishedChunkUpload(this._getChunk(t[0],e)):this._finished(t,i,n):this._handleUploadError(t,e,i)}}},{key:"_handleUploadError",value:function(t,e,n){if(t[0].status!==x.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(t[0],e);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(t,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(t,n||this.options.dictResponseError.replace("{{statusCode}}",e.status),e)}}},{key:"submitRequest",value:function(t,e){t.send(e)}},{key:"_finished",value:function(t,e,n){var i,a=k(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.status=x.SUCCESS,this.emit("success",o,e,n),this.emit("complete",o)}}catch(t){a.e(t)}finally{a.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(t,e,n){var i,a=k(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.status=x.ERROR,this.emit("error",o,e,n),this.emit("complete",o)}}catch(t){a.e(t)}finally{a.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}}]),x}();f.initClass(),f.version="5.7.2",f.options={},f.optionsForElement=function(t){return t.getAttribute("id")?f.options[g(t.getAttribute("id"))]:void 0},f.instances=[],f.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},f.autoDiscover=!0,f.discover=function(){var o;if(document.querySelectorAll)o=document.querySelectorAll(".dropzone");else{o=[];var t=function(a){return function(){var t,e=[],n=k(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;/(^| )dropzone($| )/.test(i.className)?e.push(o.push(i)):e.push(void 0)}}catch(t){n.e(t)}finally{n.f()}return e}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t,e=[],n=k(o);try{for(n.s();!(t=n.n()).done;){var i=t.value;!1!==f.optionsForElement(i)?e.push(new f(i)):e.push(void 0)}}catch(t){n.e(t)}finally{n.f()}return e}()},f.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],f.isBrowserSupported=function(){var t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var e,n=k(f.blacklistedBrowsers);try{for(n.s();!(e=n.n()).done;){e.value.test(navigator.userAgent)&&(t=!1)}}catch(t){n.e(t)}finally{n.f()}}else t=!1;else t=!1;return t},f.dataURItoBlob=function(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),a=new Uint8Array(i),o=0,r=e.length,s=0<=r;s?o<=r:r<=o;s?o++:o--)a[o]=e.charCodeAt(o);return new Blob([i],{type:n})};var m=function(t,e){return t.filter(function(t){return t!==e}).map(function(t){return t})},g=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})};f.createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},f.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},f.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `".concat(e,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},f.getElements=function(t,e){var n,i;if(t instanceof Array){i=[];try{var a,o=k(t);try{for(o.s();!(a=o.n()).done;)n=a.value,i.push(this.getElement(n,e))}catch(t){o.e(t)}finally{o.f()}}catch(t){i=null}}else if("string"==typeof t){i=[];var r,s=k(document.querySelectorAll(t));try{for(s.s();!(r=s.n()).done;)n=r.value,i.push(n)}catch(t){s.e(t)}finally{s.f()}}else null!=t.nodeType&&(i=[t]);if(null==i||!i.length)throw new Error("Invalid `".concat(e,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},f.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},f.isValidFile=function(t,e){if(!e)return!0;e=e.split(",");var n,i=t.type,a=i.replace(/\/.*$/,""),o=k(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;if("."===(r=r.trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(a===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0}}catch(t){o.e(t)}finally{o.f()}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new f(this,t)})}),null!=e?e.exports=f:window.Dropzone=f,f.ADDED="added",f.QUEUED="queued",f.ACCEPTED=f.QUEUED,f.UPLOADING="uploading",f.PROCESSING=f.UPLOADING,f.CANCELED="canceled",f.ERROR="error",f.SUCCESS="success";var v=function(t,e,n,i,a,o,r,s,l,c){var u=function(t){t.naturalWidth;var e=t.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=e;var i=n.getContext("2d");i.drawImage(t,0,0);for(var a=i.getImageData(1,0,1,e).data,o=0,r=e,s=e;o<s;){0===a[4*(s-1)+3]?r=s:o=s,s=r+o>>1}var l=s/e;return 0==l?1:l}(e);return t.drawImage(e,n,i,a,o,r,s,l,c/u)},b=function(){function t(){u(this,t)}return h(t,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(t){for(var e="",n=void 0,i=void 0,a="",o=void 0,r=void 0,s=void 0,l="",c=0;o=(n=t[c++])>>2,r=(3&n)<<4|(i=t[c++])>>4,s=(15&i)<<2|(a=t[c++])>>6,l=63&a,isNaN(i)?s=l=64:isNaN(a)&&(l=64),e=e+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l),n=i=a="",o=r=s=l="",c<t.length;);return e}},{key:"restore",value:function(t,e){if(!t.match("data:image/jpeg;base64,"))return e;var n=this.decode64(t.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),a=this.exifManipulation(e,i);return"data:image/jpeg;base64,".concat(this.encode64(a))}},{key:"exifManipulation",value:function(t,e){var n=this.getExifArray(e),i=this.insertExif(t,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(t){for(var e=void 0,n=0;n<t.length;){if(255===(e=t[n])[0]&225===e[1])return e;n++}return[]}},{key:"insertExif",value:function(t,e){var n=t.replace("data:image/jpeg;base64,",""),i=this.decode64(n),a=i.indexOf(255,3),o=i.slice(0,a),r=i.slice(a),s=o;return s=(s=s.concat(e)).concat(r)}},{key:"slice2Segments",value:function(t){for(var e=0,n=[];;){if(255===t[e]&218===t[e+1])break;if(255===t[e]&216===t[e+1])e+=2;else{var i=e+(256*t[e+2]+t[e+3])+2,a=t.slice(e,i);n.push(a),e=i}if(e>t.length)break}return n}},{key:"decode64",value:function(t){var e=void 0,n=void 0,i="",a=void 0,o=void 0,r="",s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");e=this.KEY_STR.indexOf(t.charAt(s++))<<2|(a=this.KEY_STR.indexOf(t.charAt(s++)))>>4,n=(15&a)<<4|(o=this.KEY_STR.indexOf(t.charAt(s++)))>>2,i=(3&o)<<6|(r=this.KEY_STR.indexOf(t.charAt(s++))),l.push(e),64!==o&&l.push(n),64!==r&&l.push(i),e=n=i="",a=o=r="",s<t.length;);return l}}]),t}();b.initClass();f._autoDiscoverFunction=function(){if(f.autoDiscover)return f.discover()},function(e,n){function i(t){if("readystatechange"!==t.type||"complete"===o.readyState)return("load"===t.type?e:o)[l](c+t.type,i,!1),!a&&(a=!0)?n.call(e,t.type||t):void 0}var a=!1,t=!0,o=e.document,r=o.documentElement,s=o.addEventListener?"addEventListener":"attachEvent",l=o.addEventListener?"removeEventListener":"detachEvent",c=o.addEventListener?"":"on";if("complete"!==o.readyState){if(o.createEventObject&&r.doScroll){try{t=!e.frameElement}catch(t){}t&&!function e(){try{r.doScroll("left")}catch(t){return void setTimeout(e,50)}return i("poll")}()}o[s](c+"DOMContentLoaded",i,!1),o[s](c+"readystatechange",i,!1),e[s](c+"load",i,!1)}}(window,f._autoDiscoverFunction)},{}],29:[function(t,e,n){"use strict";var i=t("./base"),a=t("mout/string/trim"),o=t("mout/array/forEach"),r=t("mout/array/filter"),s=t("mout/array/indexOf");i.implement({setAttribute:function(e,n){return this.forEach(function(t){t.setAttribute(e,n)})},getAttribute:function(t){var e=this[0].getAttributeNode(t);return e&&e.specified?e.value:null},hasAttribute:function(t){var e=this[0];if(e.hasAttribute)return e.hasAttribute(t);var n=e.getAttributeNode(t);return!(!n||!n.specified)},removeAttribute:function(n){return this.forEach(function(t){var e=t.getAttributeNode(n);e&&t.removeAttributeNode(e)})}});var l={};o(["type","value","name","href","title","id"],function(n){l[n]=function(e){return void 0!==e?this.forEach(function(t){t[n]=e}):this[0][n]}}),o(["checked","disabled","selected"],function(n){l[n]=function(e){return void 0!==e?this.forEach(function(t){t[n]=!!e}):!!this[0][n]}});function c(t){var e=a(t).replace(/\s+/g," ").split(" "),n={};return r(e,function(t){if(""!==t&&!n[t])return n[t]=t}).sort()}l.className=function(e){return void 0!==e?this.forEach(function(t){t.className=c(e).join(" ")}):c(this[0].className).join(" ")},i.implement({attribute:function(t,e){var n=l[t];return n?n.call(this,e):null!=e?this.setAttribute(t,e):null===e?this.removeAttribute(t):void 0===e?this.getAttribute(t):void 0}}),i.implement(l),i.implement({check:function(){return this.checked(!0)},uncheck:function(){return this.checked(!1)},disable:function(){return this.disabled(!0)},enable:function(){return this.disabled(!1)},select:function(){return this.selected(!0)},deselect:function(){return this.selected(!1)}}),i.implement({classNames:function(){return c(this[0].className)},hasClass:function(t){return-1<s(this.classNames(),t)},addClass:function(i){return this.forEach(function(t){var e=t.className,n=c(e+" "+i).join(" ");e!==n&&(t.className=n)})},removeClass:function(e){return this.forEach(function(t){var n=c(t.className);o(c(e),function(t){var e=s(n,t);-1<e&&n.splice(e,1)}),t.className=n.join(" ")})},toggleClass:function(t,e){var n=void 0!==e?e:!this.hasClass(t);return n?this.addClass(t):this.removeClass(t),!!n}}),i.prototype.toString=function(){var t=this.tag(),e=this.id(),n=this.classNames(),i=t;return e&&(i+="#"+e),n.length&&(i+="."+n.join(".")),i};var u=null==document.createElement("div").textContent?"innerText":"textContent";i.implement({tag:function(){return this[0].tagName.toLowerCase()},html:function(e){return void 0!==e?this.forEach(function(t){t.innerHTML=e}):this[0].innerHTML},text:function(e){return void 0!==e?this.forEach(function(t){t[u]=e}):this[0][u]},data:function(t,e){switch(e){case void 0:return this.getAttribute("data-"+t);case null:return this.removeAttribute("data-"+t);default:return this.setAttribute("data-"+t,e)}}}),e.exports=i},{"./base":30,"mout/array/filter":70,"mout/array/forEach":74,"mout/array/indexOf":75,"mout/string/trim":173}],30:[function(t,e,n){"use strict";function h(t){return t===window?"window":t===document?"document":t===document.documentElement?"html":t[d]||(t[d]=(c++).toString(36))}var i=t("prime"),a=t("mout/array/forEach"),o=t("mout/array/map"),r=t("mout/array/filter"),s=t("mout/array/every"),l=t("mout/array/some"),c=0,u=document.__counter,d="uid:"+(document.__counter=(u?parseInt(u,36)+1:0).toString(36)),p={},f=i({constructor:function t(e,n){if(null==e)return this&&this.constructor===t?new m:null;var i,a;if(e.constructor!==m){if(i=new m,"string"==typeof e)return i.search?(i[i.length++]=n||document,i.search(e)):null;if(e.nodeType||e===window)i[i.length++]=e;else if(e.length)for(var o={},r=0,s=e.length;r<s;r++){var l=t(e[r],n);if(l&&l.length)for(var c=0,u=l.length;c<u;c++){var d=l[c];o[a=h(d)]||(i[i.length++]=d,o[a]=!0)}}}else i=e;return i.length?1===i.length?(a=h(i[0]),p[a]||(p[a]=i)):i:null}}),m=i({inherits:f,constructor:function(){this.length=0},unlink:function(){return this.map(function(t){return delete p[h(t)],t})},forEach:function(t,e){return a(this,t,e),this},map:function(t,e){return o(this,t,e)},filter:function(t,e){return r(this,t,e)},every:function(t,e){return s(this,t,e)},some:function(t,e){return l(this,t,e)}});e.exports=f},{"mout/array/every":69,"mout/array/filter":70,"mout/array/forEach":74,"mout/array/map":80,"mout/array/some":84,prime:203}],31:[function(t,e,n){"use strict";var c=t("prime/map"),h=t("./events");t("./traversal"),h.implement({delegate:function(r,s,l){return this.forEach(function(t){var a=h(t),e=a._delegation||(a._delegation={}),n=e[r]||(e[r]={}),i=n[s]||(n[s]=new c);if(!i.get(l)){var o=function(t){var e,n=h(t.target||t.srcElement),i=n.matches(s)?n:n.parent(s);return i&&(e=l.call(a,t,i)),e};i.set(l,o),a.on(r,o)}})},undelegate:function(c,u,d){return this.forEach(function(t){var e,n,i,a=h(t);if((e=a._delegation)&&(n=e[c])&&(i=n[u])){var o=i.get(d);if(o){a.off(c,o),i.remove(o),i.count()||delete n[u];var r,s=!0,l=!0;for(r in n){s=!1;break}for(r in s&&delete e[c],e){l=!1;break}l&&delete a._delegation}}})}}),e.exports=h},{"./events":33,"./traversal":36,"prime/map":204}],32:[function(t,e,n){"use strict";var i=t("./events"),a="onreadystatechange"in document,o=!1,r=!1,s=[],l=[],c=null,u=null,d=document.createElement("div"),h=i(document),p=i(window),f=function(){if(u=u&&clearTimeout(u),!r){a&&h.off("readystatechange",m),h.off("DOMContentLoaded",f),p.off("load",f),r=!0;for(var t=0;c=s[t++];)c()}return r},m=function(){for(var t=l.length;t--;)if(l[t]())return f();return!1},g=function(){clearTimeout(u),m()||(u=setTimeout(g,1e3/60))};if(document.readyState){var v=function(){return!!/loaded|complete/.test(document.readyState)};l.push(v),v()?f():a?h.on("readystatechange",m):o=!0}if(d.doScroll){var b=function(){try{return d.doScroll(),!0}catch(t){}return!1};b()||(l.push(b),o=!0)}o&&g(),h.on("DOMContentLoaded",f),p.on("load",f),e.exports=function(t){return r?t():s.push(t),null}},{"./events":33}],33:[function(t,e,n){"use strict";var u=t("prime/emitter"),d=t("./base"),i=document.documentElement,s=i.addEventListener?function(t,e,n,i){return t.addEventListener(e,n,i||!1),n}:function(t,e,n){return t.attachEvent("on"+e,n),n},h=i.removeEventListener?function(t,e,n,i){t.removeEventListener(e,n,i||!1)}:function(t,e,n){t.detachEvent("on"+e,n)};d.implement({on:function(a,o,r){return this.forEach(function(t){var e=d(t),n=a+(r?":capture":"");u.prototype.on.call(e,n,o);var i=e._domListeners||(e._domListeners={});i[n]||(i[n]=s(t,a,function(t){u.prototype.emit.call(e,n,t||window.event,u.EMIT_SYNC)},r))})},off:function(s,l,c){return this.forEach(function(t){var e,n=d(t),i=s+(c?":capture":""),a=n._domListeners,o=n._listeners;if(a&&(e=a[i])&&o&&o[i]&&(u.prototype.off.call(n,i,l),!n._listeners||!n._listeners[s])){for(var r in h(t,s,e),delete a[s],a)return;delete n._domListeners}})},emit:function(){var e=arguments;return this.forEach(function(t){u.prototype.emit.apply(d(t),e)})}}),e.exports=d},{"./base":30,"prime/emitter":202}],34:[function(t,e,n){"use strict";var i=t("./base");t("./attributes"),t("./events"),t("./insertion"),t("./traversal"),t("./delegation"),e.exports=i},{"./attributes":29,"./base":30,"./delegation":31,"./events":33,"./insertion":35,"./traversal":36}],35:[function(t,e,n){"use strict";var i=t("./base");i.implement({appendChild:function(t){return this[0].appendChild(i(t)[0]),this},insertBefore:function(t,e){return this[0].insertBefore(i(t)[0],i(e)[0]),this},removeChild:function(t){return this[0].removeChild(i(t)[0]),this},replaceChild:function(t,e){return this[0].replaceChild(i(t)[0],i(e)[0]),this}}),i.implement({before:function(e){var n=(e=i(e)[0]).parentNode;return n&&this.forEach(function(t){n.insertBefore(t,e)}),this},after:function(e){var n=(e=i(e)[0]).parentNode;return n&&this.forEach(function(t){n.insertBefore(t,e.nextSibling)}),this},bottom:function(e){return e=i(e)[0],this.forEach(function(t){e.appendChild(t)})},top:function(e){return e=i(e)[0],this.forEach(function(t){e.insertBefore(t,e.firstChild)})}}),i.implement({insert:i.prototype.bottom,remove:function(){return this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)})},replace:function(t){return(t=i(t)[0]).parentNode.replaceChild(this[0],t),this}}),e.exports=i},{"./base":30}],36:[function(t,e,n){"use strict";function i(e,t){return a(o.parse(t||"*"),function(t){return e+" "+t}).join(", ")}var a=t("mout/array/map"),o=t("slick"),r=t("./base"),s=Array.prototype.push;r.implement({search:function(t){if(1===this.length)return r(o.search(t,this[0],new r));for(var e,n=[],i=0;e=this[i];i++)s.apply(n,o.search(t,e));return(n=r(n))&&n.sort()},find:function(t){if(1===this.length)return r(o.find(t,this[0]));for(var e,n=0;e=this[n];n++){var i=o.find(t,e);if(i)return r(i)}return null},sort:function(){return o.sort(this)},matches:function(t){return o.matches(this[0],t)},contains:function(t){return o.contains(this[0],t)},nextSiblings:function(t){return this.search(i("~",t))},nextSibling:function(t){return this.find(i("+",t))},previousSiblings:function(t){return this.search(i("!~",t))},previousSibling:function(t){return this.find(i("!+",t))},children:function(t){return this.search(i(">",t))},firstChild:function(t){return this.find(i("^",t))},lastChild:function(t){return this.find(i("!^",t))},parent:function(t){var e=[];t:for(var n,i=0;n=this[i];i++)for(;(n=n.parentNode)&&n!==document;)if(!t||o.matches(n,t)){e.push(n);break t}return r(e)},parents:function(t){for(var e,n=[],i=0;e=this[i];i++)for(;(e=e.parentNode)&&e!==document;)t&&!o.matches(e,t)||n.push(e);return r(n)}}),e.exports=r},{"./base":30,"mout/array/map":80,slick:208}],37:[function(t,e,n){"use strict";var s=t("mout/array/forEach"),i=t("mout/array/map"),a=t("slick/parser"),l=t("./base");e.exports=function(t,r){return l(i(a(t),function(t){var a,o;return s(t,function(t,e){var i=(r||document).createElement(t.tag);if(t.id&&(i.id=t.id),t.classList&&(i.className=t.classList.join(" ")),t.attributes&&s(t.attributes,function(t){i.setAttribute(t.name,t.value||"")}),t.pseudos&&s(t.pseudos,function(t){var e=l(i),n=e[t.name];n&&n.call(e,t.value)}),0===e)o=i;else if(" "===t.combinator)a.appendChild(i);else if("+"===t.combinator){var n=a.parentNode;n&&n.appendChild(i)}a=i}),o}))}},{"./base":30,"mout/array/forEach":74,"mout/array/map":80,"slick/parser":209}],38:[function(t,e,n){"use strict";var i=t("./lib/color"),a=t("./lib/frame"),o="undefined"!=typeof document?t("./lib/browser"):t("./lib/fx");o.requestFrame=function(t){return a.request(t),this},o.cancelFrame=function(t){return a.cancel(t),this},o.color=i,e.exports=o},{"./lib/browser":39,"./lib/color":40,"./lib/frame":41,"./lib/fx":42}],39:[function(mt,gt,t){(function(t){"use strict";function i(t,e){return String.prototype.match.call(t,e)}function a(t){return w[t]||(w[t]=f(t))}function l(t){return Math.round(1e3*t)/1e3}function c(t,e){var n=t.parentNode,i=1;return n&&(k.style.cssText=S+"width:100"+e+";",n.appendChild(k),i=k.offsetWidth/100,n.removeChild(k)),i}function n(t){var e=t.length;return 1===e?t.push(t[0],t[0],t[0]):2===e?t.push(t[0],t[1]):3===e&&t.push(t[1]),t}function o(t,e){return null==t||""===t?e?"1":"":isFinite(t=+t)?t<0?"0":t+"":"1"}var u=mt("./color"),e=mt("./frame"),r=(e.cancel,e.request),s=mt("prime"),d=mt("prime/string/camelize"),h=mt("prime/string/clean"),p=mt("prime/string/capitalize"),f=mt("prime/string/hyphenate"),m=mt("prime/array/map"),g=mt("prime/array/forEach"),v=mt("prime/array/indexOf"),b=mt("elements"),y=mt("./fx"),w={},x=t.getComputedStyle?function(t){var e=getComputedStyle(t,null);return function(t){return e?e.getPropertyValue(a(t)):""}}:function(t){var e=t.currentStyle;return function(t){return e?e[d(t)]:""}},k=document.createElement("div"),S="border:none;margin:none;padding:none;visibility:hidden;position:absolute;height:0;",C="([-.\\d]+)(%|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vm)",E=C+"?",T=RegExp(C,"g"),O=RegExp(E),I=RegExp(E,"g"),_=RegExp("none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit");try{k.style.color="rgba(0,0,0,0.5)"}catch(t){}function A(t,e){var n;if(!t||!(n=u(t,!0)))return e?"rgba(0,0,0,1)":"";if(e)return"rgba("+n+")";var i=n[3];return 0===i?"transparent":M&&1!==i?"rgba("+n+")":"rgb("+n.slice(0,3)+")"}function D(t,e){if(null==t||""===t)return e?"0px":"";var n=i(t,O);return n?n[1]+(n[2]||"px"):t}function N(t,e){return null!=t&&""!==t&&t.match(_)?t:e?"none":""}function j(t,e){var n,i="0px none rgba(0,0,0,1)";if(null==t||""===t)return e?i:"";if(0===t||"none"===t)return e?i:t+"";var a=(t=t.replace(u.x,function(t){return n=t,""})).match(_),o=t.match(I);return h([D(o?o[0]:"",e),N(a?a[0]:"",e),A(n,e)].join(" "))}function F(t,e){return null==t||""===t?e?"0px 0px 0px 0px":"":h(n(m(h(t).split(" "),function(t){return D(t,e)})).join(" "))}function z(t,o,r){var e="rgba(0,0,0,0)",n=3===r?e+" 0px 0px 0px":e+" 0px 0px 0px 0px";if(null==t||""===t)return o?n:"";if("none"===t)return o?n:t;var s=[];return t=h(t).replace(u.x,function(t){return s.push(t),""}),m(t.split(","),function(t,e){var n=A(s[e],o),i=/inset/.test(t),a=t.match(I)||["0px"];for(a=m(a,function(t){return D(t,o)});a.length<r;)a.push("0px");return(i?["inset",n]:[n]).concat(a).join(" ")}).join(", ")}function R(t,e){return null==t||""===t?"":t.replace(u.x,function(t){return A(t,e)}).replace(T,function(t){return D(t,e)})}function P(t){return B[t]||(B[t]=(e=G[t]||t,n=H[t]||R,function(){return n(x(this)(e),!0)}));var e,n}function L(t){return $[t]||($[t]=(e=G[t]||t,n=H[t]||R,function(t){this.style[e]=n(t,!1)}));var e,n}var M=/^rgba/.test(k.style.color),B={},$={},H={},G={},U=["Top","Right","Bottom","Left"],q=["TopLeft","TopRight","BottomRight","BottomLeft"];g(U,function(t){var e="border"+t;g(["margin"+t,"padding"+t,e+"Width",t.toLowerCase()],function(t){H[t]=D}),H[e+"Color"]=A,H[e+"Style"]=N,H[e]=j,B[e]=function(){return[P(e+"Width").call(this),P(e+"Style").call(this),P(e+"Color").call(this)].join(" ")}}),g(q,function(t){H["border"+t+"Radius"]=D}),H.color=H.backgroundColor=A,H.width=H.height=H.minWidth=H.minHeight=H.maxWidth=H.maxHeight=H.fontSize=H.backgroundSize=D,g(["margin","padding"],function(e){H[e]=F,B[e]=function(){return m(U,function(t){return P(e+t).call(this)},this).join(" ")}}),H.borderWidth=F,H.borderStyle=function(t,e){return null==t||""===t?e?n(["none"]).join(" "):"":(t=h(t).split(" "),h(n(m(t,function(t){N(t,e)})).join(" ")))},H.borderColor=function(t,e){return(t=t&&i(t,u.x))?h(n(m(t,function(t){return A(t,e)})).join(" ")):e?n(["rgba(0,0,0,1)"]).join(" "):""},g(["Width","Style","Color"],function(e){B["border"+e]=function(){return m(U,function(t){return P("border"+t+e).call(this)},this).join(" ")}}),H.borderRadius=F,B.borderRadius=function(){return m(q,function(t){return P("border"+t+"Radius").call(this)},this).join(" ")},H.border=j,B.border=function(){for(var t,e=0;e<U.length;e++){var n=P("border"+U[e]).call(this);if(t&&n!==t)return null;t=n}return t},H.zIndex=function(t){return null==t?"":t+""},H.opacity=o;var Y=null!=k.style.MsFilter?"MsFilter":null!=k.style.filter&&"filter";if(Y&&null==k.style.opacity){var V=/alpha\(opacity=([\d.]+)\)/i;$.opacity=function(t){t="1"===(t=o(t))?"":"alpha(opacity="+Math.round(100*t)+")";var e=x(this)(Y);return this.style[Y]=V.test(e)?e.replace(V,t):e+" "+t},B.opacity=function(){var t=x(this)(Y).match(V);return(t?t[1]/100:1)+""}}var J=H.boxShadow=function(t,e){return z(t,e,4)},W=H.textShadow=function(t,e){return z(t,e,3)};g(["Webkit","Moz","ms","O",null],function(n){g(["transition","transform","transformOrigin","transformStyle","perspective","perspectiveOrigin","backfaceVisibility"],function(t){var e=n?n+p(t):t;"ms"===n&&(w[e]="-ms-"+a(t)),null!=k.style[e]&&(G[t]=e)})});var X,K,Q,Z,tt,et,nt=G.transition,it=G.transform;function at(t){var e=Q.apply(null,t.match(tt).slice(1))||[[0,0],0,0,[0,0]];return["translate("+m(e[0],function(t){return l(t)+"px"})+")","rotate("+l(180*e[1]/Math.PI)+"deg)","skewX("+l(180*e[2]/Math.PI)+"deg)","scale("+m(e[3],l)+")"].join(" ")}function ot(t){return t||"0px"}function rt(t){return t||"1"}function st(t){return t||"0deg"}"OTransition"===nt&&(nt=null),!nt&&it&&(Q=mt("./unmatrix2d"),Z="\\s*([-\\d\\w.]+)\\s*",tt=RegExp("matrix\\("+[Z,Z,Z,Z,Z,Z]+"\\)"),et={translate:function(t){var e=(t=t||"0px,0px").split(",");return e[1]||(e[1]="0px"),m(e,h)+""},translateX:ot,translateY:ot,scale:function(t){var e=(t=t||"1,1").split(",");return e[1]||(e[1]=e[0]),m(e,h)+""},scaleX:rt,scaleY:rt,rotate:st,skewX:st,skewY:st},(K=s({constructor:function(t){var i=this.names=[],a=this.values=[];t.replace(/(\w+)\(([-.\d\s\w,]+)\)/g,function(t,e,n){i.push(e),a.push(n)})},identity:function(){var n=[];return g(this.names,function(t){var e=et[t];e&&n.push(t+"("+e()+")")}),n.join(" ")},sameType:function(t){return this.names.toString()===t.names.toString()},decompose:function(){var t=this.toString();k.style.cssText=S+a(it)+":"+t+";",document.body.appendChild(k);var e=x(k)(it);return e&&"none"!==e||(e="matrix(1, 0, 0, 1, 0, 0)"),document.body.removeChild(k),at(e)}})).prototype.toString=function(a){var o=this.values,r=[];return g(this.names,function(t,e){var n=et[t];if(n){var i=n(o[e]);a&&i===n()||r.push(t+"("+i+")")}}),r.length?r.join(" "):"none"},K.union=function(t,e){var n,i;if(t!==e&&("none"===t?(e=(i=new K(e)).toString(),t=i.identity(),n=new K(t)):"none"===e?(t=(n=new K(t)).toString(),e=n.identity(),i=new K(e)):(t=(n=new K(t)).toString(),e=(i=new K(e)).toString()),t!==e&&(n.sameType(i)||(t=n.decompose(),e=i.decompose()),t!==e)))return[t,e]},X=H.transform=function(t){return t&&"none"!==t?new K(tt.test(t)?at(t):t).toString(!0):"none"},B.transform=function(){var t=this.style;return t[it]||(t[it]=X(x(this)(it)))});function lt(o,t,e){var n=H[t]||R,i=P(t).call(o);if(i!==(e=n(e,!0))){if(n===D||n===j||n===F){var r=e.match(T),s=0;r&&(i=i.replace(T,function(t,e,n){var i=r[s++].match(O)[2];if(n===i)return t;var a="px"===n?e:c(o,n)*e;return l(a/c(o,i))+i})),0<s&&L(t).call(o,i)}else if(n===X)return K.union(i,e);return i!==e?[i,e]:null}}var ct,ut=s({inherits:y,constructor:function t(e,n){var i=P(n),a=L(n);this.get=function(){return i.call(e)},this.set=function(t){return a.call(e,t)},t.parent.constructor.call(this,this.set),this.node=e,this.property=n}});ct=s({inherits:ut,constructor:function t(){return t.parent.constructor.apply(this,arguments)},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=lt(this.node,this.property,t);if(!e)return this.cancel(t),this;if(ct.parent.start.apply(this,e),!this.cancelStep)return this;var n=H[this.property]||R;return n!==J&&n!==W&&n!==R||this.templateFrom===this.templateTo||(this.cancelStep(),delete this.cancelStep,this.cancel(t)),this},parseEquation:function(t){if("string"==typeof t)return ct.parent.parseEquation.call(this,t)}});function dt(t,e,n,i){var a=v(e,t);-1!==a&&(e.splice(a,1),n.splice(a,1),i.splice(a,1))}function ht(t,e){return"function"==typeof t?y(t):b(t,e)}var pt=s({inherits:ut,constructor:function t(e,n){t.parent.constructor.call(this,e,n),this.hproperty=a(G[n]||n);var i=this;this.bSetTransitionCSS=function(t){i.setTransitionCSS(t)},this.bSetStyleCSS=function(t){i.setStyleCSS(t)},this.bComplete=function(){i.complete()}},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=lt(this.node,this.property,t);return e?(this.to=e[1],this.cancelSetTransitionCSS=r(this.bSetTransitionCSS)):this.cancel(t),this},setTransitionCSS:function(t){delete this.cancelSetTransitionCSS,this.resetCSS(!0),this.cancelSetStyleCSS=r(this.bSetStyleCSS)},setStyleCSS:function(t){delete this.cancelSetStyleCSS;var e=this.duration;this.cancelComplete=setTimeout(this.bComplete,e),this.endTime=t+e,this.set(this.to)},complete:function(){delete this.cancelComplete,this.resetCSS(),this.callback(this.endTime)},stop:function(t){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelSetTransitionCSS?(this.cancelSetTransitionCSS(),delete this.cancelSetTransitionCSS):this.cancelSetStyleCSS?(this.cancelSetStyleCSS(),delete this.cancelSetStyleCSS,t&&this.resetCSS()):this.cancelComplete&&(clearTimeout(this.cancelComplete),delete this.cancelComplete,t&&(this.resetCSS(),this.set(this.get()))),this},resetCSS:function(t){var e=x(this.node),n=(e(nt+"Property").replace(/\s+/g,"")||"all").split(","),i=(e(nt+"Duration").replace(/\s+/g,"")||"0s").split(","),a=(e(nt+"TimingFunction").replace(/\s+/g,"")||"ease").match(/cubic-bezier\([\d-.,]+\)|([a-z-]+)/g);dt("all",n,i,a),dt(this.hproperty,n,i,a),t&&(n.push(this.hproperty),i.push(this.duration+"ms"),a.push("cubic-bezier("+this.equation+")"));var o=this.node.style;o[nt+"Property"]=n,o[nt+"Duration"]=i,o[nt+"TimingFunction"]=a},parseEquation:function(t){if("string"==typeof t)return pt.parent.parseEquation.call(this,t,!0)}}),ft=nt?pt:ct;b.implement({animate:function(t,e,n){var i=t,a=e;"string"==typeof t&&((i={})[t]=e,a=n),null==a&&(a={});var o=typeof a,r=(a="function"==o?{callback:a}:"string"==o||"number"==o?{duration:a}:a).callback||function(){},s=0,l=0;for(var c in a.callback=function(t){++s===l&&r(t)},i){var u=i[c];c=d(c);this.forEach(function(t){l++;var e=b(t),n=e._animations||(e._animations={});(n[c]||(n[c]=new ft(t,c))).setOptions(a).start(u)})}return this},style:function(t,e){var n=t;for(var i in"string"==typeof t&&((n={})[t]=e),n){var a=n[i],o=L(i=d(i));this.forEach(function(t){var e,n=b(t)._animations;n&&(e=n[i])&&e.stop(!0),o.call(t,a)})}return this},compute:function(t){t=d(t);var i=this[0];if("transform"===t&&X)return x(i)(it);var e=P(t).call(i);return null!=e?e.replace(T,function(t,e,n){return"px"===n?t:c(i,n)*e+"px"}):""}}),ht.parse=function(t,e,n){return(H[d(t)]||R)(e,n)},gt.exports=ht}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./color":40,"./frame":41,"./fx":42,"./unmatrix2d":43,elements:44,prime:51,"prime/array/forEach":47,"prime/array/indexOf":48,"prime/array/map":49,"prime/string/camelize":58,"prime/string/capitalize":59,"prime/string/clean":60,"prime/string/hyphenate":61}],40:[function(t,e,n){"use strict";function c(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var i={maroon:"#800000",red:"#ff0000",orange:"#ffA500",yellow:"#ffff00",olive:"#808000",purple:"#800080",fuchsia:"#ff00ff",white:"#ffffff",lime:"#00ff00",green:"#008000",navy:"#000080",blue:"#0000ff",aqua:"#00ffff",teal:"#008080",black:"#000000",silver:"#c0c0c0",gray:"#808080",transparent:"#0000"},a=[];for(var o in i)a.push(o);var r="(?:#([a-f0-9]{3,8}))",s="\\s*([.\\d%]+)\\s*",l="\\("+[s,s,s]+"(?:,\\s*([.\\d]+)\\s*)?\\)",u="(?:rgb)a?",d="(?:hsl)a?",h="("+a.join("|")+")",p=RegExp(r,"i"),f=RegExp(u+l,"i"),m=RegExp(d+l,"i"),g=function(t,e){if(null==t)return null;t=(t+"").replace(/\s+/,"");var n=i[t];if(n)return g(n,e);if(n=t.match(p))t=function(t){if(3===t.length&&(t+="f"),4===t.length){var e=t.charAt(0),n=t.charAt(1),i=t.charAt(2),a=t.charAt(3);t=e+e+n+n+i+i+a+a}6===t.length&&(t+="ff");for(var o=[],r=0,s=t.length;r<s;r+=2)o.push(parseInt(t.substr(r,2),16)/(6===r?255:1));return o}(n[1]);else if(n=t.match(f))t=n.slice(1);else{if(!(n=t.match(m)))return null;t=function(t,e,n,i){var a,o,r;if(null!=i&&""!==i||(i=1),t=parseFloat(t)/360,e=parseFloat(e)/100,n=parseFloat(n)/100,i=+parseFloat(i),1<t||t<0||1<e||e<0||1<n||n<0||1<i||i<0)return null;if(0===e)a=o=r=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;a=c(l,s,t+1/3),r=c(l,s,t),o=c(l,s,t-1/3)}return[255*a,255*r,255*o,i]}.apply(null,n.slice(1))}return(t=t&&function(t,e,n,i){return null!=i&&""!==i||(i=1),t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),i=parseFloat(i),t<=255&&0<=t&&e<=255&&0<=e&&n<=255&&0<=n&&i<=1&&0<=i?[Math.round(t),Math.round(e),Math.round(n),i]:null}.apply(null,t))?e?t:(1===t[3]&&t.splice(3,1),"rgb"+(4===t.length?"a":"")+"("+t+")"):null};g.x=RegExp([h,r,u+l,d+l].join("|"),"gi"),e.exports=g},{}],41:[function(r,t,s){(function(t){"use strict";function e(t){for(var e=o.splice(0,o.length),n=0,i=e.length;n<i;n++)e[n](t=t||+new Date)}function n(t){var e=i(o,t);-1<e&&o.splice(e,1)}var i=r("prime/array/indexOf"),a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(function(){t()},1e3/60)},o=[];s.request=function(t){return 1===o.push(t)&&a(e),function(){n(t)}},s.cancel=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"prime/array/indexOf":48}],42:[function(t,e,n){"use strict";var i=t("prime"),d=t("./frame").request,a=t("cubic-bezier"),o=t("prime/array/map"),r="cubic-bezier\\(([-.\\d]+),([-.\\d]+),([-.\\d]+),([-.\\d]+)\\)",s=RegExp("([\\d.]+)(s|ms)?"),l=RegExp(r),c=(RegExp(r,"g"),{default:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",linear:"cubic-bezier(0, 0, 1, 1)","ease-in":"cubic-bezier(0.42, 0, 1.0, 1.0)","ease-out":"cubic-bezier(0, 0, 0.58, 1.0)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1.0)"});c.ease=c.default;function u(t){var e=[],n=(t+"").replace(/[-.\d]+/g,function(t){return e.push(+t),"@"});return[e,n]}function h(t){var a=new p(t);return{start:function(t,e,n){var i=typeof n;return a.setOptions("function"==i?{callback:n}:"string"==i||"number"==i?{duration:n}:n).start(t,e),this},stop:function(){return a.stop(),this}}}var p=i({constructor:function(t,e){this.setOptions(e),this.render=t||function(){};var n=this;this.bStep=function(t){return n.step(t)},this.bExit=function(t){n.exit(t)}},setOptions:function(t){if(null==t&&(t={}),!(this.duration=this.parseDuration(t.duration||"500ms")))throw new Error("invalid duration");if(!(this.equation=this.parseEquation(t.equation||"default")))throw new Error("invalid equation");return this.callback=t.callback||function(){},this},parseDuration:function(t){if(t=(t+"").match(s)){var e=+t[1],n=t[2]||"ms";if("s"===n)return 1e3*e;if("ms"===n)return e}},parseEquation:function(t,e){var n=typeof t;if("function"===n)return t;if("string"===n){var i=(t=c[t]||t).replace(/\s+/g,"").match(l);if(i){if(t=o(i.slice(1),function(t){return+t}),e)return t;if("0,0,1,1"===t.toString())return function(t){return t};n="object"}}return"object"===n?a(t[0],t[1],t[2],t[3],1e3/60/this.duration/4):void 0},cancel:function(t){this.to=t,this.cancelExit=d(this.bExit)},exit:function(t){this.render(this.to),delete this.cancelExit,this.callback(t)},start:function(t,e){if(this.stop(),0===this.duration)return this.cancel(e),this;this.isArray=!1,this.isNumber=!1;var n=typeof t,i=typeof e;"object"==n&&"object"==i?this.isArray=!0:"number"==n&&"number"==i&&(this.isNumber=!0);var a=u(t),o=u(e);return this.from=a[0],this.to=o[0],this.templateFrom=a[1],this.templateTo=o[1],this.from.length!==this.to.length||this.from.toString()===this.to.toString()?this.cancel(e):(delete this.time,this.length=this.from.length,this.cancelStep=d(this.bStep)),this},stop:function(){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelStep&&(this.cancelStep(),delete this.cancelStep),this},step:function(t){this.time||(this.time=t);var e=(t-this.time)/this.duration;1<e&&(e=1);for(var n,i=this.equation(e),a=this.from,o=this.to,r=this.templateTo,s=0,l=this.length;s<l;s++){var c=a[s],u=o[s];r=r.replace("@",u!==c?(u-(n=c))*i+n:u)}this.render(this.isArray?r.split(","):this.isNumber?+r:r,e),1!==e?this.cancelStep=d(this.bStep):(delete this.cancelStep,this.callback(t))}});h.prototype=p.prototype,e.exports=h},{"./frame":41,"cubic-bezier":26,prime:51,"prime/array/map":49}],43:[function(t,e,n){"use strict";function b(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}var y=Math.atan2;e.exports=function(t,e,n,i,a,o){if(t*i-e*n==0)return!1;var r,s,l=[a,o],c=[[t,e],[n,i]],u=[b(c[0])];c[0]=(r=c[0],(s=b(r))?[r[0]/s,r[1]/s]:[0,0]);var d,h,p,f,m,g,v=(d=c[0],h=c[1],d[0]*h[0]+d[1]*h[1]);return c[1]=(p=c[1],f=c[0],g=-v,[(m=1)*p[0]+g*f[0],m*p[1]+g*f[1]]),u[1]=b(c[1]),v/=u[1],[l,y(c[0][1],c[0][0]),v,u]}},{}],44:[function(l,c,t){(function(h){"use strict";function p(t){return t===h?"global":t.uniqueNumber||(t.uniqueNumber="n:"+(e++).toString(36))}var t=l("prime"),n=l("prime/array/forEach"),i=l("prime/array/map"),a=l("prime/array/filter"),o=l("prime/array/every"),r=l("prime/array/some"),e=0,f={},s=t({constructor:function t(e,n){if(null==e)return this&&this.constructor===t?new m:null;var i=e;if(e.constructor!==m){var a;if(i=new m,"string"==typeof e)return i.search?(i[i.length++]=n||document,i.search(e)):null;if(e.nodeType||e===h)i[i.length++]=e;else if(e.length)for(var o={},r=0,s=e.length;r<s;r++){var l=t(e[r],n);if(l&&l.length)for(var c=0,u=l.length;c<u;c++){var d=l[c];o[a=p(d)]||(i[i.length++]=d,o[a]=!0)}}}return i.length?1===i.length?(a=p(i[0]),f[a]||(f[a]=i)):i:null}}),m=t({inherits:s,constructor:function(){this.length=0},unlink:function(){return this.map(function(t,e){return delete f[p(t)],t})},forEach:function(t,e){return n(this,t,e)},map:function(t,e){return i(this,t,e)},filter:function(t,e){return a(this,t,e)},every:function(t,e){return o(this,t,e)},some:function(t,e){return r(this,t,e)}});c.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{prime:51,"prime/array/every":45,"prime/array/filter":46,"prime/array/forEach":47,"prime/array/map":49,"prime/array/some":50}],45:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=0,a=t.length>>>0;i<a;i++)if(!e.call(n,t[i],i,t))return!1;return!0}},{}],46:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=[],a=0,o=t.length>>>0;a<o;a++){var r=t[a];e.call(n,r,a,t)&&i.push(r)}return i}},{}],47:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=0,a=t.length>>>0;i<a&&!1!==e.call(n,t[i],i,t);i++);return t}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=t.length>>>0,a=n<0?Math.max(0,i+n):n||0;a<i;a++)if(t[a]===e)return a;return-1}},{}],49:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=t.length>>>0,a=Array(i),o=0,r=i;o<r;o++)a[o]=e.call(n,t[o],o,t);return a}},{}],50:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var i=0,a=t.length>>>0;i<a;i++)if(e.call(n,t[i],i,t))return!0;return!1}},{}],51:[function(t,e,n){"use strict";var s=t("./object/hasOwn"),i=t("./object/forIn"),l=t("./object/mixIn"),c=t("./object/filter"),u=t("./object/create"),d=t("./type"),a=Object.defineProperty,o=Object.getOwnPropertyDescriptor;try{a({},"~",{}),o({},"~")}catch(t){o=a=null}function r(t,e,n){a(this,e,o(n,e)||{writable:!0,enumerable:!0,configurable:!0,value:t})}function h(t,e){this[e]=t}function p(t){return i(t,a?r:h,this.prototype),this}var f=/^constructor|inherits|mixin$/;e.exports=function(t){"function"===d(t)&&(t={constructor:t});var e=t.inherits,n=s(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){l(n,e);var i=e.prototype,a=n.prototype=u(i);n.parent=i,a.constructor=n}n.implement||(n.implement=p);var o=t.mixin;if(o){"array"!==d(o)&&(o=[o]);for(var r=0;r<o.length;r++)n.implement(u(o[r].prototype))}return n.implement(c(t,function(t,e){return!e.match(f)}))}},{"./object/create":52,"./object/filter":53,"./object/forIn":54,"./object/hasOwn":56,"./object/mixIn":57,"./type":63}],52:[function(t,e,n){"use strict";e.exports=function(t){function e(){}return e.prototype=t,new e}},{}],53:[function(t,e,n){"use strict";var r=t("./forIn");e.exports=function(n,i,a){var o={};return r(n,function(t,e){i.call(a,t,e,n)&&(o[e]=t)}),o}},{"./forIn":54}],54:[function(t,e,n){"use strict";var r=t("./hasOwn"),i=function(t,e,n){for(var i in t)if(!1===e.call(n,t[i],i,t))break;return t};if(!{valueOf:0}.propertyIsEnumerable("valueOf")){var s="constructor,toString,valueOf,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString".split(","),l=Object.prototype;i=function(t,e,n){for(var i in t)if(!1===e.call(n,t[i],i,t))return t;for(var a=0;i=s[a];a++){var o=t[i];if((o!==l[i]||r(t,i))&&!1===e.call(n,o,i,t))break}return t}}e.exports=i},{"./hasOwn":56}],55:[function(t,e,n){"use strict";var o=t("./forIn"),r=t("./hasOwn");e.exports=function(n,i,a){return o(n,function(t,e){if(r(n,e))return i.call(a,t,e,n)}),n}},{"./forIn":54,"./hasOwn":56}],56:[function(t,e,n){"use strict";var i=Object.hasOwnProperty;e.exports=function(t,e){return i.call(t,e)}},{}],57:[function(t,e,n){"use strict";function i(t,e){this[e]=t}var a=t("./forOwn");e.exports=function(t){for(var e=1,n=arguments.length;e<n;e++)a(arguments[e],i,t);return t}},{"./forOwn":55}],58:[function(t,e,n){"use strict";e.exports=function(t){return(t+"").replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})}},{}],59:[function(t,e,n){"use strict";e.exports=function(t){return(t+"").replace(/\b[a-z]/g,function(t){return t.toUpperCase()})}},{}],60:[function(t,e,n){"use strict";var i=t("./trim");e.exports=function(t){return i((t+"").replace(/\s+/g," "))}},{"./trim":62}],61:[function(t,e,n){"use strict";e.exports=function(t){return(t+"").replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}},{}],62:[function(t,e,n){"use strict";e.exports=function(t){return(t+"").replace(/^\s+|\s+$/g,"")}},{}],63:[function(t,e,n){"use strict";var i=Object.prototype.toString,a=/number|object|array|string|function|date|regexp|boolean/;e.exports=function(t){if(null==t)return"null";var e=i.call(t).slice(8,-1).toLowerCase();return"number"===e&&isNaN(t)?"null":a.test(e)?e:"object"}},{}],64:[function(t,e,n){e.exports=function(t,e){if(null==e)return t;for(var n=t.length,i=-1,a=e.length;++i<a;)t[n+i]=e[i];return t}},{}],65:[function(t,e,n){var a=t("./indexOf");e.exports=function(t,e){if(null==e)return t;for(var n=-1,i=e.length;++n<i;)-1===a(t,e[n])&&t.push(e[n]);return t}},{"./indexOf":75}],66:[function(t,e,n){var i=t("./indexOf");e.exports=function(t,e){return-1!==i(t,e)}},{"./indexOf":75}],67:[function(t,e,n){var i=t("./unique"),a=t("./filter"),o=t("./some"),r=t("./contains"),s=t("./slice");e.exports=function(t){var n=s(arguments,1);return a(i(t),function(e){return!o(n,function(t){return r(t,e)})})}},{"./contains":66,"./filter":70,"./slice":83,"./some":84,"./unique":86}],68:[function(t,e,n){var a=t("../lang/is"),o=t("../lang/isArray"),r=t("./every");e.exports=function(t,e,n){return n=n||a,o(t)&&o(e)?t.length===e.length&&r(t,(i=n,function(t,e){return e in this&&i(t,this[e])}),e):n(t,e);var i}},{"../lang/is":103,"../lang/isArray":104,"./every":69}],69:[function(t,e,n){var r=t("../function/makeIterator_");e.exports=function(t,e,n){e=r(e,n);var i=!0;if(null==t)return i;for(var a=-1,o=t.length;++a<o;)if(!e(t[a],a,t)){i=!1;break}return i}},{"../function/makeIterator_":95}],70:[function(t,e,n){var s=t("../function/makeIterator_");e.exports=function(t,e,n){e=s(e,n);var i=[];if(null==t)return i;for(var a,o=-1,r=t.length;++o<r;)e(a=t[o],o,t)&&i.push(a);return i}},{"../function/makeIterator_":95}],71:[function(t,e,n){var a=t("./findIndex");e.exports=function(t,e,n){var i=a(t,e,n);return 0<=i?t[i]:void 0}},{"./findIndex":72}],72:[function(t,e,n){var o=t("../function/makeIterator_");e.exports=function(t,e,n){if(e=o(e,n),null==t)return-1;for(var i=-1,a=t.length;++i<a;)if(e(t[i],i,t))return i;return-1}},{"../function/makeIterator_":95}],73:[function(t,e,n){var s=t("../lang/isArray"),l=t("./append");e.exports=function(t,e){return null==t?[]:function t(e,n,i){if(0===i)return l(n,e),n;for(var a,o=-1,r=e.length;++o<r;)a=e[o],s(a)?t(a,n,i-1):n.push(a);return n}(t,[],e=null==e?-1:e)}},{"../lang/isArray":104,"./append":64}],74:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],75:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],76:[function(t,e,n){var i=t("./difference"),a=t("./slice");e.exports=function(t,e){var n=i(a(arguments,1),t);return n.length&&Array.prototype.push.apply(t,n),t.length}},{"./difference":67,"./slice":83}],77:[function(t,e,n){var i=t("./unique"),a=t("./filter"),o=t("./every"),r=t("./contains"),s=t("./slice");e.exports=function(t){var n=s(arguments,1);return a(i(t),function(e){return o(n,function(t){return r(t,e)})})}},{"./contains":66,"./every":69,"./filter":70,"./slice":83,"./unique":86}],78:[function(t,e,n){var s=t("./slice");e.exports=function(t,e,n){if(null==t)return t;for(var i,a=s(arguments,2),o=-1,r=t.length;++o<r;)(i=t[o])[e].apply(i,a);return t}},{"./slice":83}],79:[function(t,e,n){e.exports=function(t){if(!(null==t||t.length<1))return t[t.length-1]}},{}],80:[function(t,e,n){var r=t("../function/makeIterator_");e.exports=function(t,e,n){e=r(e,n);var i=[];if(null==t)return i;for(var a=-1,o=t.length;++a<o;)i[a]=e(t[a],a,t);return i}},{"../function/makeIterator_":95}],81:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./indexOf":75,dup:4}],82:[function(t,e,n){var i=t("./indexOf");e.exports=function(t,e){for(var n=i(t,e);-1!==n;)t.splice(n,1),n=i(t,e,n)}},{"./indexOf":75}],83:[function(t,e,n){e.exports=function(t,e,n){var i=t.length;e=null==e?0:e<0?Math.max(i+e,0):Math.min(e,i),n=null==n?i:n<0?Math.max(i+n,0):Math.min(n,i);for(var a=[];e<n;)a.push(t[e++]);return a}},{}],84:[function(t,e,n){var r=t("../function/makeIterator_");e.exports=function(t,e,n){e=r(e,n);var i=!1;if(null==t)return i;for(var a=-1,o=t.length;++a<o;)if(e(t[a],a,t)){i=!0;break}return i}},{"../function/makeIterator_":95}],85:[function(t,e,n){e.exports=function(t,e){e=e||2;var n=[];if(null==t)return n;for(var i,a=Math.floor(t.length/e),o=t.length%e,r=0,s=t.length,l=0;r<s;)i=a,l<o&&i++,n.push(t.slice(r,r+i)),l++,r+=i;return n}},{}],86:[function(t,e,n){var i=t("./filter");function o(t,e){return t===e}e.exports=function(t,a){return a=a||o,i(t,function(t,e,n){for(var i=n.length;++e<i;)if(a(t,n[e]))return!1;return!0})}},{"./filter":70}],87:[function(t,e,n){var i=t("./make_"),a=t("../array/contains"),o=t("../object/contains");e.exports=i(a,o)},{"../array/contains":66,"../object/contains":125,"./make_":90}],88:[function(t,e,n){var i=t("./make_"),a=t("../array/find"),o=t("../object/find");e.exports=i(a,o)},{"../array/find":71,"../object/find":131,"./make_":90}],89:[function(t,e,n){var i=t("./make_"),a=t("../array/forEach"),o=t("../object/forOwn");e.exports=i(a,o)},{"../array/forEach":74,"../object/forOwn":133,"./make_":90}],90:[function(t,e,n){var a=t("../array/slice");e.exports=function(e,n,i){return function(){var t=a(arguments);return null==t[0]?i:"number"==typeof t[0].length?e.apply(null,t):n.apply(null,t)}}},{"../array/slice":83}],91:[function(t,e,n){var i=t("../lang/isArray"),a=t("../object/size");e.exports=function(t){return t?i(t)?t.length:a(t):0}},{"../lang/isArray":104,"../object/size":143}],92:[function(t,e,n){var a=t("../array/slice");e.exports=function(t,e,n){var i=a(arguments,2);return function(){return t.apply(e,i.concat(a(arguments)))}}},{"../array/slice":83}],93:[function(t,e,n){e.exports=function(n,i,a){var o,r;function t(){var t=arguments,e=this;return o?clearTimeout(o):a&&(r=n.apply(e,t)),o=setTimeout(function(){a||(r=n.apply(e,t)),o=null},i),r}return t.cancel=function(){clearTimeout(o)},t}},{}],94:[function(t,e,n){e.exports=function(t){return t}},{}],95:[function(t,e,n){var o=t("./identity"),r=t("./prop"),s=t("../object/deepMatches");e.exports=function(i,a){if(null==i)return o;switch(typeof i){case"function":return void 0!==a?function(t,e,n){return i.call(a,t,e,n)}:i;case"object":return function(t){return s(t,i)};case"string":case"number":return r(i)}}},{"../object/deepMatches":127,"./identity":94,"./prop":96}],96:[function(t,e,n){e.exports=function(e){return function(t){return t[e]}}},{}],97:[function(t,e,n){e.exports=function(){var n=arguments;return function(){for(var t=0,e=n.length;t<e;)n[t].apply(this,arguments),t+=1}}},{}],98:[function(t,e,n){e.exports=Function("return this")()},{}],99:[function(t,e,n){var a=t("./kindOf"),o=t("./isPlainObject"),r=t("../object/mixIn");e.exports=function(t){switch(a(t)){case"Object":return o(i=t)?r({},i):i;case"Array":return t.slice();case"RegExp":return n="",n+=(e=t).multiline?"m":"",n+=e.global?"g":"",n+=e.ignoreCase?"i":"",new RegExp(e.source,n);case"Date":return new Date(+t);default:return t}var e,n,i}},{"../object/mixIn":139,"./isPlainObject":110,"./kindOf":113}],100:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{"../object/mixIn":139,dup:5}],101:[function(t,e,n){var i=t("./clone"),a=t("../object/forOwn"),o=t("./kindOf"),r=t("./isPlainObject");function s(t,e){switch(o(t)){case"Object":return function(t,n){{if(r(t)){var e={};return a(t,function(t,e){this[e]=s(t,n)},e),e}return n?n(t):t}}(t,e);case"Array":return function(t,e){var n=[],i=-1,a=t.length;for(;++i<a;)n[i]=s(t[i],e);return n}(t,e);default:return i(t)}}e.exports=s},{"../object/forOwn":133,"./clone":99,"./isPlainObject":110,"./kindOf":113}],102:[function(t,e,n){var r=t("./is"),s=t("./isObject"),l=t("./isArray"),c=t("../object/equals"),u=t("../array/equals");e.exports=function n(t,e,i){i=i||r;var a=s(t)&&s(e),o=!a&&l(t)&&l(e);if(!a&&!o)return i(t,e);return(a?c:u)(t,e,function(t,e){return n(t,e,i)})}},{"../array/equals":68,"../object/equals":128,"./is":103,"./isArray":104,"./isObject":109}],103:[function(t,e,n){e.exports=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},{}],104:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./isKind":107,dup:6}],105:[function(t,e,n){var i=t("./isKind");e.exports=function(t){return i(t,"Boolean")}},{"./isKind":107}],106:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{"./isKind":107,dup:7}],107:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./kindOf":113,dup:8}],108:[function(t,e,n){var i=t("./isKind");e.exports=function(t){return i(t,"Number")}},{"./isKind":107}],109:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"./isKind":107,dup:9}],110:[function(t,e,n){e.exports=function(t){return!!t&&"object"==typeof t&&t.constructor===Object}},{}],111:[function(t,e,n){e.exports=function(t){switch(typeof t){case"string":case"number":case"boolean":return!0}return null==t}},{}],112:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./isKind":107,dup:10}],113:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],114:[function(t,e,n){var a=t("./kindOf"),o=t("./GLOBAL");e.exports=function(t){var e,n=[],i=a(t);if(null!=t)if(null==t.length||"String"===i||"Function"===i||"RegExp"===i||t===o)n[n.length]=t;else for(e=t.length;e--;)n[e]=t[e];return n}},{"./GLOBAL":98,"./kindOf":113}],115:[function(t,e,n){var i=t("./isArray");e.exports=function(t){return"number"==typeof t?t:t?"string"==typeof t?parseFloat(t):i(t)?NaN:Number(t):0}},{"./isArray":104}],116:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],117:[function(t,e,n){e.exports=function(t,e,n){return t<e?e:n<t?n:t}},{}],118:[function(t,e,n){e.exports=function(t,e,n){return e+(n-e)*t}},{}],119:[function(t,e,n){var o=t("./lerp"),r=t("./norm");e.exports=function(t,e,n,i,a){return o(r(t,e,n),i,a)}},{"./lerp":118,"./norm":120}],120:[function(t,e,n){e.exports=function(t,e,n){if(t<e||n<t)throw new RangeError("value ("+t+") must be between "+e+" and "+n);return t===n?1:(t-e)/(n-e)}},{}],121:[function(t,e,n){e.exports=2147483647},{}],122:[function(t,e,n){e.exports=-2147483648},{}],123:[function(t,e,n){var i=t("../lang/toNumber");e.exports=function(t,e){t=i(t);var n=Math.pow(10,e);return+(Math.round(t*n)/n).toFixed(e)}},{"../lang/toNumber":115}],124:[function(t,e,n){e.exports=function(t){return~~t}},{}],125:[function(t,e,n){var i=t("./some");e.exports=function(t,e){return i(t,function(t){return t===e})}},{"./some":144}],126:[function(t,e,n){var r=t("./forOwn"),s=t("../lang/isPlainObject");e.exports=function i(a,t){for(var e,n=0,o=arguments.length;++n<o;)(e=arguments[n])&&r(e,function(t,e){var n=a[e];null==n?a[e]=t:s(n)&&s(t)&&i(n,t)});return a}},{"../lang/isPlainObject":110,"./forOwn":133}],127:[function(t,e,n){var a=t("./forOwn"),o=t("../lang/isArray");function r(t,e){for(var n=-1,i=t.length;++n<i;)if(s(t[n],e))return 1}function s(t,e){return t&&"object"==typeof t?o(t)&&o(e)?function(t,e){for(var n=-1,i=e.length;++n<i;)if(!r(t,e[n]))return!1;return!0}(t,e):(n=t,i=!0,a(e,function(t,e){if(!s(n[e],t))return i=!1}),i):t===e;var n,i}e.exports=s},{"../lang/isArray":104,"./forOwn":133}],128:[function(t,e,n){var a=t("./hasOwn"),o=t("./every"),r=t("../lang/isObject"),s=t("../lang/is");function l(t,e){return a(this,e)}e.exports=function(t,e,n){return n=n||s,r(t)&&r(e)?o(t,(i=n,function(t,e){return a(this,e)&&i(t,this[e])}),e)&&o(e,l,t):n(t,e);var i}},{"../lang/is":103,"../lang/isObject":109,"./every":129,"./hasOwn":136}],129:[function(t,e,n){var o=t("./forOwn"),r=t("../function/makeIterator_");e.exports=function(n,i,t){i=r(i,t);var a=!0;return o(n,function(t,e){if(!i(t,e,n))return a=!1}),a}},{"../function/makeIterator_":95,"./forOwn":133}],130:[function(t,e,n){var o=t("./forOwn"),r=t("../function/makeIterator_");e.exports=function(t,i,e){i=r(i,e);var a={};return o(t,function(t,e,n){i(t,e,n)&&(a[e]=t)}),a}},{"../function/makeIterator_":95,"./forOwn":133}],131:[function(t,e,n){var o=t("./some"),r=t("../function/makeIterator_");e.exports=function(t,i,e){var a;return i=r(i,e),o(t,function(t,e,n){if(i(t,e,n))return a=t,!0}),a}},{"../function/makeIterator_":95,"./some":144}],132:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./hasOwn":136,dup:13}],133:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"./forIn":132,"./hasOwn":136,dup:14}],134:[function(t,e,n){t("../lang/isPrimitive");e.exports=function(t,e){for(var n=e.split("."),i=n.pop();e=n.shift();)if(null==(t=t[e]))return;return t[i]}},{"../lang/isPrimitive":111}],135:[function(t,e,n){var i=t("./get");e.exports=function(t,e){return void 0!==i(t,e)}},{"./get":134}],136:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],137:[function(t,e,n){var i=t("./forOwn"),a=Object.keys||function(t){var n=[];return i(t,function(t,e){n.push(e)}),n};e.exports=a},{"./forOwn":133}],138:[function(t,e,n){var r=t("./hasOwn"),s=t("../lang/deepClone"),l=t("../lang/isObject");e.exports=function t(){var e,n,i,a,o=1;for(a=s(arguments[0]);i=arguments[o++];)for(e in i)r(i,e)&&(n=i[e],l(n)&&l(a[e])?a[e]=t(a[e],n):a[e]=s(n));return a}},{"../lang/deepClone":101,"../lang/isObject":109,"./hasOwn":136}],139:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./forOwn":133,dup:16}],140:[function(t,e,n){var i=t("../array/forEach");e.exports=function(e,t){return t&&i(t.split("."),function(t){e[t]||(e[t]={}),e=e[t]}),e}},{"../array/forEach":74}],141:[function(t,e,n){var o=t("../array/slice"),r=t("../array/contains");e.exports=function(t,e){var n="string"!=typeof e?e:o(arguments,1),i={};for(var a in t)t.hasOwnProperty(a)&&!r(n,a)&&(i[a]=t[a]);return i}},{"../array/contains":66,"../array/slice":83}],142:[function(t,e,n){var a=t("./namespace");e.exports=function(t,e,n){var i=/^(.+)\.(.+)$/.exec(e);i?a(t,i[1])[i[2]]=n:t[e]=n}},{"./namespace":140}],143:[function(t,e,n){var i=t("./forOwn");e.exports=function(t){var e=0;return i(t,function(){e++}),e}},{"./forOwn":133}],144:[function(t,e,n){var o=t("./forOwn"),r=t("../function/makeIterator_");e.exports=function(n,i,t){i=r(i,t);var a=!1;return o(n,function(t,e){if(i(t,e,n))return!(a=!0)}),a}},{"../function/makeIterator_":95,"./forOwn":133}],145:[function(t,e,n){var a=t("./has");e.exports=function(t,e){if(a(t,e)){for(var n=e.split("."),i=n.pop();e=n.shift();)t=t[e];return delete t[i]}return!0}},{"./has":135}],146:[function(t,e,n){var i=t("./forOwn");e.exports=function(t){var n=[];return i(t,function(t,e){n.push(t)}),n}},{"./forOwn":133}],147:[function(t,e,n){var o=t("../object/forOwn"),r=t("../lang/isArray"),s=t("../array/forEach");e.exports=function(t){var n,i,a=[];return o(t,function(t,e){r(t)?(n=e+"=",i=new RegExp("&"+e+"+=$"),s(t,function(t){n+=encodeURIComponent(t)+"&"+e+"="}),a.push(n.replace(i,""))):a.push(e+"="+encodeURIComponent(t))}),a.length?"?"+a.join("&"):""}},{"../array/forEach":74,"../lang/isArray":104,"../object/forOwn":133}],148:[function(t,e,n){var o=t("../string/typecast"),r=t("./getQuery");e.exports=function(t,e,n){var i=new RegExp("(\\?|&)"+e+"=([^&]*)").exec(r(t)),a=i&&i[2]?i[2]:null;return!1===n?a:o(a)}},{"../string/typecast":174,"./getQuery":149}],149:[function(t,e,n){e.exports=function(t){t=t.replace(/#.*/,"");var e=/\?[a-zA-Z0-9\=\&\%\$\-\_\.\+\!\*\'\(\)\,]+/.exec(t);return e?decodeURIComponent(e[0].replace(/\+/g," ")):""}},{}],150:[function(t,e,n){e.exports=function(t,e,n){t=t||"";var i=new RegExp("(\\?|&)"+e+"=[^&]*"),a=e+"="+encodeURIComponent(n);return i.test(t)?t.replace(i,"$1"+a):(-1===t.indexOf("?")&&(t+="?"),-1!==t.indexOf("=")&&(t+="&"),t+a)}},{}],151:[function(t,e,n){var i=t("./randInt"),a=t("../lang/isArray");e.exports=function(t){var e=1===arguments.length&&a(t)?t:arguments;return e[i(0,e.length-1)]}},{"../lang/isArray":104,"./randInt":155}],152:[function(t,e,n){var i=t("./randHex"),a=t("./choice");e.exports=function(){return i(8)+"-"+i(4)+"-4"+i(3)+"-"+a(8,9,"a","b")+i(3)+"-"+i(12)}},{"./choice":151,"./randHex":154}],153:[function(t,e,n){var i=t("./random"),a=t("../number/MIN_INT"),o=t("../number/MAX_INT");e.exports=function(t,e){return(t=null==t?a:t)+((e=null==e?o:e)-t)*i()}},{"../number/MAX_INT":121,"../number/MIN_INT":122,"./random":156}],154:[function(t,e,n){var i=t("./choice"),a="0123456789abcdef".split("");e.exports=function(t){t=t&&0<t?t:6;for(var e="";t--;)e+=i(a);return e}},{"./choice":151}],155:[function(t,e,n){var i=t("../number/MIN_INT"),a=t("../number/MAX_INT"),o=t("./rand");e.exports=function(t,e){return t=null==t?i:~~t,e=null==e?a:~~e,Math.round(o(t-.5,e+.499999999999))}},{"../number/MAX_INT":121,"../number/MIN_INT":122,"./rand":153}],156:[function(t,e,n){function i(){return i.get()}i.get=Math.random,e.exports=i},{}],157:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],158:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t,e,n){return t=i(t),e=i(e),-1!==t.indexOf(e,n)}},{"../lang/toString":116}],159:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t,e){return t=i(t),e=i(e),-1!==t.indexOf(e,t.length-e.length)}},{"../lang/toString":116}],160:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return t=i(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},{"../lang/toString":116}],161:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t,e){return(t=i(t)).replace(/[\s\S]/g,function(t){return!e&&/[\x20-\x7E]/.test(t)?t:"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}},{"../lang/toString":116}],162:[function(t,e,n){var i=t("../lang/toString"),a=t("../object/get"),o=/\{\{([^\}]+)\}\}/g;e.exports=function(t,n,e){return(t=i(t)).replace(e||o,function(t,e){return i(a(n,e))})}},{"../lang/toString":116,"../object/get":134}],163:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return(t=i(t)).toLowerCase()}},{"../lang/toString":116}],164:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{"../lang/toString":116,"./WHITE_SPACES":157,dup:18}],165:[function(t,e,n){var i=t("../lang/toString"),a=t("./lowerCase"),o=t("./upperCase");e.exports=function(t){return t=i(t),a(t).replace(/^\w|\s\w/g,o)}},{"../lang/toString":116,"./lowerCase":163,"./upperCase":177}],166:[function(t,e,n){var i=t("../lang/toString"),a=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;e.exports=function(t){return(t=i(t)).replace(a,"")}},{"../lang/toString":116}],167:[function(t,e,n){var i=t("../lang/toString"),a=t("../number/toInt");e.exports=function(t,e){var n="";if(t=i(t),(e=a(e))<1)return"";for(;0<e;)e%2&&(n+=t),e=Math.floor(e/2),t+=t;return n}},{"../lang/toString":116,"../number/toInt":124}],168:[function(t,e,n){var r=t("../lang/toString"),s=t("../lang/toArray");e.exports=function(t,e,n){t=r(t),e=s(e),n=s(n);var i=e.length,a=n.length;if(1!==a&&i!==a)throw new Error("Unequal number of searches and replacements");for(var o=-1;++o<i;)t=t.replace(e[o],n[1===a?0:o]);return t}},{"../lang/toArray":114,"../lang/toString":116}],169:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return-1<(t=i(t)).search(/[\xC0-\xFF]/g)&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}},{"../lang/toString":116}],170:[function(t,e,n){var i=t("../lang/toString"),a=t("./repeat");e.exports=function(t,e,n){return n=n||" ",(t=i(t)).length<e?t+a(n,e-t.length):t}},{"../lang/toString":116,"./repeat":167}],171:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{"../lang/toString":116,"./WHITE_SPACES":157,dup:19}],172:[function(t,e,n){var i=t("../lang/toString"),a=t("./replaceAccents"),o=t("./removeNonWord"),r=t("./trim");e.exports=function(t,e){return t=i(t),null==e&&(e="-"),t=a(t),t=o(t),t=r(t).replace(/ +/g,e).toLowerCase()}},{"../lang/toString":116,"./removeNonWord":166,"./replaceAccents":169,"./trim":173}],173:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"../lang/toString":116,"./WHITE_SPACES":157,"./ltrim":164,"./rtrim":171,dup:20}],174:[function(t,e,n){e.exports=function(t){return null===t||"null"===t?null:"true"===t||"false"!==t&&(void 0===t||"undefined"===t?void 0:""===t||isNaN(t)?t:parseFloat(t))}},{}],175:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return t=i(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#0*39;/g,"'").replace(/&quot;/g,'"')}},{"../lang/toString":116}],176:[function(t,e,n){var i=t("../lang/toString");e.exports=function(t){return(t=i(t)).replace(/(\w)(-)(\w)/g,"$1 $3")}},{"../lang/toString":116}],177:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{"../lang/toString":116,dup:21}],178:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],179:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{dup:83}],180:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{"../array/slice":179,dup:92}],181:[function(t,e,n){var a=t("./kindOf"),o=t("./isPlainObject"),r=t("../object/mixIn");e.exports=function(t){switch(a(t)){case"Object":return o(i=t)?r({},i):i;case"Array":return t.slice();case"RegExp":return n="",n+=(e=t).multiline?"m":"",n+=e.global?"g":"",n+=e.ignorecase?"i":"",new RegExp(e.source,n);case"Date":return new Date(+t);default:return t}var e,n,i}},{"../object/mixIn":191,"./isPlainObject":185,"./kindOf":186}],182:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{"../object/forOwn":188,"./clone":181,"./isPlainObject":185,"./kindOf":186,dup:101}],183:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./kindOf":186,dup:8}],184:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"./isKind":183,dup:9}],185:[function(t,e,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],186:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],187:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./hasOwn":189,dup:13}],188:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"./forIn":187,"./hasOwn":189,dup:14}],189:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],190:[function(t,e,n){arguments[4][138][0].apply(n,arguments)},{"../lang/deepClone":182,"../lang/isObject":184,"./hasOwn":189,dup:138}],191:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./forOwn":188,dup:16}],192:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25,"mout/lang/createObject":193,"mout/lang/kindOf":194,"mout/object/hasOwn":197,"mout/object/mixIn":198}],193:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{"../object/mixIn":198,dup:5}],194:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],195:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./hasOwn":197,dup:13}],196:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"./forIn":195,"./hasOwn":197,dup:14}],197:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],198:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./forOwn":196,dup:16}],199:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/function/bind"),o=i({bound:function(t){var e=this._bound||(this._bound={});return e[t]||(e[t]=a(this[t],this))}});e.exports=o},{"mout/function/bind":180,prime:192}],200:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/object/merge"),o=i({setOptions:function(t){var e=[{},this.options];return e.push.apply(e,arguments),this.options=a.apply(null,e),this}});e.exports=o},{"mout/object/merge":190,prime:192}],201:[function(t,f,e){(function(n,e,i){"use strict";function a(e,t,n,i){e.length||i(function(){u(e)});var a={callback:t,context:n};return e.push(a),function(){var t=l(e,a);-1<t&&e.splice(t,1)}}var o=t("mout/lang/kindOf"),r=t("mout/time/now"),s=t("mout/array/forEach"),l=t("mout/array/indexOf"),c={timeout:{},frame:[],immediate:[]},u=function(t){var e=r();s(t.splice(0),function(t){t.callback.call(t.context,e)})},d=function(t,e,n){return"Number"===o(e)?d.timeout(t,e,n):d.immediate(t,e)};e.process&&n.nextTick?d.immediate=function(t,e){return a(c.immediate,t,e,n.nextTick)}:e.setImmediate?d.immediate=function(t,e){return a(c.immediate,t,e,i)}:e.postMessage&&e.addEventListener?(addEventListener("message",function(t){t.source===e&&"@deferred"===t.data&&(t.stopPropagation(),u(c.immediate))},!0),d.immediate=function(t,e){return a(c.immediate,t,e,function(){postMessage("@deferred","*")})}):d.immediate=function(t,e){return a(c.immediate,t,e,function(t){setTimeout(t,0)})};var h,p=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};d.frame=function(t,e){return a(c.frame,t,e,p)},d.timeout=function(t,e,n){var i=c.timeout;return h=h||d.immediate(function(){h=null,c.timeout={}}),a(i[e]||(i[e]=[]),t,n,function(t){setTimeout(t,e)})},f.exports=d}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:205,"mout/array/forEach":74,"mout/array/indexOf":75,"mout/lang/kindOf":113,"mout/time/now":178,timers:211}],202:[function(t,e,n){"use strict";var r=t("mout/array/indexOf"),o=t("mout/array/forEach"),i=t("./index"),s=t("./defer"),l=Array.prototype.slice,c=i({constructor:function(t){this._stoppable=t},on:function(t,e){var n=this._listeners||(this._listeners={}),i=n[t]||(n[t]=[]);return-1===r(i,e)&&i.push(e),this},off:function(t,e){var n,i=this._listeners;if(i&&(n=i[t])){var a=r(n,e);for(var o in-1<a&&n.splice(a,1),n.length||delete i[t],i)return this;delete this._listeners}return this},emit:function(n){function t(){var t,e=i._listeners;e&&(t=e[n])&&o(t.slice(0),function(t){var e=t.apply(i,a);if(i._stoppable)return e})}var i=this,a=l.call(arguments,1);return a[a.length-1]===c.EMIT_SYNC?(a.pop(),t()):s(t),this}});c.EMIT_SYNC={},e.exports=c},{"./defer":201,"./index":203,"mout/array/forEach":74,"mout/array/indexOf":75}],203:[function(t,e,n){"use strict";var s=t("mout/object/hasOwn"),l=t("mout/object/mixIn"),c=t("mout/lang/createObject"),u=t("mout/lang/kindOf"),r=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(t){r=!1}function d(t){var e=this.prototype;for(var n in t)if(!n.match(f)){if(r){var i=Object.getOwnPropertyDescriptor(t,n);if(i){Object.defineProperty(e,n,i);continue}}e[n]=t[n]}if(h)for(var a=0;n=p[a];a++){var o=t[n];o!==Object.prototype[n]&&(e[n]=o)}return this}var h=!{valueOf:0}.propertyIsEnumerable("valueOf"),p=["toString","valueOf"],f=/^constructor|inherits|mixin$/;e.exports=function(t){"Function"===u(t)&&(t={constructor:t});var e=t.inherits,n=s(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){l(n,e);var i=e.prototype,a=n.prototype=c(i);n.parent=i,a.constructor=n}n.implement||(n.implement=d);var o=t.mixin;if(o){"Array"!==u(o)&&(o=[o]);for(var r=0;r<o.length;r++)n.implement(c(o[r].prototype))}return n.implement(t)}},{"mout/lang/createObject":100,"mout/lang/kindOf":113,"mout/object/hasOwn":136,"mout/object/mixIn":139}],204:[function(t,e,n){"use strict";function i(){return new o}var a=t("mout/array/indexOf"),o=t("./index")({constructor:function(){this.length=0,this._values=[],this._keys=[]},set:function(t,e){var n=a(this._keys,t);return-1===n?(this._keys.push(t),this._values.push(e),this.length++):this._values[n]=e,this},get:function(t){var e=a(this._keys,t);return-1===e?null:this._values[e]},count:function(){return this.length},forEach:function(t,e){for(var n=0,i=this.length;n<i&&!1!==t.call(e,this._values[n],this._keys[n],this);n++);return this},map:function(n,i){var a=new o;return this.forEach(function(t,e){a.set(e,n.call(i,t,e,this))},this),a},filter:function(n,i){var a=new o;return this.forEach(function(t,e){n.call(i,t,e,this)&&a.set(e,t)},this),a},every:function(n,i){var a=!0;return this.forEach(function(t,e){if(!n.call(i,t,e,this))return a=!1},this),a},some:function(n,i){var a=!1;return this.forEach(function(t,e){if(n.call(i,t,e,this))return!(a=!0)},this),a},indexOf:function(t){var e=a(this._values,t);return-1<e?this._keys[e]:null},remove:function(t){var e=a(this._values,t);return-1!==e?(this._values.splice(e,1),this.length--,this._keys.splice(e,1)[0]):null},unset:function(t){var e=a(this._keys,t);return-1!==e?(this._keys.splice(e,1),this.length--,this._values.splice(e,1)[0]):null},keys:function(){return this._keys.slice()},values:function(){return this._values.slice()}});i.prototype=o.prototype,e.exports=i},{"./index":203,"mout/array/indexOf":75}],205:[function(t,e,n){var i,a,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var t=l(p);d=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new m(t,e)),1!==u.length||d||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],206:[function(t,e,n){var i,a;i=this,a=function(){function t(t,e){this.items=t,this.settings=e||{diacritics:!0}}t.prototype.tokenize=function(t){if(!(t=s(String(t||"").toLowerCase()))||!t.length)return[];var e,n,i,a,o=[],r=t.split(/ +/);for(e=0,n=r.length;e<n;e++){if(i=l(r[e]),this.settings.diacritics)for(a in c)c.hasOwnProperty(a)&&(i=i.replace(new RegExp(a,"g"),c[a]));o.push({string:r[e],regex:new RegExp(i,"i")})}return o},t.prototype.iterator=function(t,e){(r(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var a,o,r,s;t=this.prepareSearch(t,e),o=t.tokens,a=t.options.fields,r=o.length,s=t.options.nesting;function l(t,e){var n,i;return!t||-1===(i=(t=String(t||"")).search(e.regex))?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)}var c,u=(c=a.length)?1===c?function(t,e){return l(f(e,a[0],s),t)}:function(t,e){for(var n=0,i=0;n<c;n++)i+=l(f(e,a[n],s),t);return i/c}:function(){return 0};return r?1===r?function(t){return u(o[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;n<r;n++){if((e=u(o[n],t))<=0)return 0;i+=e}return i/r}:function(t){for(var e=0,n=0;e<r;e++)n+=u(o[e],t);return n/r}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var e,i,a,o,r,s,l,c,u,d,h;if(h=!(t=(a=this).prepareSearch(t,n)).query&&n.sort_empty||n.sort,u=function(t,e){return"$score"===t?e.score:f(a.items[e.id],t,n.nesting)},r=[],h)for(e=0,i=h.length;e<i;e++)!t.query&&"$score"===h[e].field||r.push(h[e]);if(t.query){for(d=!0,e=0,i=r.length;e<i;e++)if("$score"===r[e].field){d=!1;break}d&&r.unshift({field:"$score",direction:"desc"})}else for(e=0,i=r.length;e<i;e++)if("$score"===r[e].field){r.splice(e,1);break}for(c=[],e=0,i=r.length;e<i;e++)c.push("desc"===r[e].direction?-1:1);return(s=r.length)?1===s?(o=r[0].field,l=c[0],function(t,e){return l*p(u(o,t),u(o,e))}):function(t,e){var n,i,a;for(n=0;n<s;n++)if(a=r[n].field,i=c[n]*p(u(a,t),u(a,e)))return i;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var n=(e=o({},e)).fields,i=e.sort,a=e.sort_empty;return n&&!r(n)&&(e.fields=[n]),i&&!r(i)&&(e.sort=[i]),a&&!r(a)&&(e.sort_empty=[a]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,n){var i,a,e,o;return a=this.prepareSearch(t,n),n=a.options,t=a.query,o=n.score||this.getScoreFunction(a),t.length?this.iterator(this.items,function(t,e){i=o(t),(!1===n.filter||0<i)&&a.items.push({score:i,id:e})}):this.iterator(this.items,function(t,e){a.items.push({score:1,id:e})}),(e=this.getSortFunction(a,n))&&a.items.sort(e),a.total=a.items.length,"number"==typeof n.limit&&(a.items=a.items.slice(0,n.limit)),a};var p=function(t,e){return"number"==typeof t&&"number"==typeof e?e<t?1:t<e?-1:0:(t=n(String(t||"")),(e=n(String(e||"")))<t?1:t<e?-1:0)},o=function(t,e){var n,i,a,o;for(n=1,i=arguments.length;n<i;n++)if(o=arguments[n])for(a in o)o.hasOwnProperty(a)&&(t[a]=o[a]);return t},f=function(t,e,n){if(t&&e){if(!n)return t[e];for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}},s=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},l=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},n=function(){var t,e,n,i,a="",o={};for(n in c)if(c.hasOwnProperty(n))for(a+=i=c[n].substring(2,c[n].length-1),t=0,e=i.length;t<e;t++)o[i.charAt(t)]=n;var r=new RegExp("["+a+"]","g");return function(t){return t.replace(r,function(t){return o[t]}).toLowerCase()}}();return t},"function"==typeof define&&define.amd?define(a):"object"==typeof n?e.exports=a():i.Sifter=a()},{}],207:[function(t,e,n){"use strict";function y(t,e){if(t===window)return"window";if(t===document)return"document";if(t===document.documentElement)return"html";if(e){var n=t.getAttribute(r);return n||(n=(o++).toString(36),t.setAttribute(r,n)),n}return t[r]||(t[r]=(o++).toString(36))}function i(t){return y(t,!0)}function a(t){this.document=t;var e=this.root=t.documentElement;this.tested={},this.uniqueID=this.has("EXPANDOS")?y:i,this.getAttribute=this.has("GET_ATTRIBUTE")?function(t,e){return t.getAttribute(e)}:function(t,e){return(t=t.getAttributeNode(e))&&t.specified?t.value:null},this.hasAttribute=e.hasAttribute?function(t,e){return t.hasAttribute(e)}:function(t,e){return!(!(t=t.getAttributeNode(e))||!t.specified)},this.contains=t.contains&&e.contains?function(t,e){return t.contains(e)}:e.compareDocumentPosition?function(t,e){return t===e||!!(16&t.compareDocumentPosition(e))}:function(t,e){do{if(e===t)return!0}while(e=e.parentNode);return!1},this.sorter=e.compareDocumentPosition?function(t,e){return t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:t===e?0:1:0}:"sourceIndex"in e?function(t,e){return t.sourceIndex&&e.sourceIndex?t.sourceIndex-e.sourceIndex:0}:t.createRange?function(t,e){if(!t.ownerDocument||!e.ownerDocument)return 0;var n=t.ownerDocument.createRange(),i=e.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,0),i.setStart(e,0),i.setEnd(e,0),n.compareBoundaryPoints(Range.START_TO_END,i)}:null,this.failed={};var n=this.has("MATCHES_SELECTOR");n&&(this.matchesSelector=function(t,e){if(this.failed[e])return null;try{return n.call(t,e)}catch(t){return S.debug&&console.warn("matchesSelector failed on "+e),this.failed[e]=!0,null}}),this.has("QUERY_SELECTOR")&&(this.querySelectorAll=function(t,e){if(this.failed[e])return!0;var n,i,a,o,r;if(t!==this.document&&(o=e[0].combinator,a=e,(i=t.getAttribute("id"))||(i="__slick__",(r=t).setAttribute("id",i)),e="#"+i+" "+a,(-1<o.indexOf("~")||-1<o.indexOf("+"))&&((t=t.parentNode)||(n=!0))),!n)try{n=t.querySelectorAll(e.toString())}catch(t){S.debug&&console.warn("querySelectorAll failed on "+(a||e)),n=this.failed[a||e]=!0}return r&&r.removeAttribute("id"),n})}var w=t("./parser"),o=0,r="uid:"+(document.__counter=(parseInt(document.__counter||-1,36)+1).toString(36)),x=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=0,l={GET_ELEMENT_BY_ID:function(t,e){return e="slick_"+s++,t.innerHTML='<a id="'+e+'"></a>',!!this.getElementById(e)},QUERY_SELECTOR:function(t){return t.innerHTML="_<style>:nth-child(2){}</style>",t.innerHTML='<a class="MiX"></a>',1===t.querySelectorAll(".MiX").length},EXPANDOS:function(t,e){return e="slick_"+s++,t._custom_property_=e,t._custom_property_===e},MATCHES_SELECTOR:function(e){e.className="MiX";var n=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector;if(n)try{n.call(e,":slick")}catch(t){return!!n.call(e,".MiX")&&n}return!1},GET_ELEMENTS_BY_CLASS_NAME:function(t){return t.innerHTML='<a class="f"></a><a class="b"></a>',1===t.getElementsByClassName("b").length&&(t.firstChild.className="b",2===t.getElementsByClassName("b").length&&(t.innerHTML='<a class="a"></a><a class="f b a"></a>',2===t.getElementsByClassName("a").length))},GET_ATTRIBUTE:function(t){var e="fus ro dah";return t.innerHTML='<a class="'+e+'"></a>',t.firstChild.getAttribute("class")===e}};a.prototype.has=function(t){var e=this.tested,n=e[t];if(null!=n)return n;var i=this.root,a=this.document,o=a.createElement("div");o.setAttribute("style","display: none;"),i.appendChild(o);var r=l[t],s=!1;if(r)try{s=r.call(a,o)}catch(t){}return S.debug&&!s&&console.warn("document has no "+t),i.removeChild(o),e[t]=s};var k={" ":function(t,e,n){var i,a,o=!e.id,r=!e.tag,s=!e.classes;if(e.id&&t.getElementById&&this.has("GET_ELEMENT_BY_ID")&&(i=t.getElementById(e.id))&&i.getAttribute("id")===e.id&&(a=[i],o=!0,"*"===e.tag&&(r=!0)),!a&&(e.classes&&t.getElementsByClassName&&this.has("GET_ELEMENTS_BY_CLASS_NAME")?(a=t.getElementsByClassName(e.classList),s=!0,"*"===e.tag&&(r=!0)):(a=t.getElementsByTagName(e.tag),"*"!==e.tag&&(r=!0)),!a||!a.length))return!1;for(var l=0;i=a[l++];)(r&&o&&s&&!e.attributes&&!e.pseudos||this.match(i,e,r,o,s))&&n(i);return!0},">":function(t,e,n){if(t=t.firstChild)for(;1==t.nodeType&&this.match(t,e)&&n(t),t=t.nextSibling;);},"+":function(t,e,n){for(;t=t.nextSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"^":function(t,e,n){(t=t.firstChild)&&(1===t.nodeType?this.match(t,e)&&n(t):k["+"].call(this,t,e,n))},"~":function(t,e,n){for(;t=t.nextSibling;)1===t.nodeType&&this.match(t,e)&&n(t)},"++":function(t,e,n){k["+"].call(this,t,e,n),k["!+"].call(this,t,e,n)},"~~":function(t,e,n){k["~"].call(this,t,e,n),k["!~"].call(this,t,e,n)},"!":function(t,e,n){for(;t=t.parentNode;)t!==this.document&&this.match(t,e)&&n(t)},"!>":function(t,e,n){(t=t.parentNode)!==this.document&&this.match(t,e)&&n(t)},"!+":function(t,e,n){for(;t=t.previousSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"!^":function(t,e,n){(t=t.lastChild)&&(1==t.nodeType?this.match(t,e)&&n(t):k["!+"].call(this,t,e,n))},"!~":function(t,e,n){for(;t=t.previousSibling;)1===t.nodeType&&this.match(t,e)&&n(t)}};a.prototype.search=function(t,e,n){t?!t.nodeType&&t.document&&(t=t.document):t=this.document;var i=w(e);if(!i||!i.length)throw new Error("invalid expression");var a,o,r,s,l=x(n=n||[])?function(t){n[n.length]=t}:function(t){n[n.length++]=t};if(1<i.length){a={};var c=l;l=function(t){var e=y(t);a[e]||(a[e]=!0,c(t))}}t:for(var u=0;e=i[u++];)if(S.noQSA||!this.querySelectorAll||!0===(r=this.querySelectorAll(t,e)))if(1===e.length)s=e[0],k[s.combinator].call(this,t,s,l);else{var d,h,p,f=[t],m=function(t){var e=y(t);p[e]||(p[e]=!0,h[h.length]=t)};for(b=0;s=e[b++];){h=[],p={};for(var g=0;d=f[g++];)k[s.combinator].call(this,d,s,m);if(!h.length)continue t;f=h}if(0===u)n=h;else for(var v=0;v<h.length;v++)l(h[v])}else if(r&&r.length)for(var b=0;o=r[b++];)"@"<o.nodeName&&l(o);return a&&n&&1<n.length&&this.sort(n),n},a.prototype.sort=function(t){return this.sorter?Array.prototype.sort.call(t,this.sorter):t};var m={empty:function(){return!(this&&1===this.nodeType||(this.innerText||this.textContent||"").length)},not:function(t){return!S.matches(this,t)},contains:function(t){return-1<(this.innerText||this.textContent||"").indexOf(t)},"first-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;return!0},"last-child":function(){for(var t=this;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"only-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;for(var e=this;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"first-of-type":function(){for(var t=this,e=t.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;return!0},"last-of-type":function(){for(var t=this,e=t.nodeName;t=t.nextSibling;)if(t.nodeName==e)return!1;return!0},"only-of-type":function(){for(var t=this,e=this.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;for(var n=this;n=n.nextSibling;)if(n.nodeName==e)return!1;return!0},enabled:function(){return!this.disabled},disabled:function(){return this.disabled},checked:function(){return this.checked||this.selected},selected:function(){return this.selected},focus:function(){return this.ownerDocument.activeElement===this&&(this.href||this.type||S.hasAttribute(this,"tabindex"))},root:function(){return this===this.ownerDocument.documentElement}};a.prototype.match=function(t,e,n,i,a){if(!S.noQSA&&this.matchesSelector){var o=this.matchesSelector(t,e);if(null!==o)return o}if(!n&&e.tag){var r=t.nodeName.toLowerCase();if("*"===e.tag){if(r<"@")return!1}else if(r!=e.tag)return!1}if(!i&&e.id&&t.getAttribute("id")!==e.id)return!1;var s,l,c,u;if(!a&&e.classes){var d=this.getAttribute(t,"class");if(!d)return!1;for(l in e.classes)if(!RegExp("(^|\\s)"+e.classes[l]+"(\\s|$)").test(d))return!1}if(e.attributes)for(s=0;l=e.attributes[s++];){var h=l.operator,p=l.escapedValue;if(c=l.name,u=l.value,h){var f=this.getAttribute(t,c);if(null==f)return!1;switch(h){case"^=":if(!RegExp("^"+p).test(f))return!1;break;case"$=":if(!RegExp(p+"$").test(f))return!1;break;case"~=":if(!RegExp("(^|\\s)"+p+"(\\s|$)").test(f))return!1;break;case"|=":if(!RegExp("^"+p+"(-|$)").test(f))return!1;break;case"=":if(f!==u)return!1;break;case"*=":if(-1===f.indexOf(u))return!1;break;default:return!1}}else if(!this.hasAttribute(t,c))return!1}if(e.pseudos)for(s=0;l=e.pseudos[s++];){if(c=l.name,u=l.value,m[c])return m[c].call(t,u);if(null!=u){if(this.getAttribute(t,c)!==u)return!1}else if(!this.hasAttribute(t,c))return!1}return!0},a.prototype.matches=function(t,e){var n=w(e);if(1===n.length&&1===n[0].length)return this.match(t,n[0][0]);if(!S.noQSA&&this.matchesSelector){var i=this.matchesSelector(t,n);if(null!==i)return i}for(var a,o=this.search(this.document,e,{length:0}),r=0;a=o[r++];)if(t===a)return!0;return!1};function c(t){var e=t||document;if(e.ownerDocument?e=e.ownerDocument:e.document&&(e=e.document),9!==e.nodeType)throw new TypeError("invalid document");var n=y(e);return u[n]||(u[n]=new a(e))}var u={},S=function(t,e){return S.search(t,e)};S.search=function(t,e,n){return c(e).search(e,t,n)},S.find=function(t,e){return c(e).search(e,t)[0]||null},S.getAttribute=function(t,e){return c(t).getAttribute(t,e)},S.hasAttribute=function(t,e){return c(t).hasAttribute(t,e)},S.contains=function(t,e){return c(t).contains(t,e)},S.matches=function(t,e){return c(t).matches(t,e)},S.sort=function(t){return t&&1<t.length&&c(t[0]).sort(t),t},S.parse=w,e.exports=S},{"./parser":209}],208:[function(e,n,t){(function(t){"use strict";n.exports="document"in t?e("./finder"):{parse:e("./parser")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./finder":207,"./parser":209}],209:[function(t,e,n){"use strict";function x(t){return(t+"").replace(i,"\\$1")}function k(t){return(t+"").replace(a,"")}function S(t){this.combinator=t||" ",this.tag="*"}var i=/([-.*+?^${}()|[\]\/\\])/g,a=/\\/g,o=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+x(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));S.prototype.toString=function(){if(!this.raw){var t,e,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(t=0;e=this.attributes[t++];)n+="["+e.name+(e.operator?e.operator+'"'+e.value+'"':"")+"]";if(this.pseudos)for(t=0;e=this.pseudos[t++];)n+=":"+e.name,e.value&&(n+="("+e.value+")");this.raw=n}return this.raw};function C(){this.length=0}C.prototype.toString=function(){if(!this.raw){for(var t,e="",n=0;t=this[n++];)1!==n&&(e+=" ")," "!==t.combinator&&(e+=t.combinator+" "),e+=t;this.raw=e}return this.raw};function r(t,e,n,i,a,o,r,s,l,c,u,d,h,p,f,m){var g,v;if((e||!this.length)&&(g=this[this.length++]=new C,e))return"";if(g=g||this[this.length-1],!n&&!i&&g.length||(v=g[g.length++]=new S(n)),v=v||g[g.length-1],a)v.tag=k(a);else if(o)v.id=k(o);else if(r){var b=k(r),y=v.classes||(v.classes={});if(!y[b]){y[b]=x(r);var w=v.classList||(v.classList=[]);w.push(b),w.sort()}}else h?(m=m||f,(v.pseudos||(v.pseudos=[])).push({type:1==d.length?"class":"element",name:k(h),escapedName:x(h),value:m?k(m):null,escapedValue:m?x(m):null})):s&&(u=u?x(u):null,(v.attributes||(v.attributes=[])).push({operator:l,name:k(s),escapedName:x(s),value:u?k(u):null,escapedValue:u?x(u):null}));return""}function s(t){this.length=0;for(var e,n=this,i=t;t;){if((e=t.replace(o,function(){return r.apply(n,arguments)}))===t)throw new Error(i+" is an invalid expression");t=e}}s.prototype.toString=function(){if(!this.raw){for(var t,e=[],n=0;t=this[n++];)e.push(t);this.raw=e.join(", ")}return this.raw};var l={};e.exports=function(t){return null==t?null:(t=(""+t).replace(/^\s+|\s+$/g,""),l[t]||(l[t]=new s(t)))}},{}],210:[function(t,e,n){var i,a;i=this,a=function(){function B(){return(B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var w=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),x=t(/Edge/i),c=t(/firefox/i),u=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),e=t(/iP(ad|od|hone)/i),n=t(/chrome/i)&&t(/android/i),i={capture:!1,passive:!1};function d(t,e,n){t.addEventListener(e,n,!w&&i)}function o(t,e,n){t.removeEventListener(e,n,!w&&i)}function r(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}else;}function $(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"!==e[0]||t.parentNode===n)&&r(t,e)||i&&t===n)return t;if(t===n)break}while(t=(a=t).host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}var a;return null}var a,s=/\s+/g;function H(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(s," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(s," ")}}function G(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function g(t,e){var n="";if("string"==typeof t)n=t;else do{var i=G(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function h(t,e,n){if(t){var i=t.getElementsByTagName(e),a=0,o=i.length;if(n)for(;a<o;a++)n(i[a],a);return i}return[]}function D(){return document.scrollingElement||document.documentElement}function U(t,e,n,i,a){if(t.getBoundingClientRect||t===window){var o,r,s,l,c,u,d;if(d=t!==window&&t!==D()?(r=(o=t.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,o.width):(s=r=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!w))do{if(a&&a.getBoundingClientRect&&("none"!==G(a,"transform")||n&&"static"!==G(a,"position"))){var h=a.getBoundingClientRect();r-=h.top+parseInt(G(a,"border-top-width")),s-=h.left+parseInt(G(a,"border-left-width")),l=r+o.height,c=s+o.width;break}}while(a=a.parentNode);if(i&&t!==window){var p=g(a||t),f=p&&p.a,m=p&&p.d;p&&(l=(r/=m)+(u/=m),c=(s/=f)+(d/=f))}return{top:r,left:s,bottom:l,right:c,width:d,height:u}}}function q(t,e,n){for(var i=N(t,!0),a=U(t)[e];i;){var o=U(i)[n];if(!("top"===n||"left"===n?o<=a:a<=o))return i;if(i===D())break;i=N(i,!1)}return!1}function p(t,e,n){for(var i=0,a=0,o=t.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==Dt.ghost&&o[a]!==Dt.dragged&&$(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function Y(t,e){for(var n=t.lastElementChild;n&&(n===Dt.ghost||"none"===G(n,"display")||e&&!r(n,e));)n=n.previousElementSibling;return n||null}function V(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Dt.clone||e&&!r(t,e)||n++;return n}function f(t){var e=0,n=0,i=D();if(t)do{var a=g(t);e+=t.scrollLeft*a.a,n+=t.scrollTop*a.d}while(t!==i&&(t=t.parentNode));return[e,n]}function N(t,e){if(!t||!t.getBoundingClientRect)return D();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=G(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return D();if(i||e)return n;i=!0}}}while(n=n.parentNode);return D()}function v(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function l(e,n){return function(){if(!a){var t=arguments;1===t.length?e.call(this,t[0]):e.apply(this,t),a=setTimeout(function(){a=void 0},n)}}}function J(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function m(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function b(t,e){G(t,"position","absolute"),G(t,"top",e.top),G(t,"left",e.left),G(t,"width",e.width),G(t,"height",e.height)}function y(t){G(t,"position",""),G(t,"top",""),G(t,"left",""),G(t,"width",""),G(t,"height","")}var W="Sortable"+(new Date).getTime(),k=[],S={initializeByDefault:!0},C={mount:function(t){for(var e in S)!S.hasOwnProperty(e)||e in t||(t[e]=S[e]);k.push(t)},pluginEvent:function(e,n,i){var t=this;this.eventCanceled=!1,i.cancel=function(){t.eventCanceled=!0};var a=e+"Global";k.forEach(function(t){n[t.pluginName]&&(n[t.pluginName][a]&&n[t.pluginName][a](B({sortable:n},i)),n.options[t.pluginName]&&n[t.pluginName][e]&&n[t.pluginName][e](B({sortable:n},i)))})},initializePlugins:function(i,a,o,t){for(var e in k.forEach(function(t){var e=t.pluginName;if(i.options[e]||t.initializeByDefault){var n=new t(i,a,i.options);n.sortable=i,n.options=i.options,i[e]=n,Object.assign(o,n.defaults)}}),i.options)if(i.options.hasOwnProperty(e)){var n=this.modifyOption(i,e,i.options[e]);void 0!==n&&(i.options[e]=n)}},getEventProperties:function(e,n){var i={};return k.forEach(function(t){"function"==typeof t.eventProperties&&Object.assign(i,t.eventProperties.call(n[t.pluginName],e))}),i},modifyOption:function(e,n,i){var a;return k.forEach(function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[n]&&(a=t.optionListeners[n].call(e[t.pluginName],i))}),a}};function E(t){var e=t.sortable,n=t.rootEl,i=t.name,a=t.targetEl,o=t.cloneEl,r=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,p=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[W]){var m,g=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||w||x?(m=document.createEvent("Event")).initEvent(i,!0,!0):m=new CustomEvent(i,{bubbles:!0,cancelable:!0}),m.to=r||n,m.from=s||n,m.item=a||n,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=h,m.pullMode=p?p.lastPutMode:void 0;var b=B({},f,C.getEventProperties(i,e));for(var y in b)m[y]=b[y];n&&n.dispatchEvent(m),g[v]&&g[v].call(e,m)}}function X(t,e,n){var i=void 0===n?{}:n,a=i.evt,o=function(t,e){if(null==t)return{};var n,i,a={},o=Object.keys(t);for(i=0;i<o.length;i++)0<=e.indexOf(n=o[i])||(a[n]=t[n]);return a}(i,["evt"]);C.pluginEvent.bind(Dt)(t,e,B({dragEl:Q,parentEl:Z,ghostEl:tt,rootEl:et,nextEl:nt,lastDownEl:T,cloneEl:O,cloneHidden:I,dragStarted:M,putSortable:rt,activeSortable:Dt.active,originalEvent:a,oldIndex:_,oldDraggableIndex:A,newIndex:it,newDraggableIndex:at,hideGhostForTarget:Tt,unhideGhostForTarget:Ot,cloneNowHidden:function(){I=!0},cloneNowShown:function(){I=!1},dispatchSortableEvent:function(t){K({sortable:e,name:t,originalEvent:a})}},o))}function K(t){E(B({putSortable:rt,cloneEl:O,targetEl:Q,rootEl:et,oldIndex:_,oldDraggableIndex:A,newIndex:it,newDraggableIndex:at},t))}var Q,Z,tt,et,nt,T,O,I,_,it,A,at,ot,rt,j,F,z,R,P,L,M,st,lt,ct,ut,dt=!1,ht=!1,pt=[],ft=!1,mt=!1,gt=[],vt=!1,bt=[],yt="undefined"!=typeof document,wt=e,xt=x||w?"cssFloat":"float",kt=yt&&!n&&!e&&"draggable"in document.createElement("div"),St=function(){if(yt){if(w)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Ct=function(t,e){var n=G(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=p(t,0,e),o=p(t,1,e),r=a&&G(a),s=o&&G(o),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+U(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+U(o).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":a&&r.float&&"none"!==r.float?!o||"both"!==s.clear&&s.clear!==("left"===r.float?"left":"right")?"horizontal":"vertical":a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||i<=l&&"none"===n[xt]||o&&"none"===n[xt]&&i<l+c)?"vertical":"horizontal"},Et=function(t){function s(o,r){return function(t,e,n,i){if(null==o&&(r||t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name))return!0;if(null==o||!1===o)return!1;if(r&&"clone"===o)return o;if("function"==typeof o)return s(o(t,e,n,i),r)(t,e,n,i);var a=(r?t:e).options.group.name;return!0===o||"string"==typeof o&&o===a||o.join&&-1<o.indexOf(a)}}var e={},n=t.group;n&&"object"==typeof n||(n={name:n}),e.name=n.name,e.checkPull=s(n.pull,!0),e.checkPut=s(n.put),e.revertClone=n.revertClone,t.group=e},Tt=function(){!St&&tt&&G(tt,"display","none")},Ot=function(){!St&&tt&&G(tt,"display","")};yt&&document.addEventListener("click",function(t){if(ht)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ht=!1},!0);function It(t){if(Q){var e=(a=(t=t.touches?t.touches[0]:t).clientX,o=t.clientY,pt.some(function(t){if(!Y(t)){var e=U(t),n=t[W].options.emptyInsertThreshold;return n&&a>=e.left-n&&a<=e.right+n&&o>=e.top-n&&o<=e.bottom+n?r=t:void 0}}),r);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[W]._onDragOver(n)}}var a,o,r}function _t(t){Q&&Q.parentNode[W]._isOutsideThisEl(t.target)}var At;function Dt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Object.assign({},e),t[W]=this;var n,i,a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ct(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Dt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var o in C.initializePlugins(this,t,a),a)o in e||(e[o]=a[o]);for(var r in Et(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&kt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?d(t,"pointerdown",this._onTapStart):(d(t,"mousedown",this._onTapStart),d(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(d(t,"dragover",this),d(t,"dragenter",this)),pt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Object.assign(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==G(t,"display")&&void 0!==t){i.push({target:t,rect:U(t)});var e=B({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=g(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var p=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var f=!1,m=0;i.forEach(function(t){var e,n,i,a,o=0,r=t.target,s=r.fromRect,l=U(r),c=r.prevFromRect,u=r.prevToRect,d=t.rect,h=g(r,!0);h&&(l.top-=h.f,l.left-=h.e),r.toRect=l,r.thisAnimationDuration&&v(c,l)&&!v(s,l)&&(d.top-l.top)/(d.left-l.left)==(s.top-l.top)/(s.left-l.left)&&(e=d,n=c,i=u,a=p.options,o=Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))*a.animation),v(l,s)||(r.prevFromRect=s,r.prevToRect=l,o=o||p.options.animation,p.animate(r,d,l,o)),o&&(f=!0,m=Math.max(m,o),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},o),r.thisAnimationDuration=o)}),clearTimeout(n),f?n=setTimeout(function(){"function"==typeof t&&t()},m):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){G(t,"transition",""),G(t,"transform","");var a=g(this.el),o=(e.left-n.left)/(a&&a.a||1),r=(e.top-n.top)/(a&&a.d||1);t.animatingX=!!o,t.animatingY=!!r,G(t,"transform","translate3d("+o+"px,"+r+"px,0)"),this.forRepaintDummy=t.offsetWidth,G(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),G(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){G(t,"transition",""),G(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}))}function Nt(t,e,n,i,a,o,r,s){var l,c,u=t[W],d=u.options.onMove;return!window.CustomEvent||w||x?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=a||e,l.relatedRect=o||U(e),l.willInsertAfter=s,l.originalEvent=r,t.dispatchEvent(l),d&&(c=d.call(u,l,r)),c}function jt(t){t.draggable=!1}function Ft(){vt=!1}function zt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Rt(t){return setTimeout(t,0)}function Pt(t){return clearTimeout(t)}Dt.prototype={constructor:Dt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(st=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,t=this.options,a=t.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=t.filter;if(function(t){bt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&bt.push(i)}}(i),!Q&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||t.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!u||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=$(s,t.draggable,i,!1))&&s.animated||T===s)){if(_=V(s),A=V(s,t.draggable),"function"==typeof c){if(c.call(this,e,s,this))return K({sortable:n,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),X("filter",n,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(c=c&&c.split(",").some(function(t){if(t=$(l,t.trim(),i,!1))return K({sortable:n,rootEl:t,name:"filter",targetEl:s,fromEl:i,toEl:i}),X("filter",n,{evt:e}),!0}))return void(a&&e.cancelable&&e.preventDefault());t.handle&&!$(l,t.handle,i,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(t,e,n){var i,a=this,o=a.el,r=a.options,s=o.ownerDocument;if(n&&!Q&&n.parentNode===o){var l=U(n);if(et=o,Z=(Q=n).parentNode,nt=Q.nextSibling,T=n,ot=r.group,P=(j={target:Dt.dragged=Q,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-l.left,L=j.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Q.style["will-change"]="all",i=function(){X("delayEnded",a,{evt:t}),Dt.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!c&&a.nativeDraggable&&(Q.draggable=!0),a._triggerDragStart(t,e),K({sortable:a,name:"choose",originalEvent:t}),H(Q,r.chosenClass,!0))},r.ignore.split(",").forEach(function(t){h(Q,t.trim(),jt)}),d(s,"dragover",It),d(s,"mousemove",It),d(s,"touchmove",It),d(s,"mouseup",a._onDrop),d(s,"touchend",a._onDrop),d(s,"touchcancel",a._onDrop),c&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),X("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(x||w))i();else{if(Dt.eventCanceled)return void this._onDrop();d(s,"mouseup",a._disableDelayedDrag),d(s,"touchend",a._disableDelayedDrag),d(s,"touchcancel",a._disableDelayedDrag),d(s,"mousemove",a._delayedDragTouchMoveHandler),d(s,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&d(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&jt(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;o(t,"mouseup",this._disableDelayedDrag),o(t,"touchend",this._disableDelayedDrag),o(t,"touchcancel",this._disableDelayedDrag),o(t,"mousemove",this._delayedDragTouchMoveHandler),o(t,"touchmove",this._delayedDragTouchMoveHandler),o(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?d(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):(d(Q,"dragend",this),d(et,"dragstart",this._onDragStart));try{document.selection?Rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(dt=!1,et&&Q){X("dragStarted",this,{evt:e}),this.nativeDraggable&&d(document,"dragover",_t);var n=this.options;t||H(Q,n.dragClass,!1),H(Q,n.ghostClass,!0),Dt.active=this,t&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(F){this._lastX=F.clientX,this._lastY=F.clientY,Tt();for(var t=document.elementFromPoint(F.clientX,F.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(F.clientX,F.clientY))!==e;)e=t;if(Q.parentNode[W]._isOutsideThisEl(t),e)do{if(e[W]&&e[W]._onDragOver({clientX:F.clientX,clientY:F.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Ot()}},_onTouchMove:function(t){if(j){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,a=t.touches?t.touches[0]:t,o=tt&&g(tt,!0),r=tt&&o&&o.a,s=tt&&o&&o.d,l=wt&&ut&&f(ut),c=(a.clientX-j.clientX+i.x)/(r||1)+(l?l[0]-gt[0]:0)/(r||1),u=(a.clientY-j.clientY+i.y)/(s||1)+(l?l[1]-gt[1]:0)/(s||1);if(!Dt.active&&!dt){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(tt){o?(o.e+=c-(z||0),o.f+=u-(R||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";G(tt,"webkitTransform",d),G(tt,"mozTransform",d),G(tt,"msTransform",d),G(tt,"transform",d),z=c,R=u,F=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!tt){var t=this.options.fallbackOnBody?document.body:et,e=U(Q,!0,wt,!0,t),n=this.options;if(wt){for(ut=t;"static"===G(ut,"position")&&"none"===G(ut,"transform")&&ut!==document;)ut=ut.parentNode;ut!==document.body&&ut!==document.documentElement?(ut===document&&(ut=D()),e.top+=ut.scrollTop,e.left+=ut.scrollLeft):ut=D(),gt=f(ut)}H(tt=Q.cloneNode(!0),n.ghostClass,!1),H(tt,n.fallbackClass,!0),H(tt,n.dragClass,!0),G(tt,"transition",""),G(tt,"transform",""),G(tt,"box-sizing","border-box"),G(tt,"margin",0),G(tt,"top",e.top),G(tt,"left",e.left),G(tt,"width",e.width),G(tt,"height",e.height),G(tt,"opacity","0.8"),G(tt,"position",wt?"absolute":"fixed"),G(tt,"zIndex","100000"),G(tt,"pointerEvents","none"),Dt.ghost=tt,t.appendChild(tt),G(tt,"transform-origin",P/parseInt(tt.style.width)*100+"% "+L/parseInt(tt.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,a=n.options;X("dragStart",this,{evt:t}),Dt.eventCanceled?this._onDrop():(X("setupClone",this),Dt.eventCanceled||((O=m(Q)).draggable=!1,O.style["will-change"]="",this._hideClone(),H(O,this.options.chosenClass,!1),Dt.clone=O),n.cloneId=Rt(function(){X("clone",n),Dt.eventCanceled||(n.options.removeCloneOnHide||et.insertBefore(O,Q),n._hideClone(),K({sortable:n,name:"clone"}))}),e||H(Q,a.dragClass,!0),e?(ht=!0,n._loopId=setInterval(n._emulateDragOver,50)):(o(document,"mouseup",n._onDrop),o(document,"touchend",n._onDrop),o(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(n,i,Q)),d(document,"drop",n),G(Q,"transform","translateZ(0)")),dt=!0,n._dragStartId=Rt(n._dragStarted.bind(n,e,t)),d(document,"selectstart",n),M=!0,u&&G(document.body,"user-select","none"))},_onDragOver:function(d){var n,h,i,p,t,e,a,o,r,s,l,c,u=this.el,f=d.target,m=this.options,g=m.group,v=Dt.active,b=ot===g,y=m.sort,w=rt||v,x=this,k=!1;if(!vt){if(void 0!==d.preventDefault&&d.cancelable&&d.preventDefault(),f=$(f,m.draggable,u,!0),R("dragOver"),Dt.eventCanceled)return k;if(Q.contains(d.target)||f.animated&&f.animatingX&&f.animatingY||x._ignoreWhileAnimating===f)return L(!1);if(ht=!1,v&&!m.disabled&&(b?y||(i=!et.contains(Q)):rt===this||(this.lastPutMode=ot.checkPull(this,v,Q,d))&&g.checkPut(this,v,Q,d))){if(p="vertical"===this._getDirection(d,f),n=U(Q),R("dragOverValid"),Dt.eventCanceled)return k;if(i)return Z=et,P(),this._hideClone(),R("revert"),Dt.eventCanceled||(nt?et.insertBefore(Q,nt):et.appendChild(Q)),L(!0);var S=Y(u,m.draggable);if(S&&(r=d,s=p,c=U(Y((l=this).el,l.options.draggable)),!(s?r.clientX>c.right+10||r.clientX<=c.right&&r.clientY>c.bottom&&r.clientX>=c.left:r.clientX>c.right&&r.clientY>c.top||r.clientX<=c.right&&r.clientY>c.bottom+10)||S.animated)){if(f.parentNode===u){h=U(f);var C,E,T,O=Q.parentNode!==u,I=(t=Q.animated&&Q.toRect||n,e=f.animated&&f.toRect||h,a=p?t.left:t.top,o=p?e.left:e.top,!(a===o||(p?t.right:t.bottom)===(p?e.right:e.bottom)||a+(p?t.width:t.height)/2===o+(p?e.width:e.height)/2)),_=p?"top":"left",A=q(f,"top","top")||q(Q,"top","top"),D=A?A.scrollTop:void 0;if(st!==f&&(E=h[_],ft=!1,mt=!I&&m.invertSwap||O),0!==(C=function(t,e,n,i,a){var o,r=p?d.clientY:d.clientX,s=p?h.height:h.width,l=p?h.top:h.left,c=p?h.bottom:h.right,u=!1;if(!i)if(a&&ct<s*e){if(!ft&&(1===lt?l+s*n/2<r:r<c-s*n/2)&&(ft=!0),ft)u=!0;else if(1===lt?r<l+ct:c-ct<r)return-lt}else if(l+s*(1-e)/2<r&&r<c-s*(1-e)/2)return o=t,V(Q)<V(o)?1:-1;return(u=u||i)&&(r<l+s*n/2||c-s*n/2<r)?l+s/2<r?1:-1:0}(f,I?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,mt,st===f)))for(var N=V(Q);(T=Z.children[N-=C])&&("none"===G(T,"display")||T===tt););if(0===C||T===f)return L(!1);lt=C;var j=(st=f).nextElementSibling,F=!1,z=Nt(et,u,Q,n,f,h,d,F=1===C);if(!1!==z)return 1!==z&&-1!==z||(F=1===z),vt=!0,setTimeout(Ft,30),P(),F&&!j?u.appendChild(Q):f.parentNode.insertBefore(Q,F?j:f),A&&J(A,0,D-A.scrollTop),Z=Q.parentNode,void 0===E||mt||(ct=Math.abs(E-U(f)[_])),M(),L(!0)}}else{if(S===Q)return L(!1);if(S&&u===d.target&&(f=S),f&&(h=U(f)),!1!==Nt(et,u,Q,n,f,h,d,!!f))return P(),u.appendChild(Q),Z=u,M(),L(!0)}if(u.contains(Q))return L(!1)}return!1}function R(t,e){X(t,x,B({evt:d,isOwner:b,axis:p?"vertical":"horizontal",revert:i,dragRect:n,targetRect:h,canSort:y,fromSortable:w,target:f,completed:L,onMove:function(t,e){return Nt(et,u,Q,n,t,U(t),d,e)},changed:M},e))}function P(){R("dragOverAnimationCapture"),x.captureAnimationState(),x!==w&&w.captureAnimationState()}function L(t){return R("dragOverCompleted",{insertion:t}),t&&(b?v._hideClone():v._showClone(x),x!==w&&(H(Q,rt?rt.options.ghostClass:v.options.ghostClass,!1),H(Q,m.ghostClass,!0)),rt!==x&&x!==Dt.active?rt=x:x===Dt.active&&rt&&(rt=null),w===x&&(x._ignoreWhileAnimating=f),x.animateAll(function(){R("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(f===Q&&!Q.animated||f===u&&!f.animated)&&(st=null),m.dragoverBubble||d.rootEl||f===document||(Q.parentNode[W]._isOutsideThisEl(d.target),t||It(d)),!m.dragoverBubble&&d.stopPropagation&&d.stopPropagation(),k=!0}function M(){it=V(Q),at=V(Q,m.draggable),K({sortable:x,name:"change",toEl:u,newIndex:it,newDraggableIndex:at,originalEvent:d})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){o(document,"mousemove",this._onTouchMove),o(document,"touchmove",this._onTouchMove),o(document,"pointermove",this._onTouchMove),o(document,"dragover",It),o(document,"mousemove",It),o(document,"touchmove",It)},_offUpEvents:function(){var t=this.el.ownerDocument;o(t,"mouseup",this._onDrop),o(t,"touchend",this._onDrop),o(t,"pointerup",this._onDrop),o(t,"touchcancel",this._onDrop),o(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;it=V(Q),at=V(Q,n.draggable),X("drop",this,{evt:t}),Z=Q&&Q.parentNode,it=V(Q),at=V(Q,n.draggable),Dt.eventCanceled||(ft=mt=dt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pt(this.cloneId),Pt(this._dragStartId),this.nativeDraggable&&(o(document,"drop",this),o(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),u&&G(document.body,"user-select",""),G(Q,"transform",""),t&&(M&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),tt&&tt.parentNode&&tt.parentNode.removeChild(tt),(et===Z||rt&&"clone"!==rt.lastPutMode)&&O&&O.parentNode&&O.parentNode.removeChild(O),Q&&(this.nativeDraggable&&o(Q,"dragend",this),jt(Q),Q.style["will-change"]="",M&&!dt&&H(Q,rt?rt.options.ghostClass:this.options.ghostClass,!1),H(Q,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),et!==Z?(0<=it&&(K({rootEl:Z,name:"add",toEl:Z,fromEl:et,originalEvent:t}),K({sortable:this,name:"remove",toEl:Z,originalEvent:t}),K({rootEl:Z,name:"sort",toEl:Z,fromEl:et,originalEvent:t}),K({sortable:this,name:"sort",toEl:Z,originalEvent:t})),rt&&rt.save()):it!==_&&0<=it&&(K({sortable:this,name:"update",toEl:Z,originalEvent:t}),K({sortable:this,name:"sort",toEl:Z,originalEvent:t})),Dt.active&&(null!=it&&-1!==it||(it=_,at=A),K({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){X("nulling",this),et=Q=Z=tt=nt=O=T=I=j=F=M=it=at=_=A=st=lt=rt=ot=Dt.dragged=Dt.ghost=Dt.clone=Dt.active=null,bt.forEach(function(t){t.checked=!0}),bt.length=z=R=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Q&&(this._onDragOver(t),(e=t).dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault());break;case"selectstart":t.preventDefault()}var e},toArray:function(){for(var t,e=[],n=this.el.children,i=0,a=n.length,o=this.options;i<a;i++)$(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||zt(t));return e},sort:function(t){var i={},a=this.el;this.toArray().forEach(function(t,e){var n=a.children[e];$(n,this.options.draggable,a,!1)&&(i[t]=n)},this),t.forEach(function(t){i[t]&&(a.removeChild(i[t]),a.appendChild(i[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return $(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=C.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&Et(n)},destroy:function(){X("destroy",this);var t=this.el;t[W]=null,o(t,"mousedown",this._onTapStart),o(t,"touchstart",this._onTapStart),o(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(t,"dragover",this),o(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),pt.splice(pt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!I){if(X("hideClone",this),Dt.eventCanceled)return;G(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),I=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(I){if(X("showClone",this),Dt.eventCanceled)return;Q.parentNode!=et||this.options.group.revertClone?nt?et.insertBefore(O,nt):et.appendChild(O):et.insertBefore(O,Q),this.options.group.revertClone&&this.animate(Q,O),G(O,"display",""),I=!1}}else this._hideClone()}},yt&&d(document,"touchmove",function(t){(Dt.active||dt)&&t.cancelable&&t.preventDefault()}),Dt.utils={on:d,off:o,css:G,find:h,is:function(t,e){return!!$(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:l,closest:$,toggleClass:H,clone:m,index:V,nextTick:Rt,cancelNextTick:Pt,detectDirection:Ct,getChild:p},Dt.get=function(t){return t[W]},Dt.mount=function(){var t=[].slice.call(arguments);t[0].constructor===Array&&(t=t[0]),t.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(t);t.utils&&(Dt.utils=B({},Dt.utils,t.utils)),C.mount(t)})},Dt.create=function(t,e){return new Dt(t,e)};var Lt,Mt,Bt,$t,Ht,Gt=[],Ut=[],qt=!(Dt.version="1.12.0"),Yt=!1,Vt=!1;function Jt(i,a){Ut.forEach(function(t,e){var n=a.children[t.sortableIndex+(i?Number(e):0)];n?a.insertBefore(t,n):a.appendChild(t)})}function Wt(){Gt.forEach(function(t){t!==Bt&&t.parentNode&&t.parentNode.removeChild(t)})}function Xt(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,a=t.dispatchSortableEvent,o=t.unhideGhostForTarget;if(e){var r=n||t.activeSortable;(0,t.hideGhostForTarget)();var s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,l=document.elementFromPoint(s.clientX,s.clientY);o(),r&&!r.el.contains(l)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n}))}}function Kt(){}function Qt(){}Kt.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=p(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Xt},Object.assign(Kt,{pluginName:"revertOnSpill"}),Qt.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Xt},Object.assign(Qt,{pluginName:"removeOnSpill"});var Zt,te,ee,ne,ie,ae,oe=[],re=!1;function se(){oe.forEach(function(t){clearInterval(t.pid)}),oe=[]}function le(){clearInterval(ae)}var ce=l(function(n,t,e,i){if(t.scroll){var a,o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=D(),u=!1;te!==e&&(te=e,se(),a=t.scrollFn,!0===(Zt=t.scroll)&&(Zt=N(e,!0)));var d=0,h=Zt;do{var p=h,f=U(p),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,x=void 0,k=void 0,S=p.scrollWidth,C=p.scrollHeight,E=G(p),T=p.scrollLeft,O=p.scrollTop;k=p===c?(x=y<S&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),w<C&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(x=y<S&&("auto"===E.overflowX||"scroll"===E.overflowX),w<C&&("auto"===E.overflowY||"scroll"===E.overflowY));var I=x&&(Math.abs(b-o)<=s&&T+y<S)-(Math.abs(v-o)<=s&&!!T),_=k&&(Math.abs(g-r)<=s&&O+w<C)-(Math.abs(m-r)<=s&&!!O);if(!oe[d])for(var A=0;A<=d;A++)oe[A]||(oe[A]={});oe[d].vx==I&&oe[d].vy==_&&oe[d].el===p||(oe[d].el=p,oe[d].vx=I,oe[d].vy=_,clearInterval(oe[d].pid),0==I&&0==_||(u=!0,oe[d].pid=setInterval(function(){i&&0===this.layer&&Dt.active._onTouchMove(ie);var t=oe[this.layer].vy?oe[this.layer].vy*l:0,e=oe[this.layer].vx?oe[this.layer].vx*l:0;"function"==typeof a&&"continue"!==a.call(Dt.dragged.parentNode[W],e,t,n,ie,oe[this.layer].el)||J(oe[this.layer].el,e,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=N(h,!1)));re=u}},30);return Dt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?d(document,"dragover",this._handleAutoScroll):d(document,this.options.supportPointer?"pointermove":e.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?o(document,"dragover",this._handleAutoScroll):(o(document,"pointermove",this._handleFallbackAutoScroll),o(document,"touchmove",this._handleFallbackAutoScroll),o(document,"mousemove",this._handleFallbackAutoScroll)),le(),se(),clearTimeout(a),a=void 0},nulling:function(){ie=te=Zt=re=ae=ee=ne=null,oe.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var i=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(a,o);if(ie=e,n||x||w||u){ce(e,this.options,t,n);var r=N(t,!0);!re||ae&&a===ee&&o===ne||(ae&&le(),ae=setInterval(function(){var t=N(document.elementFromPoint(a,o),!0);t!==r&&(r=t,se()),ce(e,i.options,t,n)},10),ee=a,ne=o)}else{if(!this.options.bubbleScroll||N(t,!0)===D())return void se();ce(e,this.options,N(t,!1),!1)}}},Object.assign(t,{pluginName:"scroll",initializeByDefault:!0})}),Dt.mount(Qt,Kt),Dt.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){At=t.dragEl},dragOverValid:function(t){var e=t.completed,n=t.target,i=t.changed,a=t.cancel;if(t.activeSortable.options.swap){var o=this.options;if(n&&n!==this.sortable.el){var r=At;At=!1!==(0,t.onMove)(n)?(H(n,o.swapClass,!0),n):null,r&&r!==At&&H(r,o.swapClass,!1)}i(),e(!0),a()}},drop:function(t){var e,n,i,a,o,r,s=t.activeSortable,l=t.putSortable,c=t.dragEl,u=l||this.sortable,d=this.options;At&&H(At,d.swapClass,!1),At&&(d.swap||l&&l.options.swap)&&c!==At&&(u.captureAnimationState(),u!==s&&s.captureAnimationState(),r=(n=At).parentNode,(o=(e=c).parentNode)&&r&&!o.isEqualNode(n)&&!r.isEqualNode(e)&&(i=V(e),a=V(n),o.isEqualNode(r)&&i<a&&a++,o.insertBefore(n,o.children[i]),r.insertBefore(e,r.children[a])),u.animateAll(),u!==s&&s.animateAll())},nulling:function(){At=null}},Object.assign(t,{pluginName:"swap",eventProperties:function(){return{swapItem:At}}})}),Dt.mount(new function(){function t(i){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));i.options.supportPointer?d(document,"pointerup",this._deselectMultiDrag):(d(document,"mouseup",this._deselectMultiDrag),d(document,"touchend",this._deselectMultiDrag)),d(document,"keydown",this._checkKeyDown),d(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,e){var n="";Gt.length&&Mt===i?Gt.forEach(function(t,e){n+=(e?", ":"")+t.textContent}):n=e.textContent,t.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){Bt=t.dragEl},delayEnded:function(){this.isMultiDrag=~Gt.indexOf(Bt)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var i=0;i<Gt.length;i++)Ut.push(m(Gt[i])),Ut[i].sortableIndex=Gt[i].sortableIndex,Ut[i].draggable=!1,Ut[i].style["will-change"]="",H(Ut[i],this.options.selectedClass,!1),Gt[i]===Bt&&H(Ut[i],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.dispatchSortableEvent,n=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Gt.length&&Mt===t.sortable&&(Jt(!0,t.rootEl),e("clone"),n()))},showClone:function(t){var e=t.cloneNowShown,n=t.cancel;this.isMultiDrag&&(Jt(!1,t.rootEl),Ut.forEach(function(t){G(t,"display","")}),e(),Ht=!1,n())},hideClone:function(t){var e=this,n=t.cloneNowHidden,i=t.cancel;this.isMultiDrag&&(Ut.forEach(function(t){G(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),n(),Ht=!0,i())},dragStartGlobal:function(t){!this.isMultiDrag&&Mt&&Mt.multiDrag._deselectMultiDrag(),Gt.forEach(function(t){t.sortableIndex=V(t)}),Gt=Gt.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),Vt=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Gt.forEach(function(t){t!==Bt&&G(t,"position","absolute")});var i=U(Bt,!1,!0,!0);Gt.forEach(function(t){t!==Bt&&b(t,i)}),qt=Yt=!0}n.animateAll(function(){qt=Yt=!1,e.options.animation&&Gt.forEach(function(t){y(t)}),e.options.sort&&Wt()})}},dragOver:function(t){var e=t.completed,n=t.cancel;Yt&&~Gt.indexOf(t.target)&&(e(!1),n())},revert:function(t){var i,a,e=t.fromSortable,n=t.rootEl,o=t.sortable,r=t.dragRect;1<Gt.length&&(Gt.forEach(function(t){o.addAnimationState({target:t,rect:Yt?U(t):r}),y(t),t.fromRect=r,e.removeAnimationState(t)}),Yt=!1,i=!this.options.removeCloneOnHide,a=n,Gt.forEach(function(t,e){var n=a.children[t.sortableIndex+(i?Number(e):0)];n?a.insertBefore(t,n):a.appendChild(t)}))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,i=t.activeSortable,a=t.parentEl,o=t.putSortable,r=this.options;if(t.insertion){if(n&&i._hideClone(),qt=!1,r.animation&&1<Gt.length&&(Yt||!n&&!i.options.sort&&!o)){var s=U(Bt,!1,!0,!0);Gt.forEach(function(t){t!==Bt&&(b(t,s),a.appendChild(t))}),Yt=!0}if(!n)if(Yt||Wt(),1<Gt.length){var l=Ht;i._showClone(e),i.options.animation&&!Ht&&l&&Ut.forEach(function(t){i.addAnimationState({target:t,rect:$t}),t.fromRect=$t,t.thisAnimationDuration=null})}else i._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,i=t.activeSortable;if(Gt.forEach(function(t){t.thisAnimationDuration=null}),i.options.animation&&!n&&i.multiDrag.isMultiDrag){$t=Object.assign({},e);var a=g(Bt,!0);$t.top-=a.f,$t.left-=a.e}},dragOverAnimationComplete:function(){Yt&&(Yt=!1,Wt())},drop:function(t){var e=t.originalEvent,n=t.rootEl,i=t.parentEl,a=t.sortable,o=t.dispatchSortableEvent,r=t.oldIndex,s=t.putSortable,l=s||this.sortable;if(e){var c=this.options,u=i.children;if(!Vt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),H(Bt,c.selectedClass,!~Gt.indexOf(Bt)),~Gt.indexOf(Bt))Gt.splice(Gt.indexOf(Bt),1),Lt=null,E({sortable:a,rootEl:n,name:"deselect",targetEl:Bt,originalEvt:e});else{if(Gt.push(Bt),E({sortable:a,rootEl:n,name:"select",targetEl:Bt,originalEvt:e}),e.shiftKey&&Lt&&a.el.contains(Lt)){var d,h,p=V(Lt),f=V(Bt);if(~p&&~f&&p!==f)for(d=p<f?(h=p,f):(h=f,p+1);h<d;h++)~Gt.indexOf(u[h])||(H(u[h],c.selectedClass,!0),Gt.push(u[h]),E({sortable:a,rootEl:n,name:"select",targetEl:u[h],originalEvt:e}))}else Lt=Bt;Mt=l}if(Vt&&this.isMultiDrag){if((i[W].options.sort||i!==n)&&1<Gt.length){var m=U(Bt),g=V(Bt,":not(."+this.options.selectedClass+")");if(!qt&&c.animation&&(Bt.thisAnimationDuration=null),l.captureAnimationState(),!qt&&(c.animation&&(Bt.fromRect=m,Gt.forEach(function(t){if(t.thisAnimationDuration=null,t!==Bt){var e=Yt?U(t):m;t.fromRect=e,l.addAnimationState({target:t,rect:e})}})),Wt(),Gt.forEach(function(t){u[g]?i.insertBefore(t,u[g]):i.appendChild(t),g++}),r===V(Bt))){var v=!1;Gt.forEach(function(t){t.sortableIndex===V(t)||(v=!0)}),v&&o("update")}Gt.forEach(function(t){y(t)}),l.animateAll()}Mt=l}(n===i||s&&"clone"!==s.lastPutMode)&&Ut.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})}},nullingGlobal:function(){this.isMultiDrag=Vt=!1,Ut.length=0},destroyGlobal:function(){this._deselectMultiDrag(),o(document,"pointerup",this._deselectMultiDrag),o(document,"mouseup",this._deselectMultiDrag),o(document,"touchend",this._deselectMultiDrag),o(document,"keydown",this._checkKeyDown),o(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==Vt&&Vt||Mt!==this.sortable||t&&$(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Gt.length;){var e=Gt[0];H(e,this.options.selectedClass,!1),Gt.shift(),E({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[W];e&&e.options.multiDrag&&!~Gt.indexOf(t)&&(Mt&&Mt!==e&&(Mt.multiDrag._deselectMultiDrag(),Mt=e),H(t,e.options.selectedClass,!0),Gt.push(t))},deselect:function(t){var e=t.parentNode[W],n=Gt.indexOf(t);e&&e.options.multiDrag&&~n&&(H(t,e.options.selectedClass,!1),Gt.splice(n,1))}},eventProperties:function(){var n=this,i=[],a=[];return Gt.forEach(function(t){var e;i.push({multiDragElement:t,index:t.sortableIndex}),e=Yt&&t!==Bt?-1:Yt?V(t,":not(."+n.options.selectedClass+")"):V(t),a.push({multiDragElement:t,index:e})}),{items:[].concat(Gt),clones:[].concat(Ut),oldIndicies:i,newIndicies:a}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),Dt},"object"==typeof n&&void 0!==e?e.exports=a():"function"==typeof define&&define.amd?define(a):(i=i||self).Sortable=a()},{}],211:[function(l,t,c){(function(t,e){var i=l("process/browser.js").nextTick,n=Function.prototype.apply,a=Array.prototype.slice,o={},r=0;function s(t,e){this._id=t,this._clearFn=e}c.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},c.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},c.setImmediate="function"==typeof t?t:function(t){var e=r++,n=!(arguments.length<2)&&a.call(arguments,1);return o[e]=!0,i(function(){o[e]&&(n?t.apply(null,n):t.call(null),c.clearImmediate(e))}),e},c.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":205,timers:211}],212:[function(t,et,e){!function(){function i(t,e,n){return t.call.apply(t.bind,arguments)}function a(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function f(t,e,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:a).apply(null,arguments)}var s=Date.now||function(){return+new Date};function e(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var l=!!window.FontFace;function c(t,e,n,i){if(e=t.c.createElement(e),n)for(var a in n)n.hasOwnProperty(a)&&("style"==a?e.style.cssText=n[a]:e.setAttribute(a,n[a]));return i&&e.appendChild(t.c.createTextNode(i)),e}function u(t,e,n){(t=(t=t.c.getElementsByTagName(e)[0])||document.documentElement).insertBefore(n,t.lastChild)}function n(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),a=0;a<e.length;a+=1){for(var o=!1,r=0;r<i.length;r+=1)if(e[a]===i[r]){o=!0;break}o||i.push(e[a])}for(e=[],a=0;a<i.length;a+=1){for(o=!1,r=0;r<n.length;r+=1)if(i[a]===n[r]){o=!0;break}o||e.push(i[a])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(t,e){for(var n=t.className.split(/\s+/),i=0,a=n.length;i<a;i++)if(n[i]==e)return!0;return!1}function d(t,e,n){function i(){r&&a&&(r(o),r=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var a=!1,o=null,r=n||null;l?(e.onload=function(){a=!0,i()},e.onerror=function(){a=!0,o=Error("Stylesheet failed to load"),i()}):setTimeout(function(){a=!0,i()},0),u(t,"head",e)}function h(t,e,n,i){var a=t.c.getElementsByTagName("head")[0];if(a){var o=c(t,"script",{src:e}),r=!1;return o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&a.removeChild(o))},a.appendChild(o),setTimeout(function(){r||(r=!0,n&&n(Error("Script load timeout")))},i||5e3),o}return null}function p(){this.a=0,this.c=null}function g(t){return t.a++,function(){t.a--,r(t)}}function v(t,e){t.c=e,r(t)}function r(t){0==t.a&&t.c&&(t.c(),t.c=null)}function b(t){this.a=t||"-"}function y(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function x(t){return t.a+t.f}function k(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function S(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new b("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function C(t){if(t.g){var e=o(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),m(t.f,n,i)}E(t,"inactive")}function E(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,x(n)):t.h[e]())}function T(){this.c={}}function O(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function I(t){u(t.c,"body",t.a)}function _(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";font-style:"+k(t)+";font-weight:"+t.f+"00;"}function A(t,e,n,i,a,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=a||3e3,this.h=o||void 0}function D(t,e,n,i,a,o,r){this.v=t,this.B=e,this.c=n,this.a=i,this.s=r||"BESbswy",this.f={},this.w=a||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new O(this.c,this.s),this.h=new O(this.c,this.s),this.j=new O(this.c,this.s),this.m=new O(this.c,this.s),t=_(t=new y(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=t,t=_(t=new y(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=t,t=_(t=new y("serif",x(this.a))),this.j.a.style.cssText=t,t=_(t=new y("sans-serif",x(this.a))),this.m.a.style.cssText=t,I(this.g),I(this.h),I(this.j),I(this.m)}b.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},A.prototype.start=function(){var a=this.c.o.document,o=this,r=s(),t=new Promise(function(n,i){!function e(){var t;s()-r>=o.f?i():a.fonts.load(k(t=o.a)+" "+t.f+"00 300px "+w(t.c),o.h).then(function(t){1<=t.length?n():setTimeout(e,25)},function(){i()})}()}),n=null,e=new Promise(function(t,e){n=setTimeout(e,o.f)});Promise.race([e,t]).then(function(){n&&(clearTimeout(n),n=null),o.g(o.a)},function(){o.j(o.a)})};var N={D:"serif",C:"sans-serif"},j=null;function F(){if(null===j){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return j}function z(t,e,n){for(var i in N)if(N.hasOwnProperty(i)&&e===t.f[N[i]]&&n===t.f[N[i]])return!0;return!1}function R(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=F()&&z(t,n,i)),e?s()-t.A>=t.w?F()&&z(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?P(t,t.v):P(t,t.B):setTimeout(f(function(){R(this)},t),50):P(t,t.v)}function P(t,e){setTimeout(f(function(){n(this.g.a),n(this.h.a),n(this.j.a),n(this.m.a),e(this.a)},t),0)}function L(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),R(this)};var M=null;function B(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&m(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),E(t,"active")):C(t.a))}function t(t){this.j=t,this.a=new T,this.h=0,this.f=this.g=!0}function $(t,e){this.c=t,this.a=e}function H(t,e){this.c=t,this.a=e}function G(t,e){this.c=t||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=e||""}L.prototype.g=function(t){var e=this.a;e.g&&m(e.f,[e.a.c("wf",t.c,x(t).toString(),"active")],[e.a.c("wf",t.c,x(t).toString(),"loading"),e.a.c("wf",t.c,x(t).toString(),"inactive")]),E(e,"fontactive",t),this.m=!0,B(this)},L.prototype.h=function(t){var e=this.a;if(e.g){var n=o(e.f,e.a.c("wf",t.c,x(t).toString(),"active")),i=[],a=[e.a.c("wf",t.c,x(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,x(t).toString(),"inactive")),m(e.f,i,a)}E(e,"fontinactive",t),B(this)},t.prototype.load=function(t){this.c=new e(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(a,t,e){var n=[],i=e.timeout;!function(t){t.g&&m(t.f,[t.a.c("wf","loading")]),E(t,"loading")}(t);n=function(t,e,n){var i,a=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&a.push(o(e[i],n))}return a}(a.a,e,a.c);var o=new L(a.c,t,i);for(a.h=n.length,t=0,e=n.length;t<e;t++)n[t].load(function(t,e,n){var i,c,u,d,h,p;c=o,u=t,d=e,h=n,p=0==--(i=a).h,(i.f||i.g)&&setTimeout(function(){var t=h||null,e=d||{};if(0===u.length&&p)C(c.a);else{c.f+=u.length,p&&(c.j=p);var n,i=[];for(n=0;n<u.length;n++){var a=u[n],o=e[a.c],r=c.a,s=a;if(r.g&&m(r.f,[r.a.c("wf",s.c,x(s).toString(),"loading")]),E(r,"fontloading",s),(r=null)===M)if(window.FontFace){s=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var l=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);M=s?42<parseInt(s[1],10):!l}else M=!1;r=M?new A(f(c.g,c),f(c.h,c),c.c,a,c.s,o):new D(f(c.g,c),f(c.h,c),c.c,a,c.s,t,o),i.push(r)}for(n=0;n<i.length;n++)i[n].start()}},0)})}(this,new S(this.c,t),t)},$.prototype.load=function(r){var e=this,s=e.a.projectId,t=e.a.version;if(s){var l=e.c.o;h(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(t?"?v="+t:""),function(t){t?r([]):(l["__MonotypeConfiguration__"+s]=function(){return e.a},function t(){if(l["__mti_fntLst"+s]){var e,n=l["__mti_fntLst"+s](),i=[];if(n)for(var a=0;a<n.length;a++){var o=n[a].fontfamily;null!=n[a].fontStyle&&null!=n[a].fontWeight?(e=n[a].fontStyle+n[a].fontWeight,i.push(new y(o,e))):i.push(new y(o))}r(i)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+s}else r([])},H.prototype.load=function(t){var e,n,i=this.a.urls||[],a=this.a.families||[],o=this.a.testStrings||{},r=new p;for(e=0,n=i.length;e<n;e++)d(this.c,i[e],g(r));var s=[];for(e=0,n=a.length;e<n;e++)if((i=a[e].split(":"))[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)s.push(new y(i[0],l[c]));else s.push(new y(i[0]));v(r,function(){t(s,o)})};function U(t){this.f=t,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Y={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},V={i:"i",italic:"i",n:"n",normal:"n"},J=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function W(t,e){this.c=t,this.a=e}var X={Arimo:!0,Cousine:!0,Tinos:!0};function K(t,e){this.c=t,this.a=e}function Q(t,e){this.c=t,this.f=e,this.a=[]}W.prototype.load=function(t){var e=new p,n=this.c,i=new G(this.a.api,this.a.text),a=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var a=e[i].split(":");3==a.length&&t.f.push(a.pop());var o="";2==a.length&&""!=a[1]&&(o=":"),t.a.push(a.join(o))}}(i,a);var o=new U(a);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),a=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var r;if(r=[],s=i[1])for(var s,l=(s=s.split(",")).length,c=0;c<l;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(h=J.exec(u.toLowerCase())))u="";else{if(u=null==(u=h[2])||""==u?"n":V[u],null==(h=h[1])||""==h)h="4";else var d=Y[h],h=d||(isNaN(h)?"4":h.substr(0,1));u=[u,h].join("")}else u="";u&&r.push(u)}0<r.length&&(o=r),3==i.length&&(r=[],0<(i=(i=i[2])?i.split(","):r).length&&(i=q[i[0]])&&(t.c[a]=i))}for(t.c[a]||(i=q[a])&&(t.c[a]=i),i=0;i<o.length;i+=1)t.a.push(new y(a,o[i]))}}(o),d(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),g(e)),v(e,function(){t(o.a,o.c,X)})},K.prototype.load=function(r){var t=this.a.id,s=this.c.o;t?h(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)r([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){t=s.Typekit.config.fn;for(var e=[],n=0;n<t.length;n+=2)for(var i=t[n],a=t[n+1],o=0;o<a.length;o++)e.push(new y(i,a[o]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}r(e)}},2e3):r([])},Q.prototype.load=function(c){var t,e=this.f.id,n=this.c.o,u=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(t,e){for(var n=0,i=e.fonts.length;n<i;++n){var a=e.fonts[n];u.a.push(new y(a.name,(o="font-weight:"+a.weight+";font-style:"+a.style,l=s=r=void 0,r=4,s="n",l=null,o&&((l=o.match(/(normal|oblique|italic)/i))&&l[1]&&(s=l[1].substr(0,1).toLowerCase()),(l=o.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?r=7:/[1-9]00/.test(l[1])&&(r=parseInt(l[1].substr(0,1),10)))),s+r)))}var o,r,s,l;c(u.a)},h(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((t=this.c).o.location.hostname||t.a.location.hostname)+"/"+e+".js",function(t){t&&c([])})):c([])};var Z=new t(window);Z.a.c.custom=function(t,e){return new H(e,t)},Z.a.c.fontdeck=function(t,e){return new Q(e,t)},Z.a.c.monotype=function(t,e){return new $(e,t)},Z.a.c.typekit=function(t,e){return new K(e,t)},Z.a.c.google=function(t,e){return new W(e,t)};var tt={load:f(Z.load,Z)};"function"==typeof define&&define.amd?define(function(){return tt}):void 0!==et&&et.exports?et.exports=tt:(window.WebFont=tt,window.WebFontConfig&&Z.load(window.WebFontConfig))}()},{}],213:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("prime/map")(),p=t("mout/object/merge"),f=(t("mout/array/forEach"),t("mout/string/trim")),m=t("../utils/elements.utils"),o=t("../utils/decouple"),g=t("../utils/async-foreach"),v=a,b={toggleSection:function(t,e,n,i){if(t.type.match(/^touch/)&&t.preventDefault(),e.siblings("[data-g-global-filter]")||e.parent("[data-g-global-filter]"))return b.globalToggleSection(t,e);if(e.matches("label"))return b.treatLabel(t,e);var a=e.parent(".card"),o=v.get(a),r=m("[data-save]"),s=null==e.data("g-assignments-check")?0:1;if(!o||!o.inputs){var l=a.search(".enabler input[type=hidden]");(o=o||v.set(a,{inputs:l}).get(a)).inputs||(o=v.set(a,p(v.get(a),{inputs:l})).get(a))}g(o.inputs,function(t){"none"!=(t=m(t)).parent("label, h4").compute("display")&&(t.value(s).emit("change"),m("body").emit("change",{target:t}))},function(){void 0!==n&&void 0!==i&&n+1==i.length&&r.disabled(!1)})},filterSection:function(t,e,a,o){if(e.siblings("[data-g-global-filter]")||e.parent("[data-g-global-filter]"))return b.globalFilterSection(t,e);var r=e.parent(".card"),s=m("[data-assignments-enabledonly]"),l=v.get(r)||v.set(r,{labels:r.search("label .settings-param-title")}).get(r);if(a=a||e.value(),!l||!l.labels){var n=r.search("label .settings-param-title");(l=l||v.set(r,{labels:n}).get(r)).labels||(l=v.set(r,p(v.get(r),{labels:n})).get(r))}if(l=m(l.labels),!a&&!s.checked())return r.style("display","inline-block"),l?l.search("!> label").style("display","block"):l;var c,u,d=0,h=0;l||e.parent(".card").style("display",s.checked()||a?"none":"inline-block"),g(l,function(t,e){if(t=m(t),c=f(t.text()),u=c.match(new RegExp("^"+a+"|\\s"+a,"gi")),s.checked()&&(u=Number(!!u)&Number(t.parent("label, h4").find('.enabler input[type="hidden"]').value())),u){var n=t.parent("[data-g-assignments-parent]");if(n=n&&n.data("g-assignments-parent")){var i=t.parent(".card").find('[data-g-assignments-group="'+n+'"]');i&&i.style("display","block")}t.parent("label, h4").style("display","block"),h++}else t.parent("label, h4").style("display","none"),0;++d==l.length&&o&&r.style("display",h?"inline-block":"none")})},filterEnabledOnly:function(t,e){var n=m('[data-g-global-filter] input[type="text"]');b.globalFilterSection(t,n,e)},treatLabel:function(t,e){if(t&&t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!m(t.target).matches(".knob, .toggle")){var n=e.find('input[type="hidden"]:not([disabled])');if(n){var i=n.value();return i=!!+i,n.value(Number(!i)).emit("change"),m("body").emit("change",{target:n}),!1}}},globalToggleSection:function(i,t){var e=null==t.data("g-assignments-check")?"[data-g-assignments-uncheck]":"[data-g-assignments-check]",n=m("[data-save]"),a=m("#assignments .card "+e+", .settings-assignments .card "+e);a&&(n.disabled(!0),g(a,function(t,e,n){b.toggleSection(i,m(t),e,n)}))},globalFilterSection:function(e,t){var n=t.value(),i=m("[data-assignments-enabledonly]"),a=m('#assignments .card .search input[type="text"], .settings-assignments .card .search input[type="text"]');(a||i.checked())&&g(a,function(t){b.filterSection(e,m(t),n,"global")})},toggleStateDelegation:function(t,e){var n="1"==e.value();e.attribute("disabled",!n)},chromeFix:function(){if(b.isChrome()){var n,i,t=m("#assignments .settings-param-wrapper, .settings-assignments .settings-param-wrapper");t&&t.forEach(function(t){if(t=m(t),i=parseInt(t.compute("max-height"),10),n=t[0].getBoundingClientRect().height,t.style({overflow:i<=n?"auto":"visible"}),i<=n){var e=100;o(t,"scroll",function(){e=100==e?100.01:100,t.parent(".card").style("width",e+"%")})}})}},isChrome:function(){return-1<navigator.userAgent.toLowerCase().indexOf("chrome")}};i(function(){var t=m("body");t.delegate("input",'#assignments .search input[type="text"], .settings-assignments .search input[type="text"]',b.filterSection),t.delegate("click","#assignments .card label, #assignments [data-g-assignments-check], #assignments [data-g-assignments-uncheck], .settings-assignments .card label, .settings-assignments [data-g-assignments-check], .settings-assignments [data-g-assignments-uncheck]",b.toggleSection),t.delegate("touchend","#assignments .card label, #assignments [data-g-assignments-check], #assignments [data-g-assignments-uncheck], .settings-assignments .card label, .settings-assignments [data-g-assignments-check], .settings-assignments [data-g-assignments-uncheck]",b.toggleSection),t.delegate("change","[data-assignments-enabledonly]",b.filterEnabledOnly),t.delegate("change",'#assignments input[type="hidden"][name], .settings-assignments input[type="hidden"][name]',b.toggleStateDelegation)}),e.exports=b},{"../utils/async-foreach":273,"../utils/decouple":275,"../utils/elements.utils":276,"elements/domready":32,"mout/array/forEach":74,"mout/object/merge":138,"mout/string/trim":173,"prime/map":204}],214:[function(t,e,n){"use strict";var r=t("elements"),s=t("elements/zen"),i=t("elements/domready"),a=t("../ui"),o=(t("mout/string/interpolate"),a.modal),l=t("mout/string/trim"),c=t("../utils/get-ajax-url").parse,u=t("../utils/get-ajax-url").global,d=t("../utils/get-ajax-suffix");i(function(){r("body").delegate("click","[data-changelog]",function(t,e){t.preventDefault(),o.open({content:"Loading",method:"post",className:"g5-dialog-theme-default g5-modal-changelog",data:{version:e.data("changelog")},remote:c(u("changelog")+d()),remoteLoaded:function(t,e){t.body.success&&e.elements.content.search("#g-changelog > ol > li > a").forEach(function(n,t){var e=(n=r(n)).href(),i=new RegExp("#(common|"+GANTRY_PLATFORM+")$","gi"),a=!e.match(i),o="chevron-"+(a?"down":"up");l(n.text())&&(t&&!a&&n.parent("li").after(n.parent("ol").find("> li")),s('i[class="fa g-changelog-toggle fa-fw fa-'+o+'"][aria-hidden="true"]').bottom(n),a&&n.nextSibling().style({overflow:"hidden",height:0}),n.on("click",function(t){t.preventDefault();var e=n.find('i[class*="fa-chevron-"]');e.hasClass("fa-chevron-down")?(e.removeClass("fa-chevron-down").addClass("fa-chevron-up"),n.nextSibling().slideDown()):(e.removeClass("fa-chevron-up").addClass("fa-chevron-down"),n.nextSibling().slideUp())}))})}})})})},{"../ui":264,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,elements:34,"elements/domready":32,"elements/zen":37,"mout/string/interpolate":162,"mout/string/trim":173}],215:[function(t,e,n){"use strict";var d=t("elements"),i=t("elements/domready"),a=t("agent"),h=t("../ui").modal,p=t("mout/random/guid"),f=t("mout/string/trim"),m=t("../utils/get-ajax-suffix"),g=t("../utils/get-ajax-url").parse,v=(t("../utils/get-ajax-url").global,t("../utils/history")),b=t("mout/queryString/getParam"),y=t("mout/queryString/setParam");i(function(){var l,c,u,e,i=d("body");i.delegate("keydown",".config-select-wrap [data-title-edit]",function(t,e){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),i.emit("mousedown",t))}),i.delegate("mousedown",".config-select-wrap [data-title-edit]",function(t,s){l=s.siblings(".g-selectize-control"),c=s.siblings("select"),(u=s.siblings("[data-title-editable]")).gConfEditAttached||(u.gConfEditAttached=!0,u.on("title-edit-end",function(o,r,t){if(o=f(o),t||o==r)return l.style("display","inline-block"),void u.style("display","none").attribute("contenteditable",null);s.addClass("disabled"),s.removeClass("fa-pencil").addClass("fa-spin-fast fa-spinner"),e=u.data("g-config-href"),a("post",g(e+m()),{title:o},function(t,e){if(e.body.success){var n=c.selectizeInstance,i=c.value(),a=n.Options[i];a[n.options.labelField]=o,n.updateOption(i,a),l.style("display","inline-block"),u.style("display","none")}else h.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),u.data("title-editable",r).text(r);!function(t,n){if("wordpress"==GANTRY_PLATFORM){var i=t.replace(/[^a-z\d_-\s]/i,"_").toLowerCase(),e=d('[href*="/'+n+'/"]'),a=v.getPageUrl(),o=b(a,"view");e&&e.forEach(function(t){var e=(t=d(t)).href().replace("/"+n+"/","/"+i+"/");t.href(e)}),o=o.replace("/"+n+"/","/"+i+"/"),a=y(a,"view",o),v.replaceState({uuid:p(),doNothing:!0},window.document.title,a)}}(o,i),s.removeClass("disabled"),s.removeClass("fa-spin-fast fa-spinner").addClass("fa-pencil")})})),u.style({width:l.compute("width"),display:"inline-block"}),l.style("display","none")})}),e.exports={}},{"../ui":264,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/history":285,agent:1,elements:34,"elements/domready":32,"mout/queryString/getParam":148,"mout/queryString/setParam":150,"mout/random/guid":152,"mout/string/trim":173}],216:[function(t,e,n){"use strict";var u=t("elements"),d=t("elements/zen"),i=t("elements/domready"),a=t("mout/string/trim"),h=t("mout/object/keys"),p=t("../ui").modal,f=t("../ui").toastr,m=t("agent"),g=t("../utils/get-ajax-suffix"),v=t("../utils/get-ajax-url").parse,b=t("../utils/get-ajax-url").global,r=t("../utils/flags-state");t("./dropdown-edit"),i(function(){var l=u("body");l.delegate("click","[data-g5-outline-create], [data-g5-outline-duplicate]",function(t,e){t&&t.preventDefault(),p.open({content:"Loading",method:"post",overlayClickToClose:!1,remote:v(e.href()+g()),remoteLoaded:function(t,r){if(t.body.success){var s=r.elements.content.find('[name="title"]'),l=r.elements.content.find("[data-g-outline-create-confirm]");s.on("keyup",function(t){13===t.which&&l.emit("click")}),l.on("click",function(){l.hideIndicator(),l.showIndicator();var t=v(l.data("g-outline-create-confirm")+g()),e=r.elements.content.find('[name="from"]:checked'),n=r.elements.content.find('[name="preset"]'),i=r.elements.content.find('[name="outline"]'),a=r.elements.content.find('[name="inherit"]'),o={title:s.value(),from:e?e.value():null,preset:n?n.value():null,outline:i?i.value():null,inherit:a.checked()?1:0};["title","from","preset","outline"].forEach(function(t){o[t]||delete o[t]}),m("post",t,o,function(t,e){if(l.hideIndicator(),e.body.success){var n=u("#configurations").find("ul").find("li"),i=d("li").attribute("class",n.attribute("class"));i.after(n).html(e.body.outline),f.success(e.body.html||"Action successfully completed.",e.body.title||""),c(i.find("[data-title-editable]")),p.close()}else p.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})}),setTimeout(function(){s[0].focus()},5)}else p.enableCloseByOverlay()}})}),l.delegate("change",'input[type="radio"]#from-preset, input[type="radio"]#from-outline',function(t,e){var n=(e=u(e)).value(),i=e.parent(".card").search(".g-create-from").style("display","none").filter(function(t){return(t=u(t)).hasClass("g-create-from-"+n)});i&&u(i).style("display","block")}),l.delegate("click","#configurations [data-g-config]",function(t,s){var e=s.data("g-config"),n=s.data("g-config-href"),i=s.data("g-config-href-confirm"),a=window.btoa(n),o=(s.data("g-config-method")||"post").toLowerCase();if(t&&t.preventDefault&&t.preventDefault(),"delete"==e&&!r.get("free:to:delete:"+a,!1))return r.warning({url:v(n+g()),callback:function(t,e){var n=e.find("[data-g-delete-confirm]"),i=e.find("[data-g-delete-cancel]");n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;r.get("free:to:delete:"+a,!0),u([n,i]).attribute("disabled"),l.emit("click",{target:s}),p.close()}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;u([n,i]).attribute("disabled"),r.get("free:to:delete:"+a,!1),p.close()}))}}),!1;s.hideIndicator(),s.showIndicator(),m(o,v((i||n)+g()),{},function(t,e){if(e.body.success){var n=u("#configuration-selector"),i=n.value(),a=e.body.outline,o=u('[href="'+b("configurations")+'"]');if(a&&i==a){var r=h(n.selectizeInstance.Options);r.length&&o.href(o.href().replace("style="+a,"style="+r.shift()))}o?l.emit("click",{target:o}):window.location=window.location,f.success(e.body.html||"Action successfully completed.",e.body.title||""),a&&(l.outlineDeleted=a)}else p.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});s.hideIndicator()})});function e(o,r,t){if(this.style("text-overflow","ellipsis"),!t&&o!=r){var s=this,e=s.data("g-config-href"),n=(s.data("g-config-method")||"post").toLowerCase(),l=s.parent();l.showIndicator(),l.find("[data-title-edit]").addClass("disabled"),m(n,v(e+g()),{title:a(o)},function(t,e){if(e.body.success){s.data("title",o).data("tip",o);var n=d("div").html(e.body.outline),i=n.find("h4 span:last-child"),a=n.find(".outline-actions");s.parent(".card").find("h4 span:last-child").html(i.html()),s.parent(".card").find(".outline-actions").html(a.html())}else p.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),s.data("title-editable",r).text(r);l.hideIndicator(),l.find("[data-title-edit]").removeClass("disabled")})}}var c=function(t){t&&t.length&&t.forEach(function(t){(t=u(t)).confWasAttached=!0,t.on("title-edit-start",function(){t.style("text-overflow","inherit")}),t.on("title-edit-end",e)})};l.on("statechangeAfter",function(t,e){var n=u("#configurations [data-title-editable]");if(!n)return!0;n=n.filter(function(t){return void 0===u(t).confWasAttached}),c(n)}),c(u("#configurations [data-title-editable]"))}),e.exports={}},{"../ui":264,"../utils/flags-state":279,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"./dropdown-edit":215,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/object/keys":137,"mout/string/trim":173}],217:[function(t,e,n){"use strict";var i=t("elements/domready"),s=t("elements/attributes"),l=t("prime/map"),c=t("mout/lang/deepEquals"),a=t("mout/lang/is"),u=t("mout/lang/isString"),d=t("mout/object/has"),h=t("mout/collection/forEach"),p=(t("mout/array/invoke"),t("../utils/history")),f=t("../utils/flags-state"),o=t("./submit");t("./multicheckbox");function m(t){var e,i=new l,a=s("[data-g-styles-defaults]"),n=s('input[type="checkbox"].settings-param-toggle');if(a=a?JSON.parse(a.data("g-styles-defaults")):{},n){var o={};n.forEach(function(t){t=s(t),o[t.id()]=t.checked()}),i.set("__js__overrides",JSON.stringify(o))}if(t)return t.forEach(function(t){(e=s('[name="'+t+'"]'))&&i.set(t,e.value())}),i;var r=s(".settings-block [name]");return!!r&&(r.forEach(function(t){var e=(t=s(t)).attribute("name"),n=!d(a,e);"checkbox"!=t.type()||t.value().length||t.value("0"),i.set(e,n?t.value():a[e])},this),i)}var g,v={single:function(){},whole:function(){},blanks:function(){},presets:function(){}};i(function(){var o,r=s("body");g=m(),v.single=function(t,e){var n=e.parent(".settings-param")||e.parent("h4")||e.parent(".input-group"),i=n?n.matches("h4")?n:n.find(".settings-param-title, .g-instancepicker-title"):null,a=!!n&&n.find(".settings-param-toggle"),o=!1,r=e.hasClass("settings-param-toggle");if(n){if(r)return v.whole("force");"checkbox"==e.type()&&e.value(Number(e.checked()).toString()),g&&null==g.get(e.attribute("name"))&&(g.set(e.attribute("name"),e.value()),o=!0),i&&g&&null!=g.get(e.attribute("name"))&&(g.get(e.attribute("name"))!==e.value()||o?(a&&t.forceOverride&&!a.checked()&&a[0].click(),i.showIndicator("changes-indicator font-small fa fa-circle-o fa-fw")):(a&&t.forceOverride&&a.checked()&&a[0].click(),i.hideIndicator()),v.blanks(t,n.find(".settings-param-field")),v.whole("force"),v.presets())}},v.whole=function(t){if(g){var e=c(g,m(t?g.keys():null),function(t,e){return u(t)&&u(e)&&"#"==t.substr(0,1)&&"#"==e.substr(0,1)?t.toLowerCase()==e.toLowerCase():a(t,e)}),n=s("[data-save]");n&&(f.set("pending",!e),n[e?"hideIndicator":"showIndicator"]("changes-indicator fa fa-circle-o fa-fw"))}},v.blanks=function(t,e){if(e){var n=e.find("[name]"),i=e.find(".g-reset-field");if(!n||!i)return!0;!n.value()||n.disabled()?i.style("display","none"):i.removeAttribute("style")}},v.presets=function(){var a,n,i,t=s("[data-g-styles]");t&&(o||(o=new l,h(t,function(t,e){var n,i;t=s(t),a={index:e,map:(n=JSON.parse(t.data("g-styles")),i=new l,h(n,function(t,e){i.set(e,t)}),i)},o.set(t,a)})),o.forEach(function(t,e){(n=m(t.map.keys())).unset("__js__overrides"),i=c(n,t.map,function(t,e){return t==e}),s(s("[data-g-styles]")[t.index]).parent()[i?"addClass":"removeClass"]("g-preset-match")}))},r.delegate("input",'.settings-block input[name][type="text"], .settings-block textarea[name]',v.single),r.delegate("change",'.settings-block input[name][type="hidden"], .settings-block input[name][type="checkbox"], .settings-block select[name], .settings-block .selectized[name], .settings-block input[id][type="checkbox"].settings-param-toggle',v.single),r.delegate("input",".g-urltemplate",function(t,e){var n=e.parent(".settings-param").siblings();if(n=n&&n.find("[data-g-urltemplate]")){var i=n.data("g-urltemplate");n.attribute("href",i.replace(/#ID#/g,e.value()))}}),r.delegate("mouseenter",".settings-param-field",v.blanks,!0),r.delegate("click",".g-reset-field",function(t,e){var n,i=e.parent(".settings-param-field");if(i&&(n=i.find("[name]"))&&!n.disabled()){var a=n.selectizeInstance;a?a.setValue(""):n.value(""),n.emit("change"),r.emit("input",{target:n}),r.emit("keyup",{target:n})}}),r.on("statechangeEnd",function(){p.getState();r.emit("updateOriginalFields")}),r.on("updateOriginalFields",function(){g=m(),v.presets()}),v.presets()}),e.exports={compare:v,collect:m,submit:o}},{"../utils/flags-state":279,"../utils/history":285,"./multicheckbox":218,"./submit":219,"elements/attributes":29,"elements/domready":32,"mout/array/invoke":78,"mout/collection/forEach":89,"mout/lang/deepEquals":102,"mout/lang/is":103,"mout/lang/isString":112,"mout/object/has":135,"prime/map":204}],218:[function(t,e,n){"use strict";var s=t("elements/attributes"),i=t("elements/domready"),l=t("mout/array/remove"),c=t("mout/array/insert");t("mout/array/contains");i(function(){var r=s("body");r.delegate("change",'.input-multicheckbox .input-group input[name][type="hidden"]',function(t,e){var n=e.attribute("name"),i=e.value().split(","),a=s('[data-multicheckbox-field="'+n+'"]');a&&a.forEach(function(t){(t=s(t)).checked()&&c(i,t.value()),t.checked()||l(i,t.value())}),e.value(i.filter(String).join(","))}),r.delegate("change",'.input-multicheckbox .input-group input[data-multicheckbox-field][type="checkbox"]',function(t,e){var n=s('[name="'+e.data("multicheckbox-field")+'"]'),i=e.value(),a=n.value().split(","),o=e.checked();o&&c(a,i),o||l(a,i),n.value(a.filter(String).join(",")),r.emit("change",{target:n})})})},{"elements/attributes":29,"elements/domready":32,"mout/array/contains":66,"mout/array/insert":76,"mout/array/remove":81}],219:[function(t,e,n){"use strict";var u=t("elements"),d=t("mout/lang/isArray"),h=t("mout/array/contains"),i=t("mout/string/trim"),p=t("../utils/field-validation");e.exports=function(t,r,s){var l=[],c=[];t=u(t),r=u(r),s=s||{},u(t).forEach(function(t){var e=(t=u(t)).attribute("name"),n=t.attribute("type");if(e&&!t.disabled()&&("radio"!=n||t.checked())&&(t=r.find('[name="'+e+'"]'+("radio"==n?":checked":"")),"checkbox"===n&&r.find('[type="hidden"][name="'+e+'"]')&&(t=r.find('[name="'+e+'"][type="checkbox"]')),t)){var i="checkbox"==t.type()?Number(t.checked()):t.value(),a=t.parent(".settings-param"),o=a?a.find('> input[type="checkbox"]'):null;if(o=o||u(t.data("override-target")),h(["select","select-multiple"],t.type())&&t.attribute("multiple")&&(i=(t.search("option[selected]")||[]).map(function(t){return u(t).value()})),o&&!o.checked())return;p(t)||c.push(t),d(i)?i.forEach(function(t){l.push(e+"[]="+encodeURIComponent(t))}):(!s.submitUnchecked||"checkbox"!=t.type()||"checkbox"==t.type()&&i)&&l.push(e+"="+encodeURIComponent(i))}});var e,n=r.search("h4 [data-title-editable]");return n&&n.forEach(function(t){(t=u(t)).parent("[data-collection-template]")||(e=t.data("collection-key")||(s.isRoot?"settings[title]":"title"),l.push(e+"="+encodeURIComponent(i(t.data("title-editable")))))}),{valid:l,invalid:c}}},{"../utils/field-validation":278,elements:34,"mout/array/contains":66,"mout/lang/isArray":104,"mout/string/trim":173}],220:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements"),o=t("./base"),r=t("elements/zen"),s=t("../../utils/get-ajax-url").config,l=new i({inherits:o,options:{type:"atom"},constructor:function(t){o.call(this,t),this.on("changed",this.hasChanged)},updateTitle:function(t){return this.block.find(".title").text(t),this.setTitle(t),this},layout:function(){var t=s(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e=this.getSubType()?'data-lm-blocksubtype="'+this.getSubType()+'"':"";return'<div class="'+this.getType()+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" '+e+'><span><span class="title">'+this.getTitle()+'</span><span class="font-small">'+(this.getSubType()||this.getKey()||this.getType())+'</span></span><div class="float-right"><i aria-label="Configure Atom Settings" class="fa fa-cog" aria-hidden="true" data-lm-nodrag data-lm-nodrag data-lm-settings="'+t+'"></i></div></div>'},hasChanged:function(t,e){var n=this.block.find("span > i.changes-indicator:first-child");n&&e&&!e.changeState||(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n&&r("i.fa.fa-circle-o.changes-indicator").before(this.block.find(".icon")))},onRendered:function(t,e){!a('[data-lm-disabled][data-lm-subtype="'+this.getSubType()+'"]')&&0!==this.getAttribute("enabled")||this.disable()}});e.exports=l},{"../../utils/get-ajax-url":281,"./base":222,elements:34,"elements/zen":37,prime:203}],221:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements"),o=t("elements/zen"),r=t("mout/function/bind"),s=new i({inherits:t("./section"),options:{type:"atoms",attributes:{name:"Atoms Section"}},layout:function(){return this.deprecated='<div class="atoms-notice">Looking for Atoms? To make it easier we moved them in the <a href="#"><i class="fa fa-fw fa-list-alt" aria-hidden="true"></i> Page Settings</a>.</div>','<div class="atoms-section" style="display: none;" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'"><div class="section-header clearfix"><h4 class="float-left">'+this.getAttribute("name")+"</h4></div></div>"},getId:function(){return this.id||(this.id=this.options.type)},onDone:function(t){if(!this.block.search('[data-lm-blocktype="atom"]')){var e=[this.getId()],n=this.block.search("[data-lm-id]");return n&&n.forEach(function(t){e.push(a(t).data("lm-id"))}),e.reverse().forEach(r(function(t){this.options.builder.remove(t)},this)),this.block.empty()[0].outerHTML=this.deprecated,void this._attachRedirect()}this.block.search("[data-lm-id]")||(this.grid.insert(this.block,"bottom"),this.options.builder.add(this.grid)),o("div").html(this.deprecated).firstChild().after(this.block),this._attachRedirect()},_attachRedirect:function(){var e=a('[data-g5-nav="page"]');e&&a(".atoms-notice a").on("click",function(t){t.preventDefault(),a("body").emit("click",{target:e})})}});e.exports=s},{"./section":230,elements:34,"elements/zen":37,"mout/function/bind":92,prime:203}],222:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime-util/prime/options"),o=t("prime-util/prime/bound"),r=t("prime/emitter"),s=t("elements/zen"),l=t("mout/string/trim"),c=t("elements"),u=t("../id"),d=t("mout/object/size"),h=t("mout/object/get"),p=t("mout/object/has"),f=t("mout/object/set"),m=t("../../utils/translate"),g=t("../../utils/get-outline").getCurrentOutline;t("elements/traversal");var v=new i({mixin:[o,a],inherits:r,options:{subtype:!1,attributes:{},inherit:{}},constructor:function(t){return this.setOptions(t),this.fresh=!this.options.id,this.id=this.options.id||u(this.options),this.attributes=this.options.attributes||{},this.inherit=this.options.inherit||{},this.block=s("div").html(this.layout()).firstChild(),this.on("rendered",this.bound("onRendered")),this},guid:function(){return guid()},getId:function(){return this.id||(this.id=u(this.options))},getType:function(){return this.options.type||""},getSubType:function(){return this.options.subtype||""},getTitle:function(){return l(this.options.title||"Untitled")},setTitle:function(t){return this.options.title=l(t||"Untitled"),this},getKey:function(){return""},getPageId:function(){var t=c("[data-lm-root]");return t?t.data("lm-page"):"data-root-not-found"},getAttribute:function(t){return h(this.attributes,t)},getAttributes:function(){return this.attributes||{}},getInheritance:function(){return this.inherit||{}},updateTitle:function(){return this},setAttribute:function(t,e){return f(this.attributes,t,e),this},setAttributes:function(t){return this.attributes=t,this},setInheritance:function(t){return this.inherit=t,this},hasAttribute:function(t){return p(this.attributes,t)},enableInheritance:function(){},disableInheritance:function(){},refreshInheritance:function(){},hasInheritance:function(){return d(this.inherit)&&this.inherit.outline!=g()},disable:function(){this.block.title(m("GANTRY5_PLATFORM_JS_LM_DISABLED_PARTICLE","particle")),this.block.addClass("particle-disabled")},enable:function(){this.block.removeAttribute("title"),this.block.removeClass("particle-disabled")},insert:function(t,e){return this.block[e||"after"](t),this},adopt:function(t){return t.insert(this.block),this},isNew:function(t){return void 0!==t&&(this.fresh=!!t),this.fresh},dropzone:function(){return"data-lm-dropzone"},addDropzone:function(){this.block.data("lm-dropzone",!0)},removeDropzone:function(){this.block.data("lm-dropzone",null)},layout:function(){},onRendered:function(){},setLayout:function(t){return this.block=t,this},getLimits:function(){return!1}});e.exports=v},{"../../utils/get-outline":282,"../../utils/translate":288,"../id":237,elements:34,"elements/traversal":36,"elements/zen":37,"mout/object/get":134,"mout/object/has":135,"mout/object/set":142,"mout/object/size":143,"mout/string/trim":173,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],223:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),o=t("../../utils/elements.utils"),r=t("elements/zen"),s=t("mout/number/enforcePrecision"),l=t("mout/function/bind"),c=new i({inherits:a,options:{type:"block",attributes:{size:100}},constructor:function(t){a.call(this,t),t.attributes&&t.attributes.size&&this.setAttribute("size",s(t.attributes.size,1)),this.on("changed",this.hasChanged)},getSize:function(){return s(this.getAttribute("size"),1)},setSize:function(t,e){t=void 0===t?this.getSize():Math.max(0,Math.min(100,parseFloat(t))),t=s(t,1),e&&this.setAttribute("size",t),o(this.block).style({flex:"0 1 "+t+"%","-webkit-flex":"0 1 "+t+"%","-ms-flex":"0 1 "+t+"%"}),this.emit("resized",t,this)},setAnimatedSize:function(t,e){t=void 0===t?this.getSize():Math.max(0,Math.min(100,parseFloat(t))),t=s(t,1),e&&this.setAttribute("size",t),o(this.block).animate({flex:"0 1 "+t+"%","-webkit-flex":"0 1 "+t+"%","-ms-flex":"0 1 "+t+"%"},l(function(){this.block.attribute("style",null),this.setSize(t)},this)),this.emit("resized",t,this)},setLabelSize:function(t){var e=this.block.find("> .particle-size");if(!e)return!1;e.text(s(t,1)+"%")},layout:function(){return'<div class="g-block" data-lm-id="'+this.getId()+'"'+this.dropzone()+' data-lm-blocktype="block"></div>'},onRendered:function(t,e){if(t.block.find('> [data-lm-blocktype="section"]')&&this.removeDropzone(),e){var n=e.block.parent();(n.data("lm-root")||"container"==n.data("lm-blocktype")&&(n.parent().data("lm-root")||"wrapper"==n.parent().data("lm-blocktype")))&&(r("span.particle-size").text(this.getSize()+"%").top(t.block),t.on("resized",this.bound("onResize")))}},onResize:function(t){this.setLabelSize(t)},hasChanged:function(t){var e,n=this.block.find('> [data-lm-id]:not([data-lm-blocktype="section"]):not([data-lm-blocktype="container"])');if(this.changeState=t,!n)return e=(n=this.block.find("> .particle-size")||this.block.parent('[data-lm-blocktype="block"]').find("> .particle-size")).find("i:first-child"),!t&&e&&e.remove(),void(t&&!e&&r("i.fa.fa-circle-o.changes-indicator").top(n));var i=this.options.builder.get(n.data("lm-id"));i&&i.emit("changed",t,this)}});e.exports=c},{"../../utils/elements.utils":276,"./base":222,"elements/zen":37,"mout/function/bind":92,"mout/number/enforcePrecision":123,prime:203}],224:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),o=t("elements/zen"),r=(t("elements"),t("../../utils/get-ajax-url").config),s=t("../../utils/translate"),l=new i({inherits:a,options:{type:"container"},constructor:function(t){a.call(this,t),this.on("changed",this.hasChanged)},layout:function(){return'<div class="g-lm-container" data-lm-id="'+this.getId()+'" data-lm-blocktype="container"></div>'},onRendered:function(t,e){e||this.addSettings(t)},hasChanged:function(t,e){var n=this.block.find("span.title > i:first-child");if((!n||!e||e.changeState)&&(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n)){var i=this.block.find("span.title");i&&o("i.fa.fa-circle-o.changes-indicator").top(i)}},addSettings:function(t){var e=r(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),n=o("div.container-wrapper.clearfix").top(t.block),i=o("div.container-title").bottom(n),a=o("div.container-actions").bottom(n);i.html('<span class="title">'+this.getType()+"</span>"),a.html('<span data-tip="'+s("GANTRY5_PLATFORM_JS_LM_SETTINGS","Container")+'" data-tip-place="top-left"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Container")+'" class="fa fa-cog" aria-hidden="true" data-lm-settings="'+e+'"></i></span>')}});e.exports=l},{"../../utils/get-ajax-url":281,"../../utils/translate":288,"./base":222,elements:34,"elements/zen":37,prime:203}],225:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),o=(t("elements"),t("../../utils/get-ajax-url").config,new i({inherits:a,options:{type:"grid"},constructor:function(t){a.call(this,t),this.on("changed",this.hasChanged)},layout:function(){return'<div class="g-grid nowrap" data-lm-id="'+this.getId()+'" '+this.dropzone()+'  data-lm-samewidth data-lm-blocktype="grid"></div>'},onRendered:function(){var t=this.block.parent();t&&"atoms"==t.data("lm-blocktype")&&this.block.removeClass("nowrap"),(t&&t.data("lm-root")||"container"==t.data("lm-blocktype")&&t.parent().data("lm-root"))&&this.removeDropzone()},hasChanged:function(t){var e=this.block.parent('[data-lm-blocktype="section"]'),n=!!e&&e.data("lm-id");this.changeState=t,e&&n&&this.options.builder&&this.options.builder.get(n).emit("changed",t,this)}}));e.exports=o},{"../../utils/get-ajax-url":281,"./base":222,elements:34,prime:203}],226:[function(t,e,n){e.exports={base:t("./base"),atom:t("./atom"),section:t("./section"),offcanvas:t("./offcanvas"),wrapper:t("./wrapper"),atoms:t("./atoms"),grid:t("./grid"),container:t("./container"),block:t("./block"),particle:t("./particle"),position:t("./position"),system:t("./system"),spacer:t("./spacer")}},{"./atom":220,"./atoms":221,"./base":222,"./block":223,"./container":224,"./grid":225,"./offcanvas":227,"./particle":228,"./position":229,"./section":230,"./spacer":231,"./system":232,"./wrapper":233}],227:[function(t,e,n){"use strict";var i=t("prime"),a=t("./section"),o=t("../../utils/get-ajax-url").config,r=t("../../utils/get-outline").getOutlineNameById,s=t("../../utils/translate"),l=new i({inherits:a,options:{type:"offcanvas",attributes:{name:"Offcanvas Section"}},layout:function(){var t=o(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e="",n="";if(this.hasInheritance()){var i=r(this.inherit.outline);e='<div class="g-inherit g-section-inherit"><div class="g-inherit-content">'+s("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+i+"</strong>")+"</div></div>",n=" g-inheriting g-inheriting-"+this.inherit.include.join(" g-inheriting-")}return'<div class="offcanvas-section'+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'"><div class="section-header clearfix"><h4 class="float-left" title="'+this.getAttribute("name")+'">'+this.getAttribute("name")+'</h4><div class="section-actions float-right"><span data-tip="'+s("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Offcanvas")+'" data-tip-place="top-right"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Offcanvas")+'" class="fa fa-plus" aria-hidden="true"></i></span> <span class="section-settings" data-tip="'+s("GANTRY5_PLATFORM_JS_LM_SETTINGS","Offcanvas")+'" data-tip-place="top-right"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Offcanvas")+'" class="fa fa-cog" aria-hidden="true" data-lm-settings="'+t+'"></i></span></div></div>'+e+"</div>"},getId:function(){return this.id||(this.id=this.options.type)}});e.exports=l},{"../../utils/get-ajax-url":281,"../../utils/get-outline":282,"../../utils/translate":288,"./section":230,prime:203}],228:[function(u,d,t){(function(t){"use strict";var e=u("prime"),i=u("elements"),n=u("./atom"),a=(u("mout/function/bind"),u("mout/number/enforcePrecision")),o=u("mout/object/forOwn"),r=u("../../utils/get-ajax-url").config,s=u("../../utils/get-outline").getOutlineNameById,l=u("../../utils/translate"),c=new e({inherits:n,options:{type:"particle"},constructor:function(t){n.call(this,t)},layout:function(){var t=r(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e=this.getSubType()?'data-lm-blocksubtype="'+this.getSubType()+'"':"",n="";return this.hasInheritance()&&(n=" g-inheriting",this.inherit.include.length&&(n+=" g-inheriting-"+this.inherit.include.join(" g-inheriting-"))),'<div class="'+this.getType()+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" '+e+'><span><span class="icon" '+this.addInheritanceTip(!0)+'><i class="fa '+this.getIcon()+'" aria-hidden="true"></i></span><span class="title">'+this.getTitle()+'</span><span class="font-small">'+(this.getKey()||this.getSubType()||this.getType())+'</span></span><div class="float-right"><span class="particle-size"></span> <i aria-label="'+l("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Particle")+'" class="fa fa-cog" aria-hidden="true" data-lm-nodrag data-lm-settings="'+t+'"></i></div></div>'},enableInheritance:function(){if(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.hasInheritance()){s(this.inherit.outline);var n=this.block.find(".icon");this.block.addClass("g-inheriting"),this.inherit.include.length&&this.block.addClass("g-inheriting-"+this.inherit.include.join(" g-inheriting-")),this.block.find(".icon .fa").attribute("class","fa "+this.getIcon()),o(this.getInheritanceTip(),function(t,e){n.data(e,t)}),t.G5.tips.reload()}},disableInheritance:function(){var n=this.block.find(".icon");this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.removeClass("g-inheriting"),this.block.find(".icon .fa").attribute("class","fa "+this.getIcon()),o(this.getInheritanceTip(),function(t,e){n.data(e,null)}),t.G5.tips.reload()},refreshInheritance:function(){this.block[this.hasInheritance()?"removeClass":"addClass"]("g-inheritance"),this.hasInheritance()&&this.block.attribute("class",this.cleanKlass(this.block.attribute("class")))},addInheritanceTip:function(t){var e=this.getInheritanceTip();if(t){var n="";o(e,function(t,e){n+="data-"+e+'="'+t+'" '}),e=n}return this.hasInheritance()?e:""},getInheritanceTip:function(){var t=s(this.inherit?this.inherit.outline:null),e=this.inherit.particle||"",n=(this.inherit.include||[]).join(", ");return{tip:l("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+t+"</strong>")+"<br />ID: "+e+"<br />Replace: "+n,"tip-offset":-10,"tip-place":"top-right"}},cleanKlass:function(t){return(t=(t||"").split(" ")).filter(function(t){return!t.match(/^g-inheriting-/)}).join(" ")},setLabelSize:function(t){var e=this.block.find(".particle-size");if(!e)return!1;e.text(a(t,1)+"%")},onRendered:function(t,e){var n=e.getSize()||100;!i('[data-lm-disabled][data-lm-subtype="'+this.getSubType()+'"]')&&0!==this.getAttribute("enabled")||this.disable(),this.setLabelSize(n),e.on("resized",this.bound("onParentResize"))},getParent:function(){var t=this.block.parent("[data-lm-id]");return this.options.builder.get(t.data("lm-id"))},onParentResize:function(t){this.setLabelSize(t)},getIcon:function(){if(this.hasInheritance())return"fa-lock";var t=this.getType(),e=this.getSubType(),n=i('.particles-container [data-lm-blocktype="'+t+'"][data-lm-subtype="'+e+'"]');return n?n.data("lm-icon"):"fa-cube"},getLimits:function(t){if(!t)return!1;var e=t.block.nextSibling()||t.block.previousSibling()||!1;if(!e)return[100,100];var n=this.options.builder.get(e.data("lm-id"));return[5,this.getParent().getSize()+n.getSize()-5]}});d.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/get-ajax-url":281,"../../utils/get-outline":282,"../../utils/translate":288,"./atom":220,elements:34,"mout/function/bind":92,"mout/number/enforcePrecision":123,"mout/object/forOwn":133,prime:203}],229:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/string/trim"),o=t("./particle"),r=0,s=new i({inherits:o,options:{type:"position"},constructor:function(t){++r,o.call(this,t),this.setAttribute("title",this.getTitle()),this.setAttribute("key",this.getKey()),this.isNew()&&--r},getTitle:function(){return a(this.options.title||"Position "+r)},getKey:function(){return this.getAttribute("key")||a(this.getTitle()).replace(/\s/g,"-").toLowerCase()},updateKey:function(t){return this.options.key=t||this.getKey(),this.block.find(".font-small").text(this.getKey()),this}});e.exports=s},{"./particle":228,"mout/string/trim":173,prime:203}],230:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),o=(t("prime-util/prime/bound"),t("./grid")),r=t("elements"),s=t("elements/zen"),l=t("mout/function/bind"),c=t("mout/object/forOwn"),u=t("../../utils/get-ajax-url").config,d=t("../../utils/get-outline").getOutlineNameById,h=t("../../utils/translate");t("elements/insertion");var p=new i({inherits:a,options:{},constructor:function(t){this.grid=new o,a.call(this,t),this.on("done",this.bound("onDone")),this.on("changed",this.hasChanged)},layout:function(){var t=u(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e="",n="";if(this.hasInheritance()){var i=d(this.inherit.outline);e=this.renderInheritanceLabel(i),n=" g-inheriting",this.inherit.include.length&&(n+=" g-inheriting-"+this.inherit.include.join(" g-inheriting-"))}return'<div class="section'+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" data-lm-blocksubtype="'+this.getSubType()+'"><div class="section-header clearfix"><h4 class="float-left" title="'+this.getTitle()+'">'+this.getTitle()+'</h4><div class="section-actions float-right"><span class="section-addrow" data-tip="'+h("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Section")+'" data-tip-place="top-right"><i aria-label="'+h("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Section")+'" class="fa fa-plus" aria-hidden="true"></i></span> <span class="section-settings" data-tip="'+h("GANTRY5_PLATFORM_JS_LM_SETTINGS","Section")+'" data-tip-place="top-right"><i aria-label="'+h("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Section")+'" class="fa fa-cog" aria-hidden="true" data-lm-settings="'+t+'"></i></span></div></div>'+e+"</div>"},adopt:function(t){r(t).insert(this.block.find(".g-grid"))},renderInheritanceLabel:function(t){var e=h("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+t+"</strong>");return this.block&&this.getParent()&&(e=""),'<div class="g-inherit g-section-inherit"><div class="g-inherit-content" '+this.addInheritanceTip(!0)+'><i class="fa fa-lock" aria-hidden="true"></i> '+e+"</div></div>"},enableInheritance:function(){if(this.hasInheritance()&&(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.addClass("g-inheriting"),this.inherit.include.length&&this.block.addClass("g-inheriting-"+this.inherit.include.join(" g-inheriting-")),!this.block.find("> .g-inherit"))){var t=s("div"),e=d(this.inherit.outline),n=this.renderInheritanceLabel(e);t.html(n).children().after(this.block.find("> .section-header"))}},disableInheritance:function(){if(this.block.find("> .g-inherit")){var t=this.block.find("> .g-inherit.g-section-inherit");t&&t.remove()}this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.removeClass("g-inheriting")},refreshInheritance:function(){if(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.hasInheritance()){this.enableInheritance();var t=this.block.find("> .g-inherit");if(t){var e=d(this.inherit.outline),n=s("div").html(this.renderInheritanceLabel(e));t&&n&&t.html(n.children().html())}}},addInheritanceTip:function(t){var e=this.getInheritanceTip();if(t){var n="";c(e,function(t,e){n+="data-"+e+'="'+t+'" '}),e=n}return this.hasInheritance()?e:""},getInheritanceTip:function(){var t=this.inherit?this.inherit.outline:null,e=d(t),n=(this.inherit.include||[]).join(", ");return{tip:h("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+e+"</strong>")+"<br />Outline ID: "+t+"<br />Replace: "+n,"tip-offset":-2,"tip-place":"top-right"}},cleanKlass:function(t){return(t=(t||"").split(" ")).filter(function(t){return!t.match(/^g-inheriting-/)}).join(" ")},hasChanged:function(t,e){var n=this.block.find("h4 > i:first-child");n&&e&&!e.changeState||(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n&&s("i.fa.fa-circle-o.changes-indicator").top(this.block.find("h4")))},onDone:function(t){this.block.search("[data-lm-id]")||(this.grid.insert(this.block,"bottom"),this.options.builder.add(this.grid));var e=this.block.find(".fa-plus");e&&e.on("click",l(function(t){if(t&&t.preventDefault(),this.block.find(".g-grid:last-child:empty"))return!1;this.grid=new o,this.grid.insert(this.block.find('[data-lm-blocktype="container"]')?this.block.find('[data-lm-blocktype="container"]'):this.block,"bottom"),this.options.builder.add(this.grid)},this)),this.refreshInheritance()},getParent:function(){var t=this.block.parent("[data-lm-id]");return t?this.options.builder.get(t.data("lm-id")):null},getLimits:function(t){if(!t)return!1;var e=t.block.nextSibling()||t.block.previousSibling()||!1;if(!e)return[100,100];var n=this.options.builder.get(e.data("lm-id"));return"block"===n.getType()&&[5,this.getParent().getSize()+n.getSize()-5]}});e.exports=p},{"../../utils/get-ajax-url":281,"../../utils/get-outline":282,"../../utils/translate":288,"./base":222,"./grid":225,elements:34,"elements/insertion":35,"elements/zen":37,"mout/function/bind":92,"mout/object/forOwn":133,prime:203,"prime-util/prime/bound":199}],231:[function(t,e,n){"use strict";var i=new(t("prime"))({inherits:t("./particle"),options:{type:"spacer",title:"Spacer",attributes:{}}});e.exports=i},{"./particle":228,prime:203}],232:[function(t,e,n){"use strict";var i=new(t("prime"))({inherits:t("./particle"),options:{type:"system",attributes:{}}});e.exports=i},{"./particle":228,prime:203}],233:[function(t,e,n){"use strict";var i=t("prime"),a=t("./section"),o=t("../../utils/get-ajax-url").config,r=new i({inherits:a,options:{type:"wrapper",attributes:{name:"Wrapper"}},layout:function(){o(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId());return'<div class="wrapper-section" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" data-lm-blocksubtype="'+this.getSubType()+'"></div>'},hasChanged:function(){},getSize:function(){return!1},getId:function(){return this.id||(this.id=this.options.type)}});e.exports=r},{"../../utils/get-ajax-url":281,"./section":230,prime:203}],234:[function(t,e,n){"use strict";var i=t("prime"),u=t("elements"),a=t("prime/emitter"),o=t("./blocks/"),d=(t("mout/object/forOwn"),t("mout/collection/forEach")),r=t("mout/collection/size"),s=(t("mout/lang/isArray"),t("mout/array/flatten"),t("./id")),l=t("mout/object/set"),c=t("mout/object/unset"),h=t("mout/object/get"),p=t("mout/object/deepFillIn"),f=t("mout/object/omit");t("elements/attributes"),t("elements/traversal");t("mout/string/rpad"),t("mout/string/repeat");u.implement({empty:function(){return this.forEach(function(t){for(var e;e=t.firstChild;)t.removeChild(e)})}});var m=new i({inherits:a,constructor:function(t){return t&&this.setStructure(t),this.map={},this},setStructure:function(t){try{this.structure="object"==typeof t?t:JSON.parse(t)}catch(t){console.error("Parsing error:",t)}},add:function(t){var e="string"==typeof t?t:t.id;l(this.map,e,t),t.isNew(!1)},remove:function(t){t="string"==typeof t?t:t.id,c(this.map,t)},get:function(t){var e="string"==typeof t?t:t.id;return h(this.map,e,t)},load:function(t){return this.recursiveLoad(t),this.emit("loaded",t),this},serialize:function(t,n){var i=[];if(t=t||u("[data-lm-root]")){var a,o,r,s,l,c,e=t.search((n?"":"> ")+"[data-lm-id]");return d(e,function(t){if(t=u(t),a=t.data("lm-id"),o=t.data("lm-blocktype"),r=t.data("lm-blocksubtype")||!1,l=t.search("> [data-lm-id]"),c=n?!!l&&l.map(function(t){return u(t).data("lm-id")}):l?this.serialize(t):[],s={id:a,type:o,subtype:r,title:h(this.map,a)?h(this.map,a).getTitle():"Untitled",attributes:h(this.map,a)?h(this.map,a).getAttributes():{},inherit:h(this.map,a)?h(this.map,a).getInheritance():{},children:c},n){var e={};e[a]=s,s=e}i.push(s)},this),i}},insert:function(t,e,n){var i=u("[data-lm-root]");if(i){o[e.type]||console[console.error?"error":"log"](e.type+" does not exist");var a=new(o[e.type]||o.section)(p({id:t,attributes:{},inherit:{},subtype:e.subtype||!1,builder:this},f(e,"children")));return n?a.block.insert(u('[data-lm-id="'+n+'"]')):a.block.insert(i),"block"===a.getType()&&a.setSize(),this.add(a),a.emit("rendered",a,n?h(this.map,n):null),a}},reset:function(t){this.map={},this.setStructure(t||{}),u("[data-lm-root]").empty(),this.load()},cleanupLonely:function(){var e,n,i=[],t=u("[data-lm-root] > .g-section > .g-grid > .g-block .g-grid > .g-block, [data-lm-root] > .g-section > .g-grid > .g-block > .g-block");if(t)return t.forEach(function(t){if(t=u(t),e=null,(n=t.parent().hasClass("g-grid"))&&t.siblings())return!1;n&&(i.push(t.data("lm-id")),e=t.parent()),i.push(t.data("lm-id")),t.children().before(e||t),(e||t).remove()}),i},recursiveLoad:function(t,n,i,a){t=t||this.structure,i=i||0,a=a||!1,n=n||this.insert,d(t,function(e){e.id||(e.id=s({builder:{map:this.map},type:e.type,subtype:e.subtype})),console&&console.log,this.emit("loading",n.call(this,e.id,e,a,i)),e.children&&r(e.children)&&(i++,d(e.children,function(t){this.recursiveLoad([t],n,i,e.id)},this)),this.get(e.id).emit("done",this.get(e.id)),i--},this)}});e.exports=m},{"./blocks/":226,"./id":237,elements:34,"elements/attributes":29,"elements/traversal":36,"mout/array/flatten":73,"mout/collection/forEach":89,"mout/collection/size":91,"mout/lang/isArray":104,"mout/object/deepFillIn":126,"mout/object/forOwn":133,"mout/object/get":134,"mout/object/omit":141,"mout/object/set":142,"mout/object/unset":145,"mout/string/repeat":167,"mout/string/rpad":170,prime:203,"prime/emitter":202}],235:[function(t,e,n){"use strict";var i=t("../ui/drag.events"),a=t("prime"),o=(t("prime/emitter"),t("prime-util/prime/bound")),r=t("prime-util/prime/options"),s=t("mout/function/bind"),l=t("mout/lang/isString"),f=t("mout/math/map"),m=t("mout/math/clamp"),g=t("mout/number/enforcePrecision"),c=t("mout/object/get"),v=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var u=new a({mixin:[o,r],DRAG_EVENTS:i,options:{minSize:5},constructor:function(t,e){this.setOptions(e),this.history=this.options.history||{},this.builder=this.options.builder||{},this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}}},getBlock:function(t){return c(this.builder.map,l(t)?t:v(t).data("lm-id")||"")},getAttribute:function(t,e){return this.getBlock(t).getAttribute(e)},getSize:function(t){return this.getAttribute(v(t),"size")},start:function(t,e,n,i){if(t&&t.type.match(/^touch/i)&&t.preventDefault(),window.G5.tips.hide(e[0]),t.which&&1!==t.which)return!0;t.preventDefault(),this.element=v(e),this.siblings={occupied:0,elements:n,next:this.element.nextSibling(),prevs:this.element.previousSiblings(),sizeBefore:0},1<this.siblings.elements.length&&(this.siblings.occupied-=this.getSize(this.siblings.next),this.siblings.elements.forEach(function(t){this.siblings.occupied+=this.getSize(t)},this)),this.siblings.prevs&&this.siblings.prevs.forEach(function(t){this.siblings.sizeBefore+=this.getSize(t)},this),this.origin={size:this.getSize(this.element),maxSize:this.getSize(this.element)+this.getSize(this.siblings.next),x:t.changedTouches?t.changedTouches[0].pageX:t.pageX+6,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY};var a=this.element[0].getBoundingClientRect(),o=this.element.parent()[0].getBoundingClientRect();this.origin.offset={clientRect:a,parentRect:{left:o.left,right:o.right},x:this.origin.x-a.right,y:a.top-this.origin.y,down:i},this.origin.offset.parentRect.left=this.element.parent().find("> [data-lm-id]:first-child")[0].getBoundingClientRect().left,this.origin.offset.parentRect.right=this.element.parent().find("> [data-lm-id]:last-child")[0].getBoundingClientRect().right,this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){v(document).on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){v(document).on(t,this.bound("stop"))},this))},move:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault();var e=t.clientX||t.touches[0].clientX||0,n=t.clientY||t.touches[0].clientY||0,i=this.origin.offset.parentRect,a=(this.lastX||e)-e,o=(this.lastY||n)-n;this.direction=(Math.abs(a)>Math.abs(o)&&0<a?"left":Math.abs(a)>Math.abs(o)&&a<0&&"right")||Math.abs(o)>Math.abs(a)&&0<o&&"up"||"down";var r,s=100-this.siblings.occupied,l=e+(this.siblings.prevs?this.siblings.prevs.length:this.origin.offset.x-this.origin.offset.down),c=m(l,i.left,i.right);r=f(c,i.left,i.right,0,100),r-=this.siblings.sizeBefore,r=g(m(r,this.options.minSize,this.origin.maxSize-this.options.minSize),0),s=g(s-r,0),this.getBlock(this.element).setSize(r,!0),this.getBlock(this.siblings.next).setSize(s,!0);var u=this.element.siblings(),d=u?u.length+1:1;if(3==d||6==d||7==d||8==d||9==d||11==d||12==d){var h,p=0;(h=v([u,this.element])).forEach(function(t,e){t=this.getBlock(t),(r=t.getSize())%1&&(r=g(100/d,0),t.setSize(r,!0)),p+=r,h.length==e+1&&100!=p&&(s=100-p,t.setSize(r+s,!0))},this)}this.lastX=e,this.lastY=n},stop:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault(),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){v(document).off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){v(document).off(t,this.bound("stop"))},this)),t.target.matches("[data-lm-back], [data-lm-forward]")||this.origin.size!==this.getSize(this.element)&&this.history.push(this.builder.serialize(),this.history.get().preset)},evenResize:function(t,e){var n,i=t.length,a=g(100/i,4);void 0===e&&(e=!0),t.forEach(function(t){t=v(t),(n=this.getBlock(t))&&n.hasAttribute("size")&&"function"==typeof n.getSize?n[e?"setAnimatedSize":"setSize"](a,a!==n.getSize()):t&&t[e?"animate":"style"]({flex:"0 1 "+a+"%"})},this)}});e.exports=u},{"../ui/drag.events":262,"../utils/elements.utils":276,"elements/delegation":31,"elements/events":33,"mout/function/bind":92,"mout/lang/isString":112,"mout/math/clamp":117,"mout/math/map":119,"mout/number/enforcePrecision":123,"mout/object/get":134,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],236:[function(t,e,n){var i=t("prime"),a=t("prime/emitter"),o=t("mout/array/slice"),r=t("mout/object/merge"),s=t("mout/lang/deepEquals"),l=t("deep-diff").diff,c=new i({inherits:a,constructor:function(t,e){this.index=0,t=r({},t),e=r({},e),this.setSession(t,e)},undo:function(){if(this.index){this.index--;var t=this.get();return this.emit("undo",t,this.index),t}},redo:function(){if(this.index!=this.session.length-1){this.index++;var t=this.get();return this.emit("redo",t,this.index),t}},reset:function(){this.index=0;var t=this.get();return this.emit("reset",t,this.index),t},push:function(t,e){t=r({},t),e=r({},e);var n=this.index<this.session.length-1;return this.index<this.session.length-1&&(this.session=o(this.session,0,-(this.session.length-1-this.index))),t={time:+new Date,data:t,preset:e},this.equals(t.data)||(this.session.push(t),this.index=this.session.length-1,this.emit("push",t,this.index,n)),t},get:function(t){return this.session[void 0!==t?t:this.index]||!1},equals:function(t,e){return e=e||this.get().data,s(t,e)},diff:function(t,e){return!t&&!e&&this.session.length<=1?"Not enough sessions to diff":(e=e||this.get(),t=t||this.get(this.index-1),l(t,e))},setSession:function(t,e){return t=t?[{time:+new Date,data:r({},t),preset:e}]:[],this.session=t,this.index=0,this.session},import:function(){},export:function(){}});e.exports=c},{"deep-diff":27,"mout/array/slice":83,"mout/lang/deepEquals":102,"mout/object/merge":138,prime:203,"prime/emitter":202}],237:[function(t,e,n){"use strict";var s=t("mout/object/keys"),l=t("mout/array/contains"),c=t("mout/random/randInt");e.exports=function(t){var e,n,i=t.builder?s(t.builder.map):{},a=t.type,o=t.subtype,r=[];for("particle"!=a&&r.push(a),o&&r.push(o),e=r.join("-");(n=c(1e3,9999))&&l(i,e+"-"+n););return e+"-"+n}},{"mout/array/contains":66,"mout/object/keys":137,"mout/random/randInt":155}],238:[function(t,e,n){"use strict";var m,g,v,i,a=t("elements/domready"),b=t("elements/attributes"),y=t("../fields/submit"),w=t("../ui").modal,x=t("../ui").toastr,k=(t("./particles-sidebar"),t("agent")),S=t("elements/zen"),C=t("mout/array/contains"),E=t("mout/collection/size"),r=t("mout/string/trim"),s=t("mout/string/replace"),l=t("mout/string/properCase"),T=t("mout/number/enforcePrecision"),O=t("../utils/get-ajax-suffix"),I=t("../utils/get-ajax-url").parse,d=(t("../utils/get-ajax-url").global,t("../utils/flags-state")),o=t("./builder"),c=(t("../utils/history"),t("../utils/field-validation"),t("./history")),h=t("./layoutmanager"),u=t("../utils/save-state"),_=t("../utils/translate");t("../ui/popover"),t("./inheritance"),m=new o,v=new c,i=new u,a(function(){var t=b("body");t.delegate("click","[data-lm-back]",function(t,e){if(t&&t.preventDefault(),b(e).hasClass("disabled"))return!1;v.undo()}),t.delegate("click","[data-lm-forward]",function(t,e){if(t&&t.preventDefault(),b(e).hasClass("disabled"))return!1;v.redo()}),v.on("push",function(t,e,n){var i={back:b("[data-lm-back]"),forward:b("[data-lm-forward]")};e&&i.back&&i.back.hasClass("disabled")&&i.back.removeClass("disabled"),n&&i.forward&&!i.forward.hasClass("disabled")&&i.forward.addClass("disabled"),g.updatePendingChanges()}),v.on("undo",function(t,e){var n=b("#lm-no-layout"),i=b(".layout-title .title small"),a=t.preset.name||"Default",o={back:b("[data-lm-back]"),forward:b("[data-lm-forward]")};n&&n.style({display:E(t.data)?"none":"block"}),i&&i.text("("+l(r(s(a,[/_/g,/\//g],[" "," / "])))+")"),m.reset(t.data),o.forward.removeClass("disabled"),e||o.back.addClass("disabled"),g.singles("disable"),g.updatePendingChanges()}),v.on("redo",function(t,e){var n=b("#lm-no-layout"),i=b(".layout-title .title small"),a=t.preset.name||"Default",o={back:b("[data-lm-back]"),forward:b("[data-lm-forward]")};n&&n.style({display:E(t.data)?"none":"block"}),i&&i.text("("+l(r(s(a,[/_/g,/\//g],[" "," / "])))+")"),m.reset(t.data),o.back.removeClass("disabled"),e==this.session.length-1&&o.forward.addClass("disabled"),g.singles("disable"),g.updatePendingChanges()})}),a(function(){var n,f=b("body"),c=b("[data-lm-root]");g=new h("[data-lm-container]",{delegate:'[data-lm-root] .g-grid > .g-block > [data-lm-blocktype]:not([data-lm-nodrag]) !> .g-block, .g5-lm-particles-picker [data-lm-blocktype], [data-lm-root] [data-lm-blocktype="section"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="section"] > [data-lm-blocktype="container"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="offcanvas"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="offcanvas"] > [data-lm-blocktype="container"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag])',droppables:"[data-lm-dropzone]",exclude:".section-header .button, .section-header .fa, .lm-newblocks .float-right .button, [data-lm-nodrag], [data-lm-disabled]",resize_handles:"[data-lm-root] .g-grid > .g-block:not(:last-child)",builder:m,history:v,savestate:i}),e.exports.layoutmanager=g,c&&((n=JSON.parse(c.data("lm-root"))).name&&(n=n.layout),m.setStructure(n),m.load(),g.history.setSession(m.serialize(),JSON.parse(c.data("lm-preset"))),g.savestate.setSession(m.serialize(null,!0))),f.delegate("click",".g-tabs a",function(t,e){return t.preventDefault(),!1}),f.delegate("keydown",".g-tabs a",function(t,e){var n=t.which?t.which:t.keyCode;if(32==n||13==n)return t.preventDefault(),f.emit("mouseup",t),!1}),f.delegate("mouseup",".g-tabs a",function(t,n){n=b(n),t.preventDefault();var i=0,e=n.parent(".g-tabs"),a=e.siblings(".g-panes");e.search("a").forEach(function(t,e){t==n[0]&&(i=e+1)}),a.find("> .active").removeClass("active"),e.find("> ul > .active").removeClass("active"),a.find("> .g-pane:nth-child("+i+")").addClass("active"),e.find("> ul > li:nth-child("+i+")").addClass("active"),a.search("> [aria-expanded]")&&a.search("> [aria-expanded]").attribute("aria-expanded","false"),e.search("> [aria-expanded]")&&e.search("> [aria-expanded]").attribute("aria-expanded","false"),a.find("> .g-pane:nth-child("+i+")").attribute("aria-expanded","true"),e.find("> ul >li:nth-child("+i+") [aria-expanded]")&&e.find("> ul > li:nth-child("+i+") > [aria-expanded]").attribute("aria-expanded","true")}),f.delegate("statechangeBefore","[data-g5-lm-picker]",function(){w.close()}),f.on("statechangeAfter",function(t,e){if(!(c=b("[data-lm-root]")))return!0;n=JSON.parse(c.data("lm-root")),m.setStructure(n),m.load(),g.refresh(),g.history.setSession(m.serialize(),JSON.parse(c.data("lm-preset"))),g.savestate.setSession(m.serialize(null,!0)),g.eraser.element=b("[data-lm-eraseblock]"),g.eraser.hide(!0)}),f.delegate("input",".sidebar-block .search input",function(t,e){var n,i,a=b(e).value().toLowerCase(),o=b(".sidebar-block [data-lm-blocktype]");if(!o)return!1;o.style({display:"none"}).forEach(function(t){t=b(t),i=t.data("lm-blocktype").toLowerCase(),n=r(t.text()).toLowerCase(),i.substr(0,a.length)!=a&&!n.match(a)||t.style({display:"block"})},this)}),["click","touchend"].forEach(function(t){f.delegate(t,"[data-lm-samewidth]:not(:empty)",function(t,e){window.G5.tips.hide(e[0]);var n=e[0].getBoundingClientRect();if(!((t.clientX||t.pageX||t.changedTouches[0].pageX||0)<n.width+n.left)){var i,a=e.search('> [data-lm-blocktype="block"]');a&&1!=a.length&&(a.forEach(function(t){i=b(t).data("lm-id"),m.get(i).setSize(100/a.length,!0)}),v.push(m.serialize(),v.get().preset))}})}),f.delegate("mouseover","[data-lm-samewidth]:not(:empty)",function(t,e){var n=e[0].getBoundingClientRect(),i=t.clientX||t.touches&&t.touches[0].clientX||0,a=i+5>n.width+n.left,o=i-5<n.left;if(a||o){var r=_(a?"GANTRY5_PLATFORM_JS_LM_GRID_EQUALIZE":"GANTRY5_PLATFORM_JS_LM_GRID_SORT_MOVE");e.data("tip",r).data("tip-offset",-30),window.G5.tips.get(e[0]).content(r).place(a?"top-left":"top-right").show()}}),f.delegate("mouseout","[data-lm-samewidth]:not(:empty)",function(t,e){window.G5.tips.hide(e[0])}),f.delegate("click","[data-lm-clear]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n={};switch(e.data("lm-clear")){case"keep-inheritance":n={save:!0,dropLastGrid:!1,emptyInherits:!1};break;case"full":default:n={save:!0,dropLastGrid:!1,emptyInherits:!0}}g.clear(null,n)});var u=!1;f.delegate("mouseover","[data-lm-switcher]",function(t,e){t&&t.preventDefault&&t.preventDefault(),(u=e).PopoverDefined||e.getPopover({type:"async",width:"500",url:I(e.data("lm-switcher")+O()),allowElementsClick:".g-tabs a"})}),f.delegate("keydown","[data-switch]",function(t,e){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),f.emit("mousedown",t))}),f.delegate("change",'[data-g-inherit="outline"]',function(t,e){var n=e.parent(".g-pane").find('input[type="checkbox"][data-g-preserve="outline"]');n&&n.checked(!1)}),f.delegate("change",'[data-g-preserve="outline"]',function(t,e){var n=e.parent(".g-pane").find('input[type="checkbox"][data-g-inherit="outline"]');n&&n.checked(!1)}),f.delegate("mousedown","[data-switch]",function(t,s){if(t&&t.preventDefault&&t.preventDefault(),s.parent(".g5-popover-content").find("[data-switch] i"))return!1;s.showIndicator();var e=b("[data-lm-preset]"),n=s.parent(".g-pane").find('input[type="checkbox"][data-g-preserve]'),i=s.parent(".g-pane").find('input[type="checkbox"][data-g-inherit]'),a=n?"post":"get",o={};if(n=n&&n.checked(),i=i&&i.checked(),n){var r=g;r.singles("cleanup",r.builder,!0),r.savestate.setSession(r.builder.serialize(null,!0)),o.preset=e&&e.data("lm-preset")?e.data("lm-preset"):"default",o.layout=JSON.stringify(r.builder.serialize())}i&&(o.inherit=1);var l=I(s.data("switch")+O());k(a,l,o,function(t,e){if(s.hideIndicator(),e.body.success){if(e.body.message&&!d.get("lm:switcher:"+window.btoa(l),!1))return d.warning({message:e.body.message,callback:function(t,e){var n=e.find("[data-g-delete-confirm]"),i=e.find("[data-g-delete-cancel]");n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;d.get("lm:switcher:"+window.btoa(l),!0),b([n,i]).attribute("disabled"),f.emit("mousedown",{target:s}),w.close()}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;b([n,i]).attribute("disabled"),d.get("lm:switcher:"+window.btoa(l),!1),w.close(),u&&setTimeout(function(){u.getPopover().show()},5)}))}}),!1;var n=e.body.preset||{name:"default"},i=e.body.title||"Default",a=e.body.data,o=b("#lm-no-layout"),r=b(".layout-title .title small");c.data("lm-root",JSON.stringify(a)).empty(),c.data("lm-preset",n),o&&o.style({display:"none"}),r&&r.text("("+i+")"),m.setStructure(a),m.load(),v.push(m.serialize(),JSON.parse(n)),b("[data-lm-switcher]").getPopover().hideAll().destroy()}else w.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})}),f.delegate("click","[data-lm-settings]",function(t,e){var n,i,a=(e=b(e)).data("lm-blocktype"),o=e.data("lm-settings"),d=null;if("grid"===a){var r=t.clientX||t.touches&&t.touches[0].clientX||0,s=e[0].getBoundingClientRect();if(r+4-s.left<s.width)return!1}n=(e=e.parent("[data-lm-blocktype]")).parent("[data-lm-blocktype]"),i=e.parent('[data-lm-blocktype="section"]'),a=e.data("lm-blocktype");var h=e.data("lm-id"),p=!!n&&n.data("lm-id"),l=!!n&&n.data("lm-blocktype");C(["block","grid"],a)||((d={}).id=m.get(e.data("lm-id")).getId()||null,d.type=m.get(e.data("lm-id")).getType()||e.data("lm-blocktype")||!1,d.subtype=m.get(e.data("lm-id")).getSubType()||e.data("lm-blocksubtype")||!1,d.title=(e.find("h4")||e.find(".title")).text()||d.type||"Untitled",d.options=m.get(e.data("lm-id")).getAttributes()||{},d.inherit=m.get(e.data("lm-id")).getInheritance()||{},d.block=n&&"wrapper"!==l&&m.get(n.data("lm-id")).getAttributes()||{},d.size_limits=m.get(e.data("lm-id")).getLimits(!!n&&m.get(n.data("lm-id"))),d.parent=i?i.data("lm-id"):null,d.type||delete d.type,d.subtype||delete d.subtype,E(d.options)||delete d.options,E(d.inherit)||delete d.inherit,E(d.block)||delete d.block),w.open({content:"Loading",method:"post",data:d,overlayClickToClose:!1,remote:I(o+O()),remoteLoaded:function(t,i){if(t.body.success){var e=i.elements.content.find("form"),a=S("div").html(t.body.html).find("form"),n=i.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]');if(!e&&!a||!n)return!0;var o=i.elements.content.find(".g-urltemplate");o&&f.emit("input",{target:o});var r=i.elements.content.find('[name="block[size]"]');if(r&&d.size_limits){var s=i.elements.content.find(".blocksize-note"),l=T(d.size_limits[0],1),c=T(d.size_limits[1],1);if(r.attribute("min",l),r.attribute("max",c),s){var u=s.html();u=(u=u.replace(/#min#/g,l)).replace(/#max#/g,c),s.html(u),s.find(".blocksize-"+(l==c?"range":"fixed")).addClass("hidden")}r.on("input",function(){r[0].setCustomValidity(parseFloat(r.value())>=l&&parseFloat(r.value())<=c?"":_("GANTRY5_PLATFORM_JS_LM_SIZE_LIMITS_RANGE"))})}n.on("click",function(t){t.preventDefault();var l=b(t.currentTarget);l.disabled(!0),l.hideIndicator(),l.showIndicator();var e=i.elements.content.find("form")[0].elements,n=y(e,i.elements.content);if(n.invalid.length)return l.disabled(!1),l.hideIndicator(),l.showIndicator("fa fa-fw fa-exclamation-triangle"),void x.error(_("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),_("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));k(a.attribute("method"),I(a.attribute("action")+O()),n.valid.join("&")||{},function(t,e){if(e.body.success){var n=m.get(h),i=null;if(n.setAttributes(e.body.data.options),n.hasAttribute("enabled")&&n[n.getAttribute("enabled")?"enable":"disable"](),"section"!==n.getType()&&(n.setTitle(e.body.data.title||"Untitled"),n.updateTitle(n.getTitle())),"position"===n.getType()&&n.updateKey(),e.body.data.block&&E(e.body.data.block)){var a,o=(i=m.get(p)).block.nextSibling()||i.block.previousSibling(),r=i.getSize();i.setAttributes(e.body.data.block),a=r-i.getSize(),i.setAnimatedSize(i.getSize()),o&&(o=m.get(o.data("lm-id"))).setAnimatedSize(parseFloat(o.getSize())+a,!0)}if(e.body.data.inherit&&(delete e.body.data.inherit.section,n.setInheritance(e.body.data.inherit),n.enableInheritance(),n.refreshInheritance()),e.body.data.children&&(g.clear(n.block,{save:!1,dropLastGrid:!!e.body.data.children.length,emptyInherits:!0}),m.recursiveLoad(e.body.data.children,m.insert,0,n.getId())),n.hasInheritance()&&!e.body.data.inherit&&(n.setInheritance({}),n.disableInheritance()),v.push(m.serialize(),v.get().preset),null!==l.data("apply-and-save")){var s=b("body").find(".button-save");s&&f.emit("click",{target:s})}w.close(),x.success(_("GANTRY5_PLATFORM_JS_PARTICLE_SETTINGS_APPLIED",n.getTitle()),_("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else w.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});l.hideIndicator()})})}else w.enableCloseByOverlay()}})})}),e.exports={$:b,builder:m,layoutmanager:g,history:v,savestate:i}},{"../fields/submit":219,"../ui":264,"../ui/popover":266,"../utils/field-validation":278,"../utils/flags-state":279,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/history":285,"../utils/save-state":287,"../utils/translate":288,"./builder":234,"./history":236,"./inheritance":239,"./layoutmanager":240,"./particles-sidebar":241,agent:1,"elements/attributes":29,"elements/domready":32,"elements/zen":37,"mout/array/contains":66,"mout/collection/size":91,"mout/number/enforcePrecision":123,"mout/string/properCase":165,"mout/string/replace":168,"mout/string/trim":173}],239:[function(t,e,n){"use strict";var b=t("elements"),i=t("elements/domready"),c=t("agent"),y=t("../../ui").modal,w=t("mout/lang/isArray"),x=t("mout/collection/forEach"),l=t("mout/object/filter"),u=t("mout/object/keys"),k=t("mout/collection/contains"),S=t("../../utils/get-ajax-suffix"),C=t("../../utils/get-ajax-url").parse,E=t("../../utils/get-ajax-url").global,T=(t("../../utils/get-outline").getOutlineNameById,t("../../utils/get-outline").getCurrentOutline),O={attributes:["g-settings-particle","g-settings-atom"],block:{panel:"g-settings-block-attributes",tab:"g-settings-block"},particles:"g-inherit-particle",atoms:"g-inherit-atom"};i(function(){var m=b("body"),g={},v={};m.delegate("change",'[name="inherit[outline]"]',function(t,e){var n=e.parent(".settings-param").find(".settings-param-title"),i=e.siblings().find(".g-item"),a=e.value(),u=b('[name="inherit[section]"]')?b('[name="inherit[section]"]').value():"",d=e.parent("[data-g-inheritance-settings]"),h=b('[data-multicheckbox-field="inherit[include]"]:checked')||[],p={list:b("#g-inherit-particle, #g-inherit-atom"),mode:b('[name="inherit[mode]"]:checked'),radios:b('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:b('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')};if(!i)return!0;var f=g[u]!==a||v[u]!==p.mode.value();f&&!a&&h.forEach(function(t){b(t).checked(!1),m.emit("change",{target:t})});var o=JSON.parse(d.data("g-inheritance-settings")),r={outline:a||T(),type:o.type||"",subtype:o.subtype||"",mode:p.mode.value(),inherit:a&&"inherit"===p.mode.value()?"1":"0"};r.id=o.id,n.showIndicator(),e.selectizeInstance.blur(),p.radios&&p.checked&&(f||(r.selected=p.checked.value(),r.id=p.checked.value(),p.list=!1));var s="atom"===r.type?"atoms":"layouts",l=p.list?s+"/list":s;c("POST",C(E(l)+S()),r,function(t,e){if(n.hideIndicator(),e.body.success){var o,r=e.body,s=d.find('[name="inherit[include]"]').value().split(","),l=d.search('[data-multicheckbox-field="inherit[include]"]').map(function(t){return b(t).value()}),c=y.getByID(y.getLast());x(O,function(t,a){t=t.panel||t,(t=w(t)?t:[t]).forEach(function(t){var e=k(s,a),n=k(l,a);if((e||!n)&&r.html[t]&&(o=c.find("#"+t))){o.html(r.html[t]);var i=o.search("[data-selectize]");i&&i.selectize()}})}),f&&h&&""===g[u]&&h.forEach(function(t){m.emit("change",{target:t})}),g[u]=a,v[u]=p.mode.value()}else y.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})}),m.delegate("change","#g-settings-inheritance [data-multicheckbox-field]",function(t,c){var u=b('[name="inherit[outline]"]');if(!u)return!0;u=u.value();var e=c.value(),d=c.checked(),h=t.noRefresh,p={mode:b('[name="inherit[mode]"]:checked'),radios:b('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:b('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')},f={panel:O[e]&&O[e].panel||O[e],tab:O[e]&&O[e].tab||O[e]};w(f.panel)||(f.panel=[f.panel],f.tab=[f.tab]),f.panel.forEach(function(t,e){var n=b("#"+t),i=b("#"+f.tab[e]+"-tab");if(!n||!i)return!0;function a(t){t||m.emit("change",{target:c.parent(".settings-block").find('[name="inherit[outline]"]')})}var o=n.find(".g-inherit"),r="clone"===p.mode.value();if(d&&u&&!r){var s=i.find(".fa-unlock");s&&s.removeClass("fa-unlock").addClass("fa-lock"),o&&o.show(),a(h)}else{var l=i.find(".fa-lock");l&&l.removeClass("fa-lock").addClass("fa-unlock"),o&&o.hide(),r&&a(h)}})}),m.delegate("change",'[name="inherit[mode]"], [name="inherit[particle]"], [name="inherit[atom]"]',function(t,e){var n=y.getByID(y.getLast()),i=n.find('[name="inherit[outline]"]'),a=n.search("[data-multicheckbox-field]")||[],o=!1;"inherit[mode]"===e.attribute("name")&&(o=!0),m.emit("change",{target:i,noRefresh:o}),a.forEach(function(t){m.emit("change",{target:t,noRefresh:o})})}),m.delegate("click","#g-inherit-particle .fa-info-circle, #g-inherit-atom .fa-info-circle",function(t,e){t.preventDefault();var n=y.getByID(y.getLast()).find('[name="inherit[outline]"]'),i=e.siblings('input[name="inherit[particle]"], input[name="inherit[atom]"]');if(!i||!n)return!1;var a="inherit[atom]"===i.name()?"atoms/instance":"layouts/particle";return y.open({content:"Loading",method:"post",data:{id:i.value(),outline:n.value()||T()},remote:C(E(a)+S()),remoteLoaded:function(t,e){t.body.success||y.enableCloseByOverlay()}}),!1}),m.delegate("mouseup",".g-tabs .fa-lock, .g-tabs .fa-unlock",function(t,e){if(!e.parent("li").hasClass("active"))return!1;var n=y.getByID(y.getLast()),i=e.hasClass("fa-lock"),a=e.parent("a").id().replace(/\-tab$/,""),o=u(l(O,function(t){return t===a||t.tab===a||k(t,a)})||[]).shift(),r=n.find('[data-multicheckbox-field][value="'+o+'"]'),s={mode:b('[name="inherit[mode]"]:checked'),radios:b('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:b('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')};if(r){if("clone"===s.mode.value()||s.radios&&!s.checked)return!1;r.checked(!i),m.emit("change",{target:r})}})})},{"../../ui":264,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/get-outline":282,agent:1,elements:34,"elements/domready":32,"mout/collection/contains":87,"mout/collection/forEach":89,"mout/lang/isArray":104,"mout/object/filter":130,"mout/object/keys":137}],240:[function(t,e,n){"use strict";var i=t("prime"),k=t("../utils/elements.utils"),h=t("mout/function/bind"),f=t("elements/zen"),a=t("prime/emitter"),o=t("prime-util/prime/bound"),r=t("prime-util/prime/options"),S=t("./blocks"),s=t("../ui/drag.drop"),l=t("../ui/eraser"),c=t("../utils/flags-state"),u=t("./drag.resizer"),C=t("mout/object/get"),d=t("mout/object/keys"),p=(t("mout/array/every"),t("mout/number/enforcePrecision")),m=(t("mout/lang/isArray"),t("mout/lang/deepEquals")),g=t("mout/collection/find"),v=(t("mout/lang/isObject"),t("mout/array/contains")),b=t("mout/collection/forEach"),E={disable:function(){var t=k('[data-lm-root] [data-lm-blocktype="grid"]');t&&t.removeClass("no-hover")},enable:function(){var t=k('[data-lm-root] [data-lm-blocktype="grid"]');t&&t.addClass("no-hover")},cleanup:function(e,n,t){var i=t?t.search("> .g-grid:empty"):k('[data-lm-blocktype="section"] > .g-grid:empty, [data-lm-blocktype="container"] > .g-grid:empty, [data-lm-blocktype="offcanvas"] > .g-grid:empty');i&&i.forEach(function(t){((t=k(t)).nextSibling("[data-lm-id]")||n)&&(e.remove(t.data("lm-id")),t.remove())})}},y=new i({mixin:[o,r],inherits:a,options:{},constructor:function(t,e){this.setOptions(e),(this.refElement=t)&&k(t)&&this.init(t)},init:function(){this.dragdrop=new s(this.refElement,this.options),this.resizer=new u(this.refElement,this.options),this.eraser=new l("[data-lm-eraseblock]",this.options),this.dragdrop.on("dragdrop:start",this.bound("start")).on("dragdrop:location",this.bound("location")).on("dragdrop:nolocation",this.bound("nolocation")).on("dragdrop:resize",this.bound("resize")).on("dragdrop:stop:erase",this.bound("removeElement")).on("dragdrop:stop",this.bound("stop")).on("dragdrop:stop:animation",this.bound("stopAnimation")),this.builder=this.options.builder,this.history=this.options.history,this.savestate=this.options.savestate||null,E.disable()},refresh:function(){this.refElement&&k(this.refElement)&&this.init()},singles:function(t,e,n,i){E[t](e,n,i)},clear:function(t,n){var i,a,o=t?(t.search("[data-lm-id]")||[]).map(function(t){return k(t).data("lm-id")}):[];n=n||{save:!0,dropLastGrid:!1,emptyInherits:!1},b(this.builder.map,function(t,e){o.length&&!v(o,e)||!n.emptyInherits&&t.block.parent(".g-inheriting")||(i=t.getType(),a=(a=t.block.find("> [data-lm-id]"))&&a.data("lm-blocktype"),v(["particle","spacer","position","widget","system","block"],i)&&"block"==i&&a&&"section"!==a&&"container"!==a?(this.builder.remove(e),t.block.remove()):!n.emptyInherits||"section"!=i&&"offcanvas"!=i&&"container"!=i||t.hasInheritance&&(t.inherit={},t.disableInheritance()))},this),this.singles("cleanup",this.builder,n.dropLastGrid,t),n.save&&this.history.push(this.builder.serialize(),this.history.get().preset)},updatePendingChanges:function(){var e,n,i,a=this.savestate.getData(),o=this.builder.serialize(null,!0),r=!1,t=m(a,o),s=k('[data-save="Layout"]'),l=(s.find("i"),s.find(".changes-indicator"));t&&l&&s.hideIndicator(),t||l||s.showIndicator("changes-indicator fa fa-fw fa-circle-o"),c.set("pending",!t),o.forEach(function(t){i=d(t)[0],e=g(a,function(t){return t[i]}),n=g(o,function(t){return t[i]}),r=!m(e,n),(i=this.builder.get(i))&&i.emit("changed",r)},this)},start:function(t,e){var n=k("[data-lm-root]"),i=k(e).position(),a=k(e)[0].getBoundingClientRect();this.block=null,this.mode=n.data("lm-root")||"page",n.addClass("moving");var o,r=k(e).data("lm-blocktype"),s=e[0].cloneNode(!0);if(this.placeholder||(this.placeholder=f("div.block.placeholder[data-lm-placeholder]")),this.placeholder.style({display:"none"}),s=k(s),this.original=s.after(e).style({display:s.hasClass("g-grid")?"flex":"block",opacity:.5}).addClass("original-placeholder").data("lm-dropzone",null),"grid"===r&&this.original.style({display:"flex"}),this.originalType=r,this.block=C(this.builder.map,e.data("lm-id")||"")||new S[r]({builder:this.builder,subtype:e.data("lm-subtype"),title:e.text()}),this.block.isNew()){var l=e.position();this.original.style({position:"fixed",opacity:.5}).style({left:a.left,top:a.top,width:l.width,height:l.height}),this.element=this.dragdrop.element,this.dragdrop.element=this.original}else{if(e.style({position:"fixed",zIndex:2500,opacity:.5,margin:0,width:Math.ceil(i.width),height:Math.ceil(i.height),left:a.left,top:a.top}).find("[data-lm-blocktype]"),"grid"===this.block.getType()){var c=this.block.block.siblings(":not(.original-placeholder):not(.section-header):not(.g-inherit):not(:empty)");c&&c.search("[data-lm-id]").style({"pointer-events":"none"})}this.placeholder.before(e),this.eraser.show()}"grid"===r&&(o=n.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&o.style({"pointer-events":"none"}),E.enable()},location:function(t,e,n){n=k(n),(this.block.isNew()?this.element:this.original).style({transform:"translate(0, 0)"}),this.placeholder||(this.placeholder=f("div.block.placeholder[data-lm-placeholder]").style({display:"none"}));var i,a=n.data("lm-blocktype"),o=this.block.getType();if(!a&&n.data("lm-root")&&(a="root"),!("page"!==this.mode&&"section"===a||"grid"===a&&(n.parent().data("lm-root")||"container"===n.parent().data("lm-blocktype")&&n.parent().parent().data("lm-root")))){var r=':not(.placeholder):not([data-lm-id="'+this.original.data("lm-id")+'"])',s={before:this.original.previousSiblings(r),after:this.original.nextSiblings(r)};if(s.before&&(s.before=k(s.before[0])),s.after&&(s.after=k(s.after[0])),!("block"===a&&(s.before===n&&"after"===e.x||s.after===n&&"before"===e.x)||"grid"===a&&(s.before===n&&"below"===e.y||s.after===n&&"above"===e.y))){var l,c=n.parent('[data-lm-blocktype="atoms"]'),u=this.block.block.find("[data-lm-id]");if("atom"==(u?u.data("lm-blocktype"):o)){if(!c)return}else if(c)return;switch(a){case"root":case"section":break;case"grid":var d=!n.children(":not(.placeholder)");if("grid"!==o&&!d)return;d?"grid"===o?this.placeholder.before(n):this.placeholder.bottom(n):(l="above"===e.y?"before":"after",this.placeholder[l](n));break;case"block":l="above"===e.y?"top":"bottom",i="other"===e.x?l:e.x,this.placeholder[i](n)}if(this.placeholder.removeClass("in-between").removeClass("in-between-grids").removeClass("in-between-grids-first").removeClass("in-between-grids-last"),this.placeholder.style({display:"block"})["block"!==a?"removeClass":"addClass"]("in-between"),"grid"===o&&"grid"===a){var h=this.placeholder.nextSibling(),p=this.placeholder.previousSibling();this.placeholder.addClass("in-between-grids"),p&&!p.data("lm-blocktype")&&this.placeholder.addClass("in-between-grids-first"),h&&h.data("lm-blocktype")||this.placeholder.addClass("in-between-grids-last")}}}},nolocation:function(t){if((this.block.isNew()?this.element:this.original).style({transform:"translate(0, 0)"}),this.placeholder&&this.placeholder.remove(),this.block){var e=t.type.match(/^touch/i)?document.elementFromPoint(t.touches.item(0).clientX,t.touches.item(0).clientY):t.target;this.block.isNew()||((e=k(e)).matches(this.eraser.element)||this.eraser.element.find(e)?(this.dragdrop.removeElement=!0,this.eraser.over()):(this.dragdrop.removeElement=!1,this.eraser.out()))}},resize:function(t,e,n,i){this.resizer.start(t,e,n,i)},removeElement:function(t,e){this.dragdrop.removeElement=!1;e.animate({opacity:0},{duration:"150ms"});var n,i=k("[data-lm-root]");"grid"===this.block.getType()&&(n=i.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&n.style({"pointer-events":"inherit"});var a=this.block.block.siblings(":not(.original-placeholder)");if(a&&"block"==this.block.getType()){var o,r,s,l=this.block.getSize(),c=l/a.length,u=0;a.forEach(function(t,e){t=k(t),r=C(this.builder.map,t.data("lm-id")),e+1==a.length&&(s=r),o=p(r.getSize()+c,0),u+=o,r.setSize(o,!0)},this),100!=u&&s&&(l=s.getSize(),c=100-u,s.setSize(l+c,!0))}this.eraser.hide(),this.dragdrop.DRAG_EVENTS.EVENTS.MOVE.forEach(h(function(t){k("body").off(t,this.dragdrop.bound("move"))},this)),this.dragdrop.DRAG_EVENTS.EVENTS.STOP.forEach(h(function(t){k("body").off(t,this.dragdrop.bound("deferStop"))},this)),this.builder.remove(this.block.getId());var d=this.block.block.search("[data-lm-id]");d&&d.length&&d.forEach(function(t){this.builder.remove(k(t).data("lm-id"))},this),this.block.block.remove(),this.placeholder&&this.placeholder.remove(),this.original&&this.original.remove(),this.element=this.block=null,E.disable(),E.cleanup(this.builder),this.history.push(this.builder.serialize(),this.history.get().preset),i.removeClass("moving")},stop:function(t,e){var n=k(this.dragdrop.lastOvered);if(n&&n.matches(this.eraser.element.find(".trash-zone")))this.eraser.hide();else{if("grid"===this.block.getType()){var i=this.block.block.siblings(":not(.original-placeholder):not(.section-header):not(.g-inherit):not(:empty)");i&&i.search("[data-lm-id]").style({"pointer-events":"inherit"})}if(this.block.isNew()||this.eraser.hide(),this.dragdrop.matched){e=k(e);var a,o,r=!1,s=this.block.isNew(),l=this.block.getType(),c=e.data("lm-id"),u=!!c&&(C(this.builder.map,c)?C(this.builder.map,c).getType():e.data("lm-blocktype")),d=this.placeholder.parent();if(d){var h=d.data("lm-id"),p=!!C(this.builder.map,h||"")&&C(this.builder.map,h).getType(),f=!1;if(this.original.remove(),"block"!==l&&"grid"!==l&&("section"===u||"grid"===u||"block"===u&&"block"!==p)&&(a=new S.block({builder:this.builder}).adopt(this.block.block),o=new S[l]({id:this.block.block.data("lm-id"),type:l,subtype:this.element.data("lm-blocksubtype"),title:this.element.text(),builder:this.builder}).setLayout(this.block.block),a.setSize(),this.block=a,this.builder.add(a),this.builder.add(o),o.emit("rendered",o,a),a.emit("rendered",a,null),f={case:1}),"block"===this.originalType&&"block"===this.block.getType()){f={case:3};var m=this.block.block.parent('[data-lm-blocktype="grid"]');this.placeholder.parent('[data-lm-blocktype="grid"]')!==m&&(r={from:this.block.block.siblings(":not(.placeholder)"),to:this.placeholder.siblings(":not(.placeholder)")}),m.find('!> [data-lm-blocktype="container"]')&&(m=m.parent()),m=m.siblings(":not(.original-placeholder)"),!this.block.isNew()&&m.length&&this.resizer.evenResize(m),this.block.block.attribute("style",null),this.block.setSize()}if("grid"===l&&!i){var g=this.block.block.parent('[data-lm-blocktype="section"]').find(".fa-plus");g&&g.emit("click")}if(this.block.hasAttribute("size")&&"function"==typeof this.block.getSize&&this.block.setSize(this.placeholder.compute("flex")),this.block.insert(this.placeholder),this.placeholder.remove(),s&&(f&&this.resizer.evenResize(k([this.block.block,this.block.block.siblings()])),this.element.attribute("style",null)),r.from||r.to&&r.to!=this.block.block){var v,b,y=this.block.getSize();if(r.to||this.block.setSize(100,!0),r.from){v=y/r.from.length;var w,x=0;r.from.forEach(function(t){t=k(t),b=C(this.builder.map,t.data("lm-id")),w=b.getSize()+v,b.setSize(w,!0),x+=w},this),100!==x&&(v=(100-x)/r.from.length,r.from.forEach(function(t){t=k(t),b=C(this.builder.map,t.data("lm-id")),w=b.getSize()+v,b.setSize(w,!0)},this))}r.to&&(y=100/(r.to.length+1),r.to.forEach(function(t){t=k(t),(b=C(this.builder.map,t.data("lm-id"))).setSize(y,!0)},this),this.block.setSize(y,!0))}E.disable(),E.cleanup(this.builder),this.history.push(this.builder.serialize(),this.history.get().preset)}}else this.placeholder&&this.placeholder.remove()}},stopAnimation:function(t){var e,n,i=k("[data-lm-root]");i.removeClass("moving"),this.original&&this.original.remove(),E.disable(),this.block||(this.block=C(this.builder.map,t.data("lm-id"))),this.block&&"block"===this.block.getType()&&this.block.setSize(),this.block&&this.block.isNew()&&this.element&&this.element.attribute("style",null),"grid"!==this.originalType||(e=i.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&e.forEach(function(t){t=k(t),n=C(this.builder.map,t.data("lm-id")),t.attribute("style",null),n.setSize()},this)}});e.exports=y},{"../ui/drag.drop":261,"../ui/eraser":263,"../utils/elements.utils":276,"../utils/flags-state":279,"./blocks":226,"./drag.resizer":235,"elements/zen":37,"mout/array/contains":66,"mout/array/every":69,"mout/collection/find":88,"mout/collection/forEach":89,"mout/function/bind":92,"mout/lang/deepEquals":102,"mout/lang/isArray":104,"mout/lang/isObject":109,"mout/number/enforcePrecision":123,"mout/object/get":134,"mout/object/keys":137,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],241:[function(t,e,n){"use strict";function i(){(s=g(".sidebar-block"))&&(l=s.find(".g5-lm-particles-picker"))&&(a=l.find("> .search"),o=l.find("> .particles-container"),r=window.innerHeight,p=l[u=c=0].getBoundingClientRect(),f=l.position().top,d=g("body.admin.com_gantry5 nav.navbar-fixed-top, #wpadminbar, #admin-main #titlebar, #admin-main .grav-update.grav"),h=g("body.admin.com_gantry5 #status"),d&&g(d).forEach(function(t){c+=t.offsetHeight}),h&&g(h).forEach(function(t){u+=t.offsetHeight}),o.style({"max-height":r-c-u-a[0].offsetHeight-30,overflow:"auto"}),o[0].scrollHeight!==o[0].offsetHeight&&o.addClass("has-scrollbar").style({"margin-right":-b()}))}var s,l,a,o,r,c,u,d,h,p,f,m=t("elements/domready"),g=t("elements"),v=t("../utils/decouple"),b=t("../utils/get-scrollbar-width");m(function(){i();function t(){if(s&&l){var t=this.scrollY||this.scrollTop,e=s[0].getBoundingClientRect(),n=e.top+e.height,i=l[0].getBoundingClientRect(),a=t>p.top-c-10&&f-10<=t,o=i.height+10+c+parseInt(s.compute("padding-bottom"),10)>=n,r=e.height<=i.height;l.style("width",i.width),a&&!o?(l.removeClass("particles-absolute").addClass("particles-fixed"),l.style({top:c+10,bottom:"inherit"})):a&&o?(r||"grav"===GANTRY_PLATFORM&&e.bottom<i.bottom)&&(l.removeClass("particles-fixed").addClass("particles-absolute"),l.style({top:"inherit",bottom:parseInt(s.compute("padding-bottom"),10)})):(l.removeClass("particles-fixed").removeClass("particles-absolute"),l.style({top:"inherit",bottom:"inherit"}))}}var e=g("grav"===GANTRY_PLATFORM?"#admin-main .content-padding":window)||[window];v(e[0],"scroll",t.bind(e[0])),v(window,"resize",function(){o&&(t.call(e[0]),o.style({"max-height":window.innerHeight-c-u-a[0].offsetHeight-30}))}),g("body").on("statechangeEnd",function(){i()})}),e.exports=i},{"../utils/decouple":275,"../utils/get-scrollbar-width":283,elements:34,"elements/domready":32}],242:[function(t,e,n){"use strict";var m=t("elements"),i=t("elements/zen"),a=t("elements/domready"),g=t("agent"),o=t("./ui"),v=t("mout/string/interpolate"),b=t("mout/string/trim"),r=t("mout/queryString/setParam"),y=o.modal,w=o.toastr,x=t("./utils/get-ajax-url").parse,k=(t("./utils/get-ajax-url").global,t("./utils/get-ajax-suffix")),S=t("./utils/flags-state"),C=t("./utils/field-validation"),E=t("./lm"),T=t("./menu"),O=t("./positions/cards"),I=(t("./configurations"),t("./positions"),t("./changelog"),t("./utils/translate"));t("elements/attributes"),t("elements/events"),t("elements/delegation"),t("elements/insertion"),t("elements/traversal"),t("./fields"),t("./ui/popover"),t("./utils/ajaxify-links"),t("./utils/rAF-polyfill");function s(n,i,a){return function(t){var e=Math.floor(t/n);return e+" "+(i+(1<e?"s":""))+" "+a}}var l=[{threshold:-31535999,handler:s(-31536e3,"year","from now")},{threshold:-2591999,handler:s(-2592e3,"month","from now")},{threshold:-604799,handler:s(-604800,"week","from now")},{threshold:-172799,handler:s(-86400,"day","from now")},{threshold:-86399,handler:function(){return"tomorrow"}},{threshold:-3599,handler:s(-3600,"hour","from now")},{threshold:-59,handler:s(-60,"minute","from now")},{threshold:-.9999,handler:s(-1,"second","from now")},{threshold:1,handler:function(){return"just now"}},{threshold:60,handler:s(1,"second","ago")},{threshold:3600,handler:s(60,"minute","ago")},{threshold:86400,handler:s(3600,"hour","ago")},{threshold:172800,handler:function(){return"yesterday"}},{threshold:604800,handler:s(86400,"day","ago")},{threshold:2592e3,handler:s(604800,"week","ago")},{threshold:31536e3,handler:s(2592e3,"month","ago")},{threshold:1/0,handler:s(31536e3,"year","ago")}],c=function(t){for(var e=((new Date).getTime()-t.getTime())/1e3,n=0;n<l.length;n++)if(e<l[n].threshold)return l[n].handler(e);throw new Error("exhausted all formatter options, none found")};window.onbeforeunload=function(){if(S.get("pending"))return I("GANTRY5_PLATFORM_JS_NO_SAVE_DETECTED")},a(function(){var p=m("body"),f=I("GANTRY5_PLATFORM_JS_SAVE_SUCCESS");p.delegate("click","[data-g-close]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.data("g-close");(n=n?e.parent(n):e).slideUp(function(){n.remove()})}),p.delegate("click","[data-g-popover]",function(t,n){if(t&&t.preventDefault&&t.preventDefault(),!n.PopoverDefined){var e=n.find("[data-popover-content]")||n.siblings("[data-popover-content]");n.getPopover({style:n.data("g-popover-style")||"generic",width:n.data("g-popover-width")||220,content:i("ul").html(e.html())[0].outerHTML,allowElementsClick:n.data("g-popover-elementsclick")||".toggle"});n.on("shown.popover",function(t){var e=n.find(".enabler");n.attribute("aria-expanded",!0).attribute("aria-hidden",!1),e&&e[0].focus()}),n.on("hide.popover",function(t){n.attribute("aria-expanded",!1).attribute("aria-hidden",!0)}),n.getPopover().show()}}),p.delegate("mousedown","[data-settings-key]",function(t,e){var n=e.data("settings-key");if(!n)return!0;var i=window.location.search,a=e.attribute("href"),o=window.location.href.split("?");1<o.length&&o[0].match(/index.php$/)&&(i="index.php"+i),i=r(a,n,btoa(i)),e.href(i)}),p.delegate("mouseover",".button-save",function(t,e){if(!e.lastSaved)return!0;var n=I("GANTRY5_PLATFORM_LAST_SAVED")+": "+c(e.lastSaved);e.data("tip",n).data("title",n)}),p.delegate("click",".button-save",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=m(".button-save");if(n.disabled())return!1;n.disabled(!0),n.hideIndicator(),n.showIndicator();var r={},s=[],i=e.data("save"),a="",o=m("[data-lm-root]")?"layout":m("[data-mm-id]")?"menu":m("[data-g5-position]")?"positions":"other",l=x(b(window.location.href,"#")+k());switch(o){case"layout":var c=m("[data-lm-preset]");E.layoutmanager.singles("cleanup",E.builder,!1),E.savestate.setSession(E.builder.serialize(null,!0)),r.preset=c&&c.data("lm-preset")?c.data("lm-preset"):"default";var u=JSON.stringify(E.builder.serialize());r.layout=u;break;case"menu":r.menutype=m("select.menu-select-wrap").value(),r.settings=JSON.stringify(T.menumanager.settings),r.ordering=JSON.stringify(T.menumanager.ordering);var d=JSON.stringify(T.menumanager.items);r.items=d,l=x(e.parent("form").attribute("action")+k());break;case"positions":r.positions=O.serialize();break;case"other":default:var h=e.parent("form");h&&"submit"==e.attribute("type")&&m(h[0].elements).forEach(function(t){var e=(t=m(t)).attribute("name"),n=t.attribute("type"),i=t.value(),a=t.parent(".settings-param, .card-overrideable"),o=a?a.find('> input[type="checkbox"]'):null;o=o||m(t.data("override-target")),!e||t.disabled()||o&&!o.checked()||"radio"==n&&!t.checked()||(C(t)||s.push(t),r[e]=i)})}if(s.length)return n.disabled(!1),n.hideIndicator(),n.showIndicator("fa fa-fw fa-exclamation-triangle"),void w.error(I("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),I("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));"other"==o&&m(".settings-param-title, .card.settings-block > h4").hideIndicator(),p.emit("updateOriginalFields"),g("post",l,r,function(t,e){e.body.success?(y.close(),m("#styles")&&(a="<br />"+(e.body.warning?"<hr />"+e.body.title+"<br />"+e.body.html:I("GANTRY5_PLATFORM_JS_CSS_COMPILED"))),w[e.body.warning?"warning":"success"](v(f,{verb:"s"==i.slice(-1)?"have":"has",type:i,extras:a}),i+" "+I("GANTRY5_PLATFORM_SAVED"))):y.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),n.disabled(!1),n.hideIndicator(),n.forEach(function(t){m(t).lastSaved=new Date}),"layout"==o&&E.layoutmanager.updatePendingChanges(),S.set("pending",!1),S.emit("update:pending")})}),p.delegate("keydown","[data-title-edit]",function(t,e){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),p.emit("click",t))}),p.delegate("click","[data-title-edit]",function(t,e){if((e=m(e)).hasClass("disabled"))return!1;var n,i=e.siblings("[data-title-editable]")||e.previousSiblings().find("[data-title-editable]")||e.nextSiblings().find("[data-title-editable]");if(!i)return!0;n=i[0],i.text(b(i.text())),i.attribute("contenteditable",!0),n.focus();var a,o=document.createRange();o.selectNodeContents(n),(a=window.getSelection()).removeAllRanges(),a.addRange(o),i.storedTitle=b(i.text()),i.titleEditCanceled=!1,i.emit("title-edit-start",i.storedTitle)}),p.delegate("keydown","[data-title-editable]",function(t,e){switch(e=m(e),t.keyCode){case 13:case 27:return t.stopPropagation(),27==t.keyCode&&void 0!==e.storedTitle&&(e.text(e.storedTitle),e.titleEditCanceled=!0),e.attribute("contenteditable",null),e[0].blur(),e.emit("title-edit-exit",e.data("title-editable"),13==t.keyCode?"enter":"esc"),!1;default:return!0}}),p.delegate("blur","[data-title-editable]",function(t,e){(e=m(e))[0].scrollLeft=0,e.attribute("contenteditable",null),e.data("title-editable",b(e.text())),window.getSelection().removeAllRanges(),e.emit("title-edit-end",e.data("title-editable"),e.storedTitle,e.titleEditCanceled)},!0),p.delegate("click","[data-ajax-action]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.attribute("href")||e.data("ajax-action"),i=e.data("ajax-action-method")||"post",a=m(e.data("ajax-action-indicator"))||e;if(!n)return!1;a.showIndicator(),g(i,x(n+k()),function(t,e){if(!e.body.success)return y.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),a.hideIndicator(),!1;w[e.body.warning?"warning":"success"](e.body.html||"Action successfully completed.",e.body.title||""),a.hideIndicator()})})});var u={lm:E,mm:T,assingments:t("./assignments"),ui:t("./ui"),styles:t("./styles"),$:m,domready:t("elements/domready"),particles:t("./particles"),zen:t("elements/zen"),moofx:t("moofx"),atoms:t("./pagesettings"),tips:t("./ui/tooltips")};window.G5=u,e.exports=u},{"./assignments":213,"./changelog":214,"./configurations":216,"./fields":217,"./lm":238,"./menu":245,"./pagesettings":247,"./particles":253,"./positions":258,"./positions/cards":257,"./styles":259,"./ui":264,"./ui/popover":266,"./ui/tooltips":271,"./utils/ajaxify-links":272,"./utils/field-validation":278,"./utils/flags-state":279,"./utils/get-ajax-suffix":280,"./utils/get-ajax-url":281,"./utils/rAF-polyfill":286,"./utils/translate":288,agent:1,elements:34,"elements/attributes":29,"elements/delegation":31,"elements/domready":32,"elements/events":33,"elements/insertion":35,"elements/traversal":36,"elements/zen":37,moofx:38,"mout/queryString/setParam":150,"mout/string/interpolate":162,"mout/string/trim":173}],243:[function(t,e,n){"use strict";var i=t("../ui/drag.events"),a=t("prime"),o=(t("prime/emitter"),t("prime-util/prime/bound")),r=t("prime-util/prime/options"),s=t("mout/function/bind"),l=t("mout/lang/isString"),f=t("mout/math/map"),m=t("mout/math/clamp"),g=t("mout/number/enforcePrecision"),c=t("mout/object/get"),v=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var u=new a({mixin:[o,r],DRAG_EVENTS:i,options:{minSize:5},constructor:function(t,e,n){this.setOptions(e),this.history=this.options.history||{},this.builder=this.options.builder||{},this.map=this.builder.map,this.menumanager=n,this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}}},getBlock:function(t){return c(this.map,l(t)?t:v(t).data("lm-id")||"")},getAttribute:function(t,e){return this.getBlock(t).getAttribute(e)},getSize:function(t){var e=((t=v(t)).matches("[data-mm-id]")?t:t.parent("[data-mm-id]")).find(".percentage input");return Number(e.value())},setSize:function(t,e,n){n=void 0!==n&&n;var i=(t=v(t)).matches("[data-mm-id]")?t:t.parent("[data-mm-id]"),a=i.find(".percentage input");i[n?"animate":"style"]({flex:"0 1 "+e+"%"}),a.value(g(e,1))},start:function(t,e,n,i){if(t&&t.type.match(/^touch/i)&&t.preventDefault(),t.which&&1!==t.which)return!0;t.preventDefault(),this.element=v(e);var a=this.element.parent(".submenu-selector");if(!a)return!1;a.addClass("moving"),this.siblings={occupied:0,elements:n,next:this.element.parent("[data-mm-id]").nextSibling().find("> .submenu-column"),prevs:this.element.parent("[data-mm-id]").previousSiblings(),sizeBefore:0},1<this.siblings.elements.length&&(this.siblings.occupied-=this.getSize(this.siblings.next),this.siblings.elements.forEach(function(t){this.siblings.occupied+=this.getSize(t)},this)),this.siblings.prevs&&this.siblings.prevs.forEach(function(t){this.siblings.sizeBefore+=this.getSize(t)},this),this.origin={size:this.getSize(this.element),maxSize:this.getSize(this.element)+this.getSize(this.siblings.next),x:t.changedTouches?t.changedTouches[0].pageX:t.pageX+6,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY};var o=this.element[0].getBoundingClientRect(),r=this.element.parent()[0].getBoundingClientRect();this.origin.offset={clientRect:o,parentRect:{left:r.left,right:r.right},x:this.origin.x-o.right,y:o.top-this.origin.y,down:i},this.origin.offset.parentRect.left=this.element.parent(".submenu-selector").find("> [data-mm-id]:first-child")[0].getBoundingClientRect().left,this.origin.offset.parentRect.right=this.element.parent(".submenu-selector").find("> [data-mm-id]:last-child")[0].getBoundingClientRect().right,this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){v(document).on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){v(document).on(t,this.bound("stop"))},this))},move:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault();var e=t.clientX||t.touches[0].clientX||0,n=t.clientY||t.touches[0].clientY||0,i=this.origin.offset.parentRect,a=(this.lastX||e)-e,o=(this.lastY||n)-n;this.direction=(Math.abs(a)>Math.abs(o)&&0<a?"left":Math.abs(a)>Math.abs(o)&&a<0&&"right")||Math.abs(o)>Math.abs(a)&&0<o&&"up"||"down";var r,s=100-this.siblings.occupied,l=e+(this.siblings.prevs?this.siblings.prevs.length:this.origin.offset.x-this.origin.offset.down),c=m(l,i.left,i.right);r=f(c,i.left,i.right,0,100),r-=this.siblings.sizeBefore,r=g(m(r,this.options.minSize,this.origin.maxSize-this.options.minSize),0),s=g(s-r,0),this.setSize(this.element,r),this.setSize(this.siblings.next,s);var u=this.siblings.elements,d=u?u.length+1:1;if(3==d||6==d||7==d||8==d||9==d||11==d||12==d){var h,p=0;(h=v([u,this.element.parent("[data-mm-id]")])).forEach(function(t,e){t=v(t),(r=this.getSize(t))%1&&(r=g(100/d,0),this.setSize(t,r)),p+=r,h.length==e+1&&100!=p&&(s=100-p,this.setSize(t,r+s))},this)}this.lastX=e,this.lastY=n},stop:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault(),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){v(document).off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){v(document).off(t,this.bound("stop"))},this)),this.element.parent(".submenu-selector").removeClass("moving"),this.menumanager.emit("dragEnd",this.menumanager.map,"resize")},updateItemSizes:function(t){var e=this.element?this.element.parent(".submenu-selector"):null;if(!e&&!t)return!1;var n=t||e.search("> [data-mm-id]"),i=[],a=v(".menu-selector .active"),o=a?a.data("mm-id"):null;return n.forEach(function(t){i.push(this.getSize(t))},this),this.menumanager.items[o].columns=i,this.updateMaxValues(t),i},updateMaxValues:function(t){var n,i,e=this.element?this.element.parent(".submenu-selector"):null;if(!e&&!t)return!1;(t||e.search("> [data-mm-id]")).forEach(function(t){var e=(t=v(t)).nextSibling()||t.previousSibling();e&&(i={block:t.find("input.column-pc"),sibling:e.find("input.column-pc")},(n={current:this.getSize(t),sibling:this.getSize(e)}).total=n.current+n.sibling,i.block.attribute("max",n.total-Number(i.block.attribute("min"))),i.sibling.attribute("max",n.total-Number(i.sibling.attribute("min"))))},this)},evenResize:function(t,e){var n=t.length,i=g(100/n,4);t.forEach(function(t){t=v(t),this.setSize(t,i,void 0!==e&&e)},this),this.updateItemSizes(t),this.menumanager.emit("dragEnd",this.menumanager.map,"evenResize")}});e.exports=u},{"../ui/drag.events":262,"../utils/elements.utils":276,"elements/delegation":31,"elements/events":33,"mout/function/bind":92,"mout/lang/isString":112,"mout/math/clamp":117,"mout/math/map":119,"mout/number/enforcePrecision":123,"mout/object/get":134,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],244:[function(t,e,n){"use strict";function g(t,e){for(var n="",i=0,a="a"==(e=e&&e.toLowerCase())?10:0,o="n"==e?10:62;i++<t;){var r=Math.random()*(o-a)+a<<0;n+=String.fromCharCode(r+=9<r?r<36?55:61:48)}return n}var v=t("elements"),b=t("elements/zen"),i=t("elements/domready"),c=t("../fields/submit"),y=t("../ui").modal,w=t("../ui").toastr,u=t("agent"),x=t("mout/array/indexOf"),o=t("mout/string/trim"),d=t("../utils/get-ajax-url").parse,h=t("../utils/get-ajax-url").global,k=t("../utils/get-ajax-suffix"),r=t("../utils/flags-state"),s=t("mout/lang/deepEquals"),S=t("../utils/translate"),C=t("../positions/cards"),E=t("../utils/wp-widgets-customizer"),T=null;i(function(){var l=v("body");l.delegate("click",".menu-editor-extras [data-lm-blocktype], .menu-editor-extras [data-mm-module]",function(t,e){var n=e.parent(".menu-editor-extras"),i=n.search("[data-lm-blocktype], [data-mm-module]"),a=n.find("[data-mm-select]");i.removeClass("selected"),e.addClass("selected"),a.attribute("disabled",null)}),l.delegate("click",".menu-editor-extras [data-mm-select]",function(t,e){if(t.preventDefault(),e.hasClass("disabled")||e.attribute("disabled"))return!1;var n=e.parent(".menu-editor-extras").find("[data-lm-blocktype].selected, [data-mm-module].selected"),i=n.data("mm-type");switch(a={type:i},i){case"particle":a.particle=n.data("lm-subtype");break;case"widget":a.widget=n.data("lm-subtype");break;case"module":a.particle=i,a.title=n.find("[data-mm-title]").data("mm-title"),a.options={particle:{module_id:n.data("mm-module")}}}e.showIndicator();var a,o=e.data("g-instancepicker");if(o&&"module"==i){a=JSON.parse(o);var r=v('[name="'+a.field+'"]');return r&&(r.value(n.data("mm-module")),l.emit("input",{target:r})),e.hideIndicator(),y.close(),!1}var s=o;e.data("g-instancepicker",null),function(t,s,l){var e=s.find("[data-mm-particle-stepone]").data("mm-particle-stepone"),f=t.instancepicker;if(f){var m=JSON.parse(t.item);f=JSON.parse(f),delete t.instancepicker,e=h(m.type+"/"+m[m.type])}u("post",d(e+k()),t,function(t,e){if(!e.body.success)return y.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),void l.hideIndicator();s.html(e.body.html);var n=v("[data-selectize]");n&&n.selectize();var i=s.find(".g-urltemplate");i&&v("body").emit("input",{target:i});var a=s.find("form"),p=s.find('input[type="submit"], button[type="submit"]'),o=b("div").html(e.body.html).find("form");if(!a&&!o||!p)return!0;var r=s.search("[data-apply-and-save]");r&&r.remove(),p.on("click",function(t){t.preventDefault(),p.showIndicator();var e=c(o[0].elements,s,{submitUnchecked:!0});u(o.attribute("method"),d(o.attribute("action")+k()),e.valid.join("&")||{},function(t,e){if(e.body.success)if(f){var n=v('[name="'+f.field+'"]'),i=n.siblings("[data-g-instancepicker]"),a=n.siblings(".g-instancepicker-title");n&&(n.value(JSON.stringify(e.body.item)),v("body").emit("change",{target:n})),a&&a.text(e.body.item.title),"particle"==m.type&&i.text(i.data("g-instancepicker-alttext"))}else if(T){for(var o=T.element,r=o.data("mm-id")+"-",s=g(5),l=o.parent("[data-mm-base]").data("mm-base"),c=(o.parent("[data-mm-id]").data("mm-id").match(/\d+$/)||[0])[0],u=x(o.parent().children("[data-mm-id]"),o[0]);T.items[r+s];)s=g(5);T.items[r+s]=e.body.item,T.ordering[l]||(T.ordering[l]=[]),T.ordering[l][c]||(T.ordering[l][c]=[]),T.ordering[l][c].splice(u,1,r+s),o.data("mm-id",r+s),e.body.html&&o.html(e.body.html),T.isNewParticle=!1,T.emit("dragEnd",T.map),w.success(S("GANTRY5_PLATFORM_JS_MENU_SETTINGS_APPLIED"),S("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else{var d=v('[data-g5-position-name="'+e.body.position+'"]'),h=b("div").html(e.body.html);d.find("> ul").appendChild(h.children()),C.serialize(d),C.updatePendingChanges(),w.success(S("GANTRY5_PLATFORM_JS_POSITIONS_SETTINGS_APPLIED"),S("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else y.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});y.close(),p.hideIndicator(),E(n)})})})}({item:JSON.stringify(a),instancepicker:s||null},e.parent(".g5-content"),e)})}),e.exports=function(t,e){if(!this.isNewParticle||"reorder"===e){this.resizer.updateItemSizes(),T=this;var n=v("[data-save]"),i={settings:this.settings,ordering:this.ordering,items:this.items};if(this.isNewParticle||(s(t,i)?(n.hideIndicator(),r.set("pending",!1)):(n.showIndicator("fa fa-fw changes-indicator fa-circle-o"),r.set("pending",!0))),this.isParticle&&this.isNewParticle){var a=this.block.data("mm-blocktype");this.block.attribute("data-mm-blocktype",null).addClass("g-menu-item-"+a).data("mm-original-type",a),b("span.menu-item-type.badge").text(a).after(this.block.find(".menu-item .title")),y.open({content:S("GANTRY5_PLATFORM_JS_LOADING"),method:"post",remote:d(v(this.block).find(".config-cog").attribute("href")+k()),remoteLoaded:function(t,e){var n=e.elements.content.find(".search input"),i=e.elements.content.search("[data-mm-type]"),a=e.elements.content.search("[data-mm-filter]");n&&a&&i&&(n.on("input",function(){if(this.value()){i.addClass("hidden");var e=[],n=this.value().toLowerCase();a.forEach(function(t){t=v(t),o(t.data("mm-filter")).toLowerCase().match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(t.matches("[data-mm-type]")?t:t.parent("[data-mm-type]"))},this),e.length&&v(e).removeClass("hidden")}else i.removeClass("hidden")}),setTimeout(function(){n[0].focus()},5))}})}this.type=void 0}}},{"../fields/submit":219,"../positions/cards":257,"../ui":264,"../utils/flags-state":279,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/translate":288,"../utils/wp-widgets-customizer":289,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/array/indexOf":75,"mout/lang/deepEquals":102,"mout/string/trim":173}],245:[function(t,e,n){"use strict";var f,i=t("elements/domready"),a=t("./menumanager"),m=t("../fields/submit"),g=t("elements"),v=t("elements/zen"),b=t("../ui").modal,y=t("../ui").toastr,o=t("./extra-items"),w=t("agent"),x=t("mout/string/trim"),r=t("mout/math/clamp"),s=t("mout/array/contains"),k=t("mout/array/indexOf"),S=t("../utils/get-ajax-url").parse,C=t("../utils/get-ajax-suffix"),E=t("../utils/translate"),l=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),c=l?"focus":"focusin",u=l?"blur":"focusout";i(function(){var p=g("body");(f=new a("[data-mm-container]",{delegate:".g5-mm-particles-picker ul li, #menu-editor > section ul li, .submenu-column, .submenu-column li[data-mm-id], .column-container .g-block",droppables:"#menu-editor [data-mm-id]",exclude:"[data-lm-nodrag], .menu-item-back, .fa-cog, .config-cog",resize_handles:".submenu-column:not(:last-child)",catchClick:!0})).on("dragEnd",o),(e.exports.menumanager=f).setRoot(),p.delegate("statechangeAfter","#main-header [data-g5-ajaxify], select.menu-select-wrap",function(){f.setRoot(),f.refresh(),f.eraser&&(f.eraser.element=g("[data-mm-eraseparticle]"),f.eraser.hide())}),p.delegate(c,".percentage input",function(t,e){(e=g(e)).currentSize=Number(e.value()),e[0].focus(),e[0].select()},!0),p.delegate("keydown",".percentage input",function(t){s([46,8,9,27,13,110,190],t.keyCode)||65==t.keyCode&&(!0===t.ctrlKey||!0===t.ctrlKey)||82==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||35<=t.keyCode&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||57<t.keyCode)&&(t.keyCode<96||105<t.keyCode)&&t.preventDefault()}),p.delegate("keydown",".percentage input",function(t,e){e=g(e);var n=Number(e.value()),i=Number(e.attribute("min")),a=Number(e.attribute("max"));38!=t.keyCode&&40!=t.keyCode||(n+=38==t.keyCode?1:-1,n=r(n,i,a),e.value(n),p.emit("keyup",{target:e}))}),p.delegate("keyup",".percentage input",function(t,e){e=g(e);var n=Number(e.value()),i=Number(e.attribute("min")),a=Number(e.attribute("max")),o=f.resizer,r=e.parent("[data-mm-id]"),s=r.nextSibling("[data-mm-id]")||r.previousSibling("[data-mm-id]");if(!(!n||n<i||a<n)){var l={current:Number(e.currentSize),sibling:Number(o.getSize(s))};e.currentSize=n,l.total=l.current+l.sibling,l.diff=l.total-n,o.setSize(r,n),o.setSize(s,l.diff),f.resizer.updateItemSizes(r.parent(".submenu-selector").search("> [data-mm-id]")),f.emit("dragEnd",f.map,"inputChange")}}),p.delegate(u,".percentage input",function(t,e){e=g(e);var n=Number(e.value());(n<Number(e.attribute("min"))||n>Number(e.attribute("max")))&&e.value(e.currentSize)},!0),p.delegate("click",".add-column",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=(e=g(e)).parent("[data-g5-menu-columns]").find(".submenu-selector"),i=n.children(),a=n.find("> :last-child"),o=i?i.length:0,r=g(".menu-selector .active"),s=r?r.data("mm-id"):null;if(1==o&&!i.search(".submenu-items > [data-mm-id]"))return!1;var l=g(a[0].cloneNode(!0));l.data("mm-id","list-"+o),l.find(".submenu-items").empty(),l.find("[data-mm-base-level]").data("mm-base-level",1),l.find(".submenu-level").text("Level 1"),l.after(a),f.ordering[s]||(f.ordering[s]=[[]]),f.ordering[s].push([]),f.resizer.evenResize(g(".submenu-selector > [data-mm-id]"))}),["click","touchend"].forEach(function(t){p.delegate(t,"[data-g5-menu-columns] .submenu-items:empty",function(t,e){var n=e[0].getBoundingClientRect(),i=t.pageX||t.changedTouches[0].pageX||0,a=t.pageY||t.changedTouches[0].pageY||0,o=g(".submenu-selector > [data-mm-id]"),r=36,s=36;if(o.length<=1)return!1;if(i>=n.left+n.width-r&&i<=n.left+n.width&&Math.abs(window.scrollY-a)-n.top<s){var l=e.parent("[data-mm-id]"),c=l.parent(".submenu-selector").children("[data-mm-id]"),u=k(c,l),d=g(".menu-selector .active"),h=d?d.data("mm-id"):null;l.remove(),o=g(".submenu-selector > [data-mm-id]"),f.ordering[h].splice(u,1),f.resizer.evenResize(o)}})}),p.delegate("click","#menu-editor .config-cog, #menu-editor .global-menu-settings",function(t,d){t.preventDefault();var e={},h=d.hasClass("global-menu-settings");h?e.settings=JSON.stringify(f.settings):e.item=JSON.stringify(f.items[d.parent("[data-mm-id]").data("mm-id")]),b.open({content:E("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:e,overlayClickToClose:!1,remote:S(g(d).attribute("href")+C()),remoteLoaded:function(t,n){if(t.body.success){var r,e=n.elements.content.find("form"),i=v("div").html(t.body.html).find("form"),a=n.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),o=n.elements.content.find(".search input"),s=n.elements.content.search("[data-mm-type]"),l=n.elements.content.search("[data-mm-filter]"),c=n.elements.content.find(".g-urltemplate");c&&p.emit("input",{target:c});var u=n.elements.content.find("[data-title-editable]");if(u&&u.on("title-edit-end",function(t,e){if(!(t=x(t)))return t=x(e)||"Title",this.text(t).data("title-editable",t),!0}),o&&l&&s&&o.on("input",function(){if(this.value()){s.addClass("hidden");var e=[],n=this.value().toLowerCase();l.forEach(function(t){t=g(t),x(t.data("mm-filter")).toLowerCase().match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(t.matches("[data-mm-type]")?t:t.parent("[data-mm-type]"))},this),e.length&&g(e).removeClass("hidden")}else s.removeClass("hidden")}),o&&setTimeout(function(){o[0].focus()},5),!e&&!i||!a)return!0;a.on("click",function(t){t.preventDefault();var o=g(t.currentTarget);o.disabled(!0),o.hideIndicator(),o.showIndicator();var e=m(i[0].elements,n.elements.content,{isRoot:h});if(e.invalid.length)return o.disabled(!1),o.hideIndicator(),o.showIndicator("fa fa-fw fa-exclamation-triangle"),void y.error(E("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),E("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));w(i.attribute("method"),S(i.attribute("action")+C()),e.valid.join("&"),function(t,e){if(e.body.success){if(e.body.path||e.body.item&&"particle"==e.body.item.type?(r=e.body.path||d.parent("[data-mm-id]").data("mm-id"),f.items[r]=e.body.item):e.body.item&&"particle"==e.body.item.type||(f.settings=e.body.settings),e.body.html){var n=d.parent("[data-mm-id]");if(n){var i=e.body.item.enabled||e.body.item.options.particle.enabled;n.html(e.body.html),n["0"==i?"addClass":"removeClass"]("g-menu-item-disabled")}}if(f.emit("dragEnd",f.map),null!==o.data("apply-and-save")){var a=g("body").find(".button-save");a&&p.emit("click",{target:a})}b.close(),y.success(E("GANTRY5_PLATFORM_JS_MENU_SETTINGS_APPLIED"),E("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else b.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});o.hideIndicator()})})}else b.enableCloseByOverlay()}})})}),e.exports={menumanager:f}},{"../fields/submit":219,"../ui":264,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/translate":288,"./extra-items":244,"./menumanager":246,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/array/contains":66,"mout/array/indexOf":75,"mout/math/clamp":117,"mout/string/trim":173}],246:[function(t,e,n){"use strict";var i=t("prime"),g=t("../utils/elements.utils"),r=t("mout/function/bind"),u=t("elements/zen"),a=t("prime/emitter"),o=t("prime-util/prime/bound"),s=t("prime-util/prime/options"),l=t("../ui/drag.drop"),c=t("../ui/eraser"),d=t("./drag.resizer"),v=(t("mout/object/get"),t("mout/string/ltrim")),b=(t("mout/array/every"),t("mout/array/last")),h=t("mout/array/indexOf"),p=(t("mout/lang/isArray"),t("mout/lang/isObject"),t("mout/lang/deepClone")),f=(t("mout/object/equals"),new i({mixin:[o,s],inherits:a,options:{},constructor:function(t,e){this.setOptions(e),this.refElement=t,this.map={},t&&g(t)&&this.init(t)},init:function(){this.setRoot(),this.dragdrop=new l(this.refElement,this.options,this),this.resizer=new d(this.refElement,this.options,this),this.eraser=new c("[data-mm-eraseparticle]",this.options),this.dragdrop.on("dragdrop:click",this.bound("click")).on("dragdrop:start",this.bound("start")).on("dragdrop:move:once",this.bound("moveOnce")).on("dragdrop:location",this.bound("location")).on("dragdrop:nolocation",this.bound("nolocation")).on("dragdrop:resize",this.bound("resize")).on("dragdrop:stop:erase",this.bound("removeElement")).on("dragdrop:stop",this.bound("stop")).on("dragdrop:stop:animation",this.bound("stopAnimation"))},refresh:function(){this.refElement&&g(this.refElement)&&this.init()},setRoot:function(){if(this.root=g("#menu-editor"),this.root){this.settings=JSON.parse(this.root.data("menu-settings")),this.ordering=JSON.parse(this.root.data("menu-ordering")),this.items=JSON.parse(this.root.data("menu-items")),this.map={settings:p(this.settings),ordering:p(this.ordering),items:p(this.items)};var t,e=g("[data-g5-menu-columns] .submenu-selector");this.resizer&&e&&(t=e.search("> [data-mm-id]"))&&this.resizer.updateMaxValues(t)}},click:function(t,e){var n=g(t.target);if(n.matches(".g-menu-addblock")||n.parent(".g-menu-addblock"))return!1;if(e.hasClass("g-block"))return this.stopAnimation(),!0;if(e.find("[data-g5-ajaxify]")){var i=e.siblings();e.addClass("active"),i&&i.removeClass("active")}e.emit("click");var a=e.find("a");a&&a[0].click()},resize:function(t,e,n,i){this.resizer.start(t,e,n,i)},start:function(t,e){var n=e.parent(".menu-selector")||e.parent(".submenu-column")||e.parent(".submenu-selector")||e.parent(".g5-mm-particles-picker"),i=g(e).position(),a=g(e)[0].getBoundingClientRect();if(this.block=null,this.targetLevel=void 0,this.addNewItem=!1,this.type=e.parent(".g-toplevel")||e.matches(".g-toplevel")?"main":e.matches(".g-block")?"column":"columns_items",this.isParticle=e.matches("[data-mm-blocktype]")||e.matches("[data-mm-original-type]"),this.wasActive=e.hasClass("active"),this.isNewParticle=e.parent(".g5-mm-particles-picker"),this.ParticleIndex=-1,this.root=n,this.Element=e,this.itemID=e.data("mm-id"),this.itemLevel=e.data("mm-level"),this.itemFrom=e.parent("[data-mm-id]"),this.itemTo=null,this.isParticle&&!this.isNewParticle){var o=e.parent().children("[data-mm-id]");this.ParticleIndex=h(o,e[0])}n.addClass("moving");var r=g(e).data("mm-id"),s=e[0].cloneNode(!0);if(this.placeholder||(this.placeholder=u(("column"==this.type?"div":"li")+".block.placeholder[data-mm-placeholder]")),this.placeholder.style({display:"none"}),this.original=g(s).after(e).style({display:"inline-block",opacity:1}).addClass("original-placeholder").data("lm-dropzone",null),this.originalType=r,this.block=e,this.isNewParticle){var l=e.position();this.original.style({position:"fixed",opacity:.5}).style({left:a.left,top:a.top,width:l.width,height:l.height}),this.element=this.dragdrop.element,this.block=this.dragdrop.element,this.dragdrop.element=this.original}else e.style({position:"fixed",zIndex:1500,width:Math.ceil(i.width),height:Math.ceil(i.height),left:a.left,top:a.top}).addClass("active"),this.placeholder.before(e);"column"==this.type&&n.search(".g-block > *").style({"pointer-events":"none"})},moveOnce:function(t){t=g(t),this.original&&this.original.style({opacity:.5}),this.isNewParticle||!t.hasClass("g-menu-removable")&&!this.isParticle||this.eraser.show()},location:function(t,e,n){n=g(n),(this.isNewParticle?this.block:this.original).style({transform:"translate(0, 0)"}),this.placeholder||(this.placeholder=u(("column"==this.type?"div":"li")+".block.placeholder[data-mm-placeholder]").style({display:"none"}));var i=n.parent(".g-toplevel")||n.matches(".g-toplevel")?"main":n.matches(".g-block")?"column":"columns_items",a=n.data("mm-level"),o=this.block.data("mm-level");if(!this.isParticle||"main"!=i||a){if(null===a&&"columns_items"===this.type&&this.isParticle&&this.isNewParticle)return(r=n.find(".submenu-items"))?(this.placeholder.style({display:"block"}).bottom(r),this.addNewItem=r,this.targetLevel=2,void(this.dragdrop.matched=!1)):void(this.dragdrop.matched=!1);if(null===a&&("columns_items"===this.type||this.isParticle)){var r,s=(r=n.find(".submenu-items")).data("mm-base-level");return!n.hasClass("g-block")||n.find(this.block)||!this.isParticle&&o!=s&&(!r||r.children()||2<o)?void(this.dragdrop.matched=!1):(this.placeholder.style({display:"block"}).bottom(r),this.addNewItem=r,this.targetLevel=2,void(this.dragdrop.matched=!1))}if(!this.isParticle){if("column"!==this.type&&o!==a)return void(this.dragdrop.matched=!1);if("column"==this.type&&a)return void(this.dragdrop.matched=!1);if(2<a&&n.parent("ul")!=this.block.parent("ul"))return void(this.dragdrop.matched=!1)}var l=':not(.placeholder):not([data-mm-id="'+this.original.data("mm-id")+'"])',c={before:this.original.previousSiblings(l),after:this.original.nextSiblings(l)};if(c.before&&(c.before=g(c.before[0])),c.after&&(c.after=g(c.after[0])),!("main"==i&&(c.before===n&&"after"===e.x||c.after===n&&"before"===e.x)||"column"==i&&(c.before===n&&"after"===e.x||c.after===n&&"before"===e.x)||"columns_items"==i&&(c.before===n&&"below"===e.y||c.after===n&&"above"===e.y))){switch(i){case"main":case"column":this.placeholder[e.x](n);break;case"columns_items":this.placeholder["above"===e.y?"before":"after"](n)}this.targetLevel=a,this.placeholder.style({display:"block"})["main"!=i?"removeClass":"addClass"]("in-between")}}else this.dragdrop.matched=!1},nolocation:function(t){(this.isNewParticle?this.block:this.original).style({transform:"translate(0, 0)"}),this.placeholder&&this.placeholder.remove(),this.targetLevel=void 0;var e=t.type.match(/^touch/i)?document.elementFromPoint(t.touches.item(0).clientX,t.touches.item(0).clientY):t.target;this.isNewParticle||!this.Element.hasClass("g-menu-removable")&&!this.isParticle||((e=g(e)).matches(this.eraser.element)||this.eraser.element.find(e)?(this.dragdrop.removeElement=!0,this.eraser.over()):(this.dragdrop.removeElement=!1,this.eraser.out()))},removeElement:function(t,e){this.dragdrop.removeElement=!1;e.animate({opacity:0},{duration:"150ms"}),"column"==this.type&&this.root.search(".g-block > *").style({"pointer-events":"none"}),this.eraser.hide(),this.dragdrop.DRAG_EVENTS.EVENTS.MOVE.forEach(r(function(t){g("body").off(t,this.dragdrop.bound("move"))},this)),this.dragdrop.DRAG_EVENTS.EVENTS.STOP.forEach(r(function(t){g("body").off(t,this.dragdrop.bound("deferStop"))},this));var n=this.block,i=n.parent("[data-mm-base]").data("mm-base"),a=(n.parent("[data-mm-id]").data("mm-id").match(/\d+$/)||[0])[0],o=h(n.parent().children("[data-mm-id]:not(.original-placeholder)"),n[0]);delete this.items[this.itemID],this.ordering[i][a].splice(o,1),this.block.remove(),this.original.remove(),this.root.removeClass("moving"),this.root.find(".submenu-items")&&(this.root.find(".submenu-items").children()||this.root.find(".submenu-items").text("")),this.emit("dragEnd",this.map,"reorder")},stop:function(t,e,n){e=g(e);var i=g(this.dragdrop.lastOvered);if(i&&i.matches(this.eraser.element.find(".trash-zone")))this.eraser.hide();else{if(e&&n.removeClass("active"),"column"==this.type&&this.root.search(".g-block > *").attribute("style",null),!this.dragdrop.matched&&!this.addNewItem)return this.placeholder&&this.placeholder.remove(),this.type=void 0,this.targetLevel=!1,this.isParticle=void 0,void this.eraser.hide();if(!this.placeholder.parent())return this.type=void 0,this.targetLevel=!1,void(this.isParticle=void 0);this.addNewItem&&this.block.attribute("style",null).removeClass("active");var a=this.block.parent();if(this.eraser.hide(),this.original&&(this.isNewParticle?this.original.attribute("style",null).removeClass("original-placeholder"):this.original.remove()),this.block.after(this.placeholder),this.placeholder.remove(),this.itemTo=this.block.parent("[data-mm-id]"),this.currentLevel=this.itemLevel,this.wasActive&&n.addClass("active"),this.isParticle){var o=b(this.itemID.split("/")),r=(e||this.itemTo)[e&&!e.hasClass("g-block")?"parent":"find"]("[data-mm-base]").data("mm-base");this.itemID=r?r+"/"+o:o,this.itemLevel=this.targetLevel,this.block.data("mm-id",this.itemID).data("mm-level",this.targetLevel)}var s,l,c=this.itemID.split("/");if(c.splice(this.itemLevel-1),c=c.join("/"),this.itemFrom||this.itemTo)if((this.itemFrom==this.itemTo?[this.itemFrom]:[this.itemFrom,this.itemTo]).forEach(function(t){t&&(s=t.search("[data-mm-id]"),l=Number(2<this.block.data("mm-level")?0:(t.data("mm-id").match(/\d+$/)||[0])[0]),s?(s=s.map(function(t){return g(t).data("mm-id")}),this.ordering[c]||(this.ordering[c]=[]),this.ordering[c][l]=s):this.ordering[c][l]=[])},this),r=this.itemFrom?null!==this.itemFrom.attribute("data-mm-base")?this.itemFrom:this.itemFrom.find("[data-mm-base]"):null,this.isParticle&&r&&this.targetLevel!=this.currentLevel){var u=(this.itemFrom.data("mm-id").match(/\d+$/)||[0])[0],d=r.data("mm-base")||"",h=v([d,o].join("/"),["/"]);this.ordering[d][u].splice(this.ParticleIndex,1),this.items[this.itemID]=this.items[h],delete this.items[h]}if(!this.itemFrom&&!this.itemTo&&!this.isParticle){var p=[],f=g(".g-toplevel [data-mm-id].active").data("mm-id");(s=a.search("> [data-mm-id]")).forEach(function(t,e){var n=(t=g(t)).data("mm-id"),i=Number((n.match(/\d+$/)||[0])[0]);t.data("mm-id",n.replace(/\d+$/,""+e)),p.push(this.ordering[f][i])},this),this.ordering[f]=p}a.children()||a.empty();var m=this.block.parent(".submenu-selector");m&&this.resizer.updateItemSizes(m.search("> [data-mm-id]")),this.emit("dragEnd",this.map,"reorder")}},stopAnimation:function(){var t=null;"column"==this.type&&(t=this.resizer.getSize(this.block)),this.root&&this.root.removeClass("moving"),this.block&&(this.block.attribute("style",null),t&&this.block.style("flex","0 1 "+t+" %")),this.original&&(this.isNewParticle&&(this.dragdrop.matched||this.targetLevel)?this.original.attribute("style",null).removeClass("original-placeholder"):this.original.remove()),!this.wasActive&&this.block&&this.block.removeClass("active")}}));e.exports=f},{"../ui/drag.drop":261,"../ui/eraser":263,"../utils/elements.utils":276,"./drag.resizer":243,"elements/zen":37,"mout/array/every":69,"mout/array/indexOf":75,"mout/array/last":79,"mout/function/bind":92,"mout/lang/deepClone":101,"mout/lang/isArray":104,"mout/lang/isObject":109,"mout/object/equals":128,"mout/object/get":134,"mout/string/ltrim":164,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],247:[function(i,a,t){(function(g){"use strict";function n(t){t&&(t.SimpleSort||d.createSortables(t))}var v=i("elements"),t=i("elements/domready"),s=i("elements/zen"),l=i("../fields/submit"),b=i("../ui").modal,y=i("../ui").toastr,e=i("../ui/eraser"),c=i("agent"),w=i("mout/array/indexOf"),o=i("sortablejs"),x=(i("mout/string/trim"),i("mout/object/size")),k=i("../utils/get-ajax-url").parse,S=i("../utils/get-ajax-suffix"),C=i("../utils/get-outline").getOutlineNameById,E=i("../utils/translate"),u='[name="page[head][atoms][_json]"]',r=[{name:"atoms",pull:"clone",put:!1},{name:"atoms",pull:!0,put:!0},{name:"atoms",pull:!1,put:!1}],d={eraser:null,lists:{picker:null,items:null},serialize:function(){var e=[],t=v(".atoms-list"),n=t.search("[data-atom-picked]");return n?(n.forEach(function(t){t=v(t),e.push(JSON.parse(t.data("atom-picked")))}),JSON.stringify(e).replace(/\//g,"\\/")):(t.empty(),"[]")},attachEraser:function(){d.eraser?d.eraser.element=v("[data-atoms-erase]"):d.eraser=new e("[data-atoms-erase]")},createSortables:function(n){var i,a;d.attachEraser(),r.forEach(function(t,e){i=v(i=e?1==e?".atoms-list":"#trash":".atoms-picker"),a=o.create(i[0],{sort:1==e,filter:"[data-atom-ignore]",group:t,scroll:!1,forceFallback:!0,animation:100,onStart:function(t){d.attachEraser(),v(t.item).addClass("atom-dragging"),v(t.from).hasClass("atoms-list")&&d.eraser.show()},onEnd:function(t){var e=v(t.item),n=v("#trash"),i=v(this.originalEvent.target),a=!1;if("touchend"===this.originalEvent.type){var o=n[0].getBoundingClientRect(),r=this.originalEvent;a=(r.pageY||r.changedTouches[0].pageY)-window.scrollY<=o.height}if(i.matches("#trash")||i.parent("#trash")||a)return e.remove(),d.eraser.hide(),void this.options.onSort();e.removeClass("atom-dragging"),v(t.from).hasClass("atoms-list")&&d.eraser.hide()},onSort:function(){var t=d.serialize(),e=v(u);if(!e)throw new Error('Field "'+u+'" not found in the DOM.');e.value(t),v("body").emit("change",{target:e})},onOver:function(t){if(v(t.from).matches(".atoms-list")){var e=v(t.newIndex);e.matches("#trash")||e.parent("#trash")?d.eraser.over():d.eraser.out()}}}),d.lists[e?"items":"picker"]=a,1==e&&(n.SimpleSort=a)})}};t(function(){var m,t=v("#atoms");v("body").delegate("mouseover","#atoms",function(t,e){n(e)}),n(t),(m=v("body")).delegate("click",".atoms-list [data-atom-picked] .config-cog",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.parent("ul"),h=v(u),r=h.value(),p=n.search("> [data-atom-picked]"),f=e.parent("[data-atom-picked]"),i=f.data("atom-picked");b.open({content:E("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:{data:i},overlayClickToClose:!1,remote:k(e.attribute("href")+S()),remoteLoaded:function(t,i){var e=i.elements.content.find("form"),a=s("div").html(t.body.html).find("form"),n=i.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),d=JSON.parse(r);if(1<b.getAll().length){var o=i.elements.content.search("[data-apply-and-save]");o&&o.remove()}if(!e&&!a||!n)return!0;n.on("click",function(t){t.preventDefault();var u=v(t.currentTarget);u.hideIndicator(),u.showIndicator();var e=i.elements.content.find("form")[0].elements,n=l(e,i.elements.content);if(n.invalid.length)return u.hideIndicator(),u.showIndicator("fa fa-fw fa-exclamation-triangle"),void y.error(E("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),E("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));c(a.attribute("method"),k(a.attribute("action")+S()),n.valid.join("&")||{},function(t,e){if(e.body.success){var n=w(p,f[0]);d[n]=e.body.item,h.value(JSON.stringify(d).replace(/\//g,"\\/")),f.find(".atom-title").text(d[n].title),f.data("atom-picked",JSON.stringify(d[n]).replace(/\//g,"\\/"));var i=Number(d[n].attributes.enabled),a=e.body.item.inherit&&x(e.body.item.inherit);if(f[i?"removeClass":"addClass"]("atom-disabled"),f[a?"addClass":"removeClass"]("g-inheriting"),f.attribute("title",i?"":E("GANTRY5_PLATFORM_JS_LM_DISABLED_PARTICLE","atom")),f.data("tip",null),a){var o=e.body.item.inherit,r=C(o?o.outline:null),s=o.atom||"",l=(o.include||[]).join(", ");f.data("tip",E("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+r+"</strong>")+"<br />ID: "+s+"<br />Replace: "+l)}if(m.emit("change",{target:h}),g.G5.tips.reload(),null!==u.data("apply-and-save")){var c=v("body").find(".button-save");c&&m.emit("click",{target:c})}b.close(),y.success(E("GANTRY5_PLATFORM_JS_GENERIC_SETTINGS_APPLIED","Atom"),E("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else b.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});u.hideIndicator()})})}})})}),a.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../fields/submit":219,"../ui":264,"../ui/eraser":263,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/get-outline":282,"../utils/translate":288,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/array/indexOf":75,"mout/object/size":143,"mout/string/trim":173,sortablejs:210}],248:[function(t,e,n){"use strict";var i=t("elements/domready"),m=t("elements"),h=t("elements/zen"),g=t("../../fields/submit"),v=t("../../ui").modal,b=t("../../ui").toastr,y=t("agent"),w=t("mout/array/last"),x=t("mout/array/indexOf"),a=t("sortablejs"),c=t("mout/string/trim"),k=t("../../utils/get-ajax-url").parse,S=t("../../utils/get-ajax-suffix"),C=t("../../utils/translate");t("elements/insertion"),i(function(){function p(t,e){"enter"==e&&this.CollectionNew&&(this.CollectionNew=!1,f.emit("click",{target:this.parent(".settings-param").find("[data-collection-addnew]")})),"esc"==e&&this.CollectionNew&&(this.CollectionNew=!1,f.emit("click",{target:this.parent("[data-collection-item]").find("[data-collection-remove]")}))}function n(t){var e=t||m(".collection-list ul");e&&e.forEach(function(t){(t=m(t)).SimpleSort=a.create(t[0],{handle:".fa-reorder",filter:"[data-collection-nosort]",scroll:!1,animation:150,onStart:function(){m(this.el).addClass("collection-sorting")},onEnd:function(t){var e=m(this.el);if(e.removeClass("collection-sorting"),t.oldIndex!==t.newIndex){var n=e.parent(".settings-param").find("[data-collection-data]"),i=n.value();(i=JSON.parse(i)).splice(t.newIndex,0,i.splice(t.oldIndex,1)[0]),n.value(JSON.stringify(i)),f.emit("change",{target:n})}}})})}var f=m("body");n(),f.delegate("mouseover",".collection-list ul",function(t,e){e.SimpleSort||n(e)}),f.delegate("click","[data-collection-addnew]",function(t,e){var n,i,a=e.parent(".settings-param"),o=a.find("ul"),r=o.parent("[data-field-name]").find("[data-collection-editall]"),s=a.find("[data-collection-data]"),l=a.find("[data-collection-template]"),c=o.search("> [data-collection-item]")||[],u=m(w(c)),d=m(l[0].cloneNode(!0));u?d.after(u):d.top(o),c.length&&r&&r.style("display","inline-block"),i=(n=d.find("a")).find("[data-title-editable]");var h=new RegExp("%id%","g");n.href(n.href().replace(h,c.length)),d.attribute("style",null).data("collection-item",d.data("collection-template")),d.attribute("data-collection-template",null),d.attribute("data-collection-nosort",null),i.CollectionNew=!0,f.emit("click",{target:n.siblings("[data-title-edit]")}),i.on("title-edit-exit",p),f.emit("change",{target:s})}),f.delegate("blur","[data-collection-item] [data-title-editable]",function(t,e){var n=c(e.text()),i=e.parent("[data-collection-item]"),a=i.data("collection-item"),o=e.parent("ul").search("> [data-collection-item]"),r=e.parent(".settings-param").find("[data-collection-data]"),s=r.value(),l=x(o,i[0]);-1!=l&&((s=JSON.parse(s))[l]||s.splice(l,0,{}),s[l][a]=n,r.value(JSON.stringify(s)),f.emit("change",{target:r}))},!0),f.delegate("click","[data-collection-remove]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.parent("[data-collection-item]"),i=e.parent("ul"),a=i.parent("[data-field-name]").find("[data-collection-editall]"),o=i.search("> [data-collection-item]"),r=x(o,n[0]),s=e.parent(".settings-param").find("[data-collection-data]"),l=s.value();(l=JSON.parse(l)).splice(r,1),s.value(JSON.stringify(l)),n.remove(),o.length<=2&&a&&a.style("display","none"),f.emit("change",{target:s})}),f.delegate("click","[data-collection-duplicate]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.parent(".settings-param"),i=e.parent("[data-collection-item]"),a=e.parent("ul"),o=a.parent("[data-field-name]").find("[data-collection-editall]"),r=n.find("[data-collection-template]").find("a").href(),s=a.search("> [data-collection-item]"),l=x(s,i[0]),c=m(i[0].cloneNode(!0)).after(i),u=e.parent(".settings-param").find("[data-collection-data]"),d=u.value(),h=new RegExp("%id%","g");c.find("a").href(r.replace(h,s.length+1)),(d=JSON.parse(d)).splice(l,0,d[l]),u.value(JSON.stringify(d)),1<=s.length&&o.style("display","inline-block"),f.emit("change",{target:u})}),f.delegate("click","[data-collection-item] a",function(t,e){e.find("[contenteditable]")&&(t.preventDefault(),t.stopPropagation())}),f.delegate("click","[data-collection-item] .config-cog, [data-collection-editall]",function(t,s){t&&t.preventDefault&&t.preventDefault();var e=s.find("[data-title-editable]");if(e&&e.attribute("contenteditable"))return t.stopPropagation(),!1;var n=null!==s.data("collection-editall"),i=s.parent(".settings-param"),l=i.find("[data-collection-data]"),c=l.value(),u=s.parent("[data-collection-item]"),d=i.search("ul > [data-collection-item]"),a={data:n?c:JSON.stringify(JSON.parse(c)[x(d,u[0])])};v.open({content:C("GANTRY5_PLATFORM_JS_LOADING"),method:"post",className:"g5-dialog-theme-default g5-modal-collection g5-modal-collection-"+(n?"editall":"single"),data:a,overlayClickToClose:!1,remote:k(s.attribute("href")+S()),remoteLoaded:function(t,n){if(t.body.success){var e=n.elements.content.find("form"),a=h("div").html(t.body.html).find("form"),i=n.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),o=JSON.parse(c);if(1<v.getAll().length){var r=n.elements.content.search("[data-apply-and-save]");r&&r.remove()}if(o.length,!e&&!a||!i)return!0;i.on("click",function(t){t.preventDefault();var i=m(t.currentTarget);i.hideIndicator(),i.showIndicator();var e=g(a[0].elements,n.elements.content);if(e.invalid.length)return i.hideIndicator(),i.showIndicator("fa fa-fw fa-exclamation-triangle"),void b.error(C("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),C("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));y(a.attribute("method"),k(a.attribute("action")+S()),e.valid.join("&")||{},function(t,e){if(e.body.success){if(u?o[x(d,u[0])]=e.body.data:o=e.body.data,l.value(JSON.stringify(o)),f.emit("change",{target:l}),s.parent(".settings-param-field").search("ul > [data-collection-item]").forEach(function(t,e){var n=(t=m(t)).find("[data-title-editable]"),i=o[e][t.data("collection-item")];n.data("title-editable",i).text(i)}),null!==i.data("apply-and-save")){var n=m("body").find(".button-save");n&&f.emit("click",{target:n})}v.close(),b.success(C("GANTRY5_PLATFORM_JS_GENERIC_SETTINGS_APPLIED","Collection"),C("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else v.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});i.hideIndicator()})})}else v.enableCloseByOverlay()}})})}),e.exports={}},{"../../fields/submit":219,"../../ui":264,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/translate":288,agent:1,elements:34,"elements/domready":32,"elements/insertion":35,"elements/zen":37,"mout/array/indexOf":75,"mout/array/last":79,"mout/string/trim":173,sortablejs:210}],249:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),o=t("prime-util/prime/bound"),r=t("prime-util/prime/options"),p=t("elements"),s=t("elements/domready"),l=t("elements/zen"),c=t("../../ui/drag.events"),u=t("mout/collection/forEach"),d=t("mout/function/bind"),E=t("mout/math/clamp"),h=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),f=c.EVENTS.START,m=c.EVENTS.MOVE,g=c.EVENTS.STOP,v=h?"focus":"focusin",b=new i({mixin:[r,o],inherits:a,options:{},constructor:function(t){this.setOptions(t),this.built=!1,this.attach()},attach:function(){var e=p("body");f.forEach(d(function(t){e.delegate(t,"#g5-container .g-colorpicker i",this.bound("iconClick"))},this)),e.delegate(v,"#g5-container .g-colorpicker input",this.bound("show"),!0),e.delegate("keydown","#g5-container .g-colorpicker input",d(function(t,e){switch(t.keyCode){case 9:this.hide();break;case 13:case 27:this.hide(),e[0].blur()}return!0},this)),e.delegate("keyup","#g5-container .g-colorpicker input",d(function(t,e){return this.updateFromInput(!0,e),!0},this)),e.delegate("paste","#g5-container .g-colorpicker input",d(function(t,e){setTimeout(d(function(){this.updateFromInput(!0,e)},this),1)},this))},show:function(t,e){var n=p("body");this.built||this.build(),this.element=e,this.reposition(),this.wrapper.addClass("cp-visible"),this.updateFromInput(),m.forEach(d(function(t){n.on(t,this.bound("bodyMove"))},this)),f.forEach(d(function(t){this.wrapper.delegate(t,".cp-grid, .cp-slider, .cp-opacity-slider",this.bound("bodyDown")),n.on(t,this.bound("bodyClick"))},this)),g.forEach(d(function(t){n.on(t,this.bound("targetReset"))},this))},hide:function(){var e=p("body");this.built&&(this.wrapper.removeClass("cp-visible"),m.forEach(d(function(t){e.off(t,this.bound("bodyMove"))},this)),f.forEach(d(function(t){this.wrapper.undelegate(t,".cp-grid, .cp-slider, .cp-opacity-slider",this.bound("bodyDown")),e.off(t,this.bound("bodyClick"))},this)),g.forEach(d(function(t){e.off(t,this.bound("targetReset"))},this)))},iconClick:function(t,e){t.preventDefault();var n=p(e).sibling("input");n[0].focus(),this.show(t,n)},bodyMove:function(t){t.preventDefault(),this.target&&this.move(this.target,t)},bodyClick:function(t){var e=p(t.target);e.parent(".cp-wrapper")||e.parent(".g-colorpicker")||this.hide()},bodyDown:function(t,e){t.preventDefault(),this.target=e,this.move(this.target,t,!0)},targetReset:function(t){t.preventDefault(),this.target=null},move:function(t,e){var n,i,a,o,r=this.element,s=t.find(".cp-picker"),l=t[0].getBoundingClientRect(),c=l.left+window.scrollX,u=l.top+window.scrollY,d=Math.round((e?e.pageX:0)-c),h=Math.round((e?e.pageY:0)-u);e&&e.changedTouches&&(d=(e.changedTouches?e.changedTouches[0].pageX:0)-c,h=(e.changedTouches?e.changedTouches[0].pageY:0)-u),e&&e.manualOpacity&&(h=l.height),d<0&&(d=0),h<0&&(h=0),d>l.width&&(d=l.width),h>l.height&&(h=l.height),t.parent(".cp-mode-wheel")&&s.parent(".cp-grid")&&(n=75-d,i=75-h,a=Math.sqrt(n*n+i*i),(o=Math.atan2(i,n))<0&&(o+=2*Math.PI),75<a&&(d=75-75*Math.cos(o),h=75-75*Math.sin(o)),d=Math.round(d),h=Math.round(h)),t.hasClass("cp-grid")?s.style({top:h,left:d}):s.style({top:h}),this.updateFromPicker(r,t)},build:function(){this.wrapper=l("div.cp-wrapper.cp-with-opacity.cp-mode-hue"),this.slider=l("div.cp-slider.cp-sprite").bottom(this.wrapper).appendChild(l("div.cp-picker")),this.opacitySlider=l("div.cp-opacity-slider.cp-sprite").bottom(this.wrapper).appendChild(l("div.cp-picker")),this.grid=l("div.cp-grid.cp-sprite").bottom(this.wrapper).appendChild(l("div.cp-grid-inner")).appendChild(l("div.cp-picker")),l("div").bottom(this.grid.find(".cp-picker"));var r=l("div.cp-tabs").bottom(this.wrapper);this.tabs={hue:l("div.cp-tab-hue.active").text("HUE").bottom(r),brightness:l("div.cp-tab-brightness").text("BRI").bottom(r),saturation:l("div.cp-tab-saturation").text("SAT").bottom(r),wheel:l("div.cp-tab-wheel").text("WHEEL").bottom(r),transparent:l("div.cp-tab-transp").text("TRANSPARENT").bottom(r)},f.forEach(d(function(t){r.delegate(t,"> div",d(function(t,e){if(e==this.tabs.transparent){this.opacity=0;var n=this.opacitySlider.position().height;return this.opacitySlider.find(".cp-picker").style({top:E(n-n*this.opacity,0,n)}),void this.move(this.opacitySlider,{manualOpacity:!0})}var i=r.find(".active"),a=i.attribute("class").replace(/\s|active|cp-tab-/g,""),o=e.attribute("class").replace(/\s|active|cp-tab-/g,"");this.wrapper.removeClass("cp-mode-"+a).addClass("cp-mode-"+o),i.removeClass("active"),e.addClass("active"),this.mode=o,this.updateFromInput()},this))},this)),this.wrapper.bottom("#g5-container"),this.built=!0,this.mode="hue"},updateFromInput:function(t,e){var n,i,a=(e=p(e)||this.element).value(),o=a.replace(/\s/g,"").match(/^rgba?\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(.+)\)/);if(a=O(a)||a,o=o?E(o[1],0,1):1,(n=T(a))||(n="#ffffff"),i=y(n),this.built){this.opacity=Math.max(o,0);var r=this.opacitySlider.position().height;this.opacitySlider.find(".cp-picker").style({top:E(r-r*this.opacity,0,r)});var s,l,c,u,d=this.grid.position().height,h=this.grid.position().width;switch(r=this.slider.position().height,this.mode){case"wheel":s=E(Math.ceil(.75*i.s),0,d/2),l=i.h*Math.PI/180,c=E(75-Math.cos(l)*s,0,h),u=E(75-Math.sin(l)*s,0,d),this.grid.style({backgroundColor:"transparent"}).find(".cp-picker").style({top:u,left:c}),u=150-i.b/(100/d),""===n&&(u=0),this.slider.find(".cp-picker").style({top:u}),this.slider.style({backgroundColor:I({h:i.h,s:i.s,b:100})});break;case"saturation":c=E(5*i.h/12,0,150),u=E(d-Math.ceil(i.b/(100/d)),0,d),this.grid.find(".cp-picker").style({top:u,left:c}),u=E(r-i.s*(r/100),0,r),this.slider.find(".cp-picker").style({top:u}),this.slider.style({backgroundColor:I({h:i.h,s:100,b:i.b})}),this.grid.find(".cp-grid-inner").style({opacity:i.s/100});break;case"brightness":c=E(5*i.h/12,0,150),u=E(d-Math.ceil(i.s/(100/d)),0,d),this.grid.find(".cp-picker").style({top:u,left:c}),u=E(r-i.b*(r/100),0,r),this.slider.find(".cp-picker").style({top:u}),this.slider.style({backgroundColor:I({h:i.h,s:i.s,b:100})}),this.grid.find(".cp-grid-inner").style({opacity:1-i.b/100});break;case"hue":default:c=E(Math.ceil(i.s/(100/h)),0,h),u=E(d-Math.ceil(i.b/(100/d)),0,d),this.grid.find(".cp-picker").style({top:u,left:c}),u=E(r-i.h/(360/r),0,r),this.slider.find(".cp-picker").style({top:u}),this.grid.style({backgroundColor:I({h:i.h,s:100,b:100})})}}t||e.value(this.getValue(n)),this.emit("change",e,n,o)},updateFromPicker:function(t,e){function n(t,e){var n,i;return t.length&&e?(n=t[0].getBoundingClientRect().left,i=t[0].getBoundingClientRect().top,{x:n-e[0].getBoundingClientRect().left+t[0].offsetWidth/2,y:i-e[0].getBoundingClientRect().top+t[0].offsetHeight/2}):null}var i,a,o,r,s,l,c,u,d=this.wrapper.find(".cp-grid"),h=this.wrapper.find(".cp-slider"),p=this.wrapper.find(".cp-opacity-slider"),f=d.find(".cp-picker"),m=h.find(".cp-picker"),g=p.find(".cp-picker"),v=n(f,d),b=n(m,h),y=n(g,p),w=d[0].getBoundingClientRect().width,x=d[0].getBoundingClientRect().height,k=h[0].getBoundingClientRect().height,S=p[0].getBoundingClientRect().height,C=this.element.value();if(C=O(C)||C,(i=T(C))||(i="#ffffff"),e.hasClass("cp-grid")||e.hasClass("cp-slider"))switch(this.mode){case"wheel":s=w/2-v.x,l=x/2-v.y,c=Math.sqrt(s*s+l*l),(u=Math.atan2(l,s))<0&&(u+=2*Math.PI),75<c&&(c=75,v.x=69-75*Math.cos(u),v.y=69-75*Math.sin(u)),o=E(c/.75,0,100),a=E(180*u/Math.PI,0,360),r=E(100-Math.floor(b.y*(100/k)),0,100),i=I({h:a,s:o,b:r}),h.style({backgroundColor:I({h:a,s:o,b:100})});break;case"saturation":a=E(parseInt(v.x*(360/w),10),0,360),o=E(100-Math.floor(b.y*(100/k)),0,100),r=E(100-Math.floor(v.y*(100/x)),0,100),i=I({h:a,s:o,b:r}),h.style({backgroundColor:I({h:a,s:100,b:r})}),d.find(".cp-grid-inner").style({opacity:o/100});break;case"brightness":a=E(parseInt(v.x*(360/w),10),0,360),o=E(100-Math.floor(v.y*(100/x)),0,100),r=E(100-Math.floor(b.y*(100/k)),0,100),i=I({h:a,s:o,b:r}),h.style({backgroundColor:I({h:a,s:o,b:100})}),d.find(".cp-grid-inner").style({opacity:1-r/100});break;default:a=E(360-parseInt(b.y*(360/k),10),0,360),o=E(Math.floor(v.x*(100/w)),0,100),r=E(100-Math.floor(v.y*(100/x)),0,100),i=I({h:a,s:o,b:r}),d.style({backgroundColor:I({h:a,s:100,b:100})})}e.hasClass("cp-opacity-slider")&&(this.opacity=Math.max(parseFloat(1-y.y/S).toFixed(2),0)),t.value(this.getValue(i)),this.emit("change",this.element,i,this.opacity)},reposition:function(){var t=this.element[0].getBoundingClientRect(),e=p("#g5-container")[0].getBoundingClientRect();this.wrapper.style({top:t.top+t.height-e.top,left:t.left-e.left})},getValue:function(t){if(1==this.opacity)return t;var e=x(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+this.opacity+")"}}),T=function(t){return 3!==(t=t.replace(/[^A-F0-9]/gi,"")).length&&6!==t.length?"":(3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t.toLowerCase())},O=function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},I=function(t){return e=function(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=a;else{var o=a,r=(255-i)*a/255,s=n%60*(o-r)/60;360===n&&(n=0),n<60?(e.r=o,e.b=r,e.g=r+s):n<120?(e.g=o,e.b=r,e.r=o-s):n<180?(e.g=o,e.r=r,e.b=r+s):n<240?(e.b=o,e.r=r,e.g=o-s):n<300?(e.b=o,e.g=r,e.r=r+s):n<360?(e.r=o,e.g=r,e.b=o-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}(t),n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)],u(n,function(t,e){1===t.length&&(n[e]="0"+t)}),"#"+n.join("");var e,n},y=function(t){var e=w(x(t));return 0===e.s&&(e.h=360),e},w=function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),a=i-n;return e.b=i,e.s=0!==i?255*a/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/a:t.g===i?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},x=function(t){return{r:(t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}};s(function(){var t=new b,r=p("body");t.on("change",function(t,e,n){clearTimeout(this.timer);var i=x(e),a="dark"==(128<=(299*i.r+587*i.g+114*i.b)/1e3?"dark":"light")||!n||n<.35;if(n<1){var o="rgba("+i.r+", "+i.g+", "+i.b+", "+n+")";t.style({backgroundColor:o})}else t.style({backgroundColor:e});t.parent(".g-colorpicker")[a?"removeClass":"addClass"]("light-text"),this.timer=setTimeout(function(){t.emit("input"),r.emit("input",{target:t})},150)})}),e.exports=b},{"../../ui/drag.events":262,elements:34,"elements/domready":32,"elements/zen":37,"mout/collection/forEach":89,"mout/function/bind":92,"mout/math/clamp":117,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],250:[function(o,r,t){(function(s){"use strict";var d=o("../../utils/elements.utils"),t=o("prime"),l=o("agent"),h=o("elements/zen"),e=o("elements/domready"),p=o("mout/function/bind"),a=(o("mout/string/rtrim"),o("mout/lang/deepClone")),f=o("mout/object/deepFillIn"),m=o("../../ui").modal,g=o("../../utils/get-ajax-suffix"),v=o("../../utils/get-ajax-url").parse,b=o("../../utils/get-ajax-url").global,y=o("../../utils/translate"),n=o("../../utils/cookie"),w=o("dropzone"),i=new t({constructor:function(t){var e=t.data("g5-filepicker");this.data=!!e&&JSON.parse(e),this.data&&!this.data.value&&(this.data.value=d(this.data.field).value()),this.colors={error:"#D84747",success:"#9ADF87",small:"#aaaaaa",gradient:["#9e38eb","#4e68fc"]}},open:function(){this.data&&(this.data.value=d(this.data.field).value()),m.open({method:"post",data:this.data,content:y("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-filepicker",remote:v(b("filepicker")+g()),remoteLoaded:p(this.loaded,this),afterClose:p(function(){this.dropzone&&this.dropzone.destroy()},this)})},getPath:function(){var t,e=this.content.search(".g-folders .active");return e?(t=d(e[e.length-1]),JSON.parse(t.data("folder")).pathname.replace(/\/$/,"")+"/"):null},getPreviewTemplate:function(){var t=h("li[data-file]"),e=(h("span.g-file-delete[data-g-file-delete][data-dz-remove]").html('<i class="fa fa-fw fa-trash-o fa-trash-alt" aria-hidden="true"></i>').bottom(t),h("div.g-thumb[data-dz-thumbnail]").bottom(t));h("span.g-file-name[data-dz-name]").bottom(t),h("span.g-file-size[data-dz-size]").bottom(t),h("span.g-file-mtime[data-dz-mtime]").bottom(t);h("span.g-file-progress[data-file-uploadprogress]").html('<span class="g-file-progress-text"></span>').bottom(t),h("div").bottom(e),t.bottom("body");var n=t[0].outerHTML;return t.remove(),n},loaded:function(t,e){var o=e.elements.content,c=(o.search(".g-bookmark"),o.find(".g-files")),i=a(this.data),u=this.colors,r=this;this.content=o,c&&(this.dropzone=new w("body",{previewTemplate:this.getPreviewTemplate(),previewsContainer:c.find("ul:not(.g-list-labels)")[0],thumbnailWidth:100,thumbnailHeight:100,clickable:"[data-upload]",acceptedFiles:this.acceptedFiles(this.data.filter)||"",accept:p(function(t,e){!this.data.filter||t.name.toLowerCase().match(this.data.filter)?e():e("<code>"+t.name+"</code> "+y("GANTRY5_PLATFORM_JS_FILTER_MISMATCH")+": <br />  <code>"+this.data.filter+"</code>")},this),url:p(function(t){return v(b("filepicker/upload/"+s.btoa(encodeURIComponent(this.getPath()+t[0].name)))+g())},this)}),this.dropzone.on("thumbnail",function(t,e){var n=t.name.split(".");n=n.length&&1!=n.length?n.reverse()[0]:"-",d(t.previewElement).addClass("g-image g-image-"+n.toLowerCase()).find("[data-dz-thumbnail] > div").attribute("style","background-image: url("+encodeURI(e)+");")}),this.dropzone.on("addedfile",function(t){var e=d(t.previewElement),n=e.find("[data-file-uploadprogress]"),i=c.hasClass("g-filemode-list"),a={value:0,animation:!1,insertLocation:"bottom"},o=t.name.split(".");o=o.length&&1!=o.length?o.reverse()[0]:"-",t.type.match(/image.*/)?e.find(".g-thumb").addClass("g-image g-image-"+o.toLowerCase()):e.find(".g-thumb").text(o),a=f(i?{size:20,thickness:10,fill:{color:u.small,gradient:!1}}:{size:50,thickness:"auto",fill:{gradient:u.gradient,color:!1}},a),e.addClass("g-file-uploading"),n.progresser(a),n.attribute("title",y("GANTRY5_PLATFORM_JS_PROCESSING")).find(".g-file-progress-text").html("&bull;&bull;&bull;").attribute("title",y("GANTRY5_PLATFORM_JS_PROCESSING"))}).on("processing",function(t){d(t.previewElement).find("[data-file-uploadprogress]").find(".g-file-progress-text").text("0%").attribute("title","0%")}).on("sending",function(t,e,n){d(t.previewElement).find("[data-file-uploadprogress]").attribute("title","0%").find(".g-file-progress-text").text("0%").attribute("title","0%")}).on("uploadprogress",function(t,e,n){var i=d(t.previewElement).find("[data-file-uploadprogress]");i.progresser({value:e/100}),i.attribute("title",Math.round(e)+"%").find(".g-file-progress-text").text(Math.round(e)+"%").attribute("title",Math.round(e)+"%")}).on("complete",function(t){r.refreshFiles(o)}).on("error",function(t,e){var n=d(t.previewElement),i=n.find("[data-file-uploadprogress]"),a=n.find(".g-file-progress-text"),o=c.hasClass("g-filemode-list");n.addClass("g-file-error"),i.title("Error").progresser({fill:{color:u.error,gradient:!1},value:1,thickness:o?10:25}),a.title("Error").html('<i class="fa fa-exclamation" aria-hidden="true"></i>').parent("[data-file-uploadprogress]").popover({content:e.html?e.html:e.error&&e.error.message?e.error.message:e,placement:"auto",trigger:"mouse",style:"filepicker, above-modal",width:"auto",targetEvents:!1})}).on("success",function(t,e,n){var i=d(t.previewElement),a=i.find("[data-file-uploadprogress]"),o=i.find(".g-file-mtime"),r=i.find(".g-file-progress-text"),s=i.find(".g-thumb"),l=c.hasClass("g-filemode-list");a.progresser({fill:{color:u.success,gradient:!1},value:1,thickness:l?10:25}),r.html('<i class="fa fa-check" aria-hidden="true"></i>'),setTimeout(p(function(){a.animate({opacity:0},{duration:500}),s.animate({opacity:1},{duration:500,callback:function(){i.data("file",JSON.stringify(e.finfo)).data("file-url",e.url).removeClass("g-file-uploading"),i.dropzone=t,a.remove(),o.text(y("GANTRY5_PLATFORM_JUST_NOW"))}})},this),500)})),o.delegate("click",".g-bookmark-title",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.nextSibling(".g-folders"),i=e.parent(".g-bookmark");n&&n.slideToggle(function(){i.toggleClass("collapsed",n.gSlideCollapsed)})}),o.delegate("click","[data-folder]",p(function(t,a){t&&t.preventDefault&&t.preventDefault();var e=JSON.parse(a.data("folder")),n=d("[data-file].selected");i.root=e.pathname,i.value=!!n&&n.data("file-url"),i.subfolder=!0,a.showIndicator("fa fa-li fa-fw fa-spin-fast fa-spinner"),l(v(b("filepicker")+g()),i).send(p(function(t,e){var n,i;(a.hideIndicator(),this.addActiveState(a),e.body.success)?(e.body.subfolder&&(n=h("div").html(e.body.subfolder),(i=a.nextSibling())&&!i.attribute("data-folder")&&i.remove(),n.children().after(a)),e.body.files?(c.empty(),(n=h("div").html(e.body.files)).children().bottom(c).style({opacity:0}).animate({opacity:1},{duration:"250ms"})):c.find("> ul:not(.g-list-labels)").empty(),this.dropzone.previewsContainer=c.find("ul:not(.g-list-labels)")[0]):m.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})},this))},this)),o.delegate("click","[data-g-file-preview]",p(function(t,e){t.preventDefault(),t.stopPropagation();var n=e.parent("[data-file]");if(JSON.parse(n.data("file")).isImage){var i=n.find(".g-thumb > div");m.open({className:"g5-dialog-theme-default g5-modal-filepreview center",content:'<img src="'+i[0].style.backgroundImage.slice(4,-1).replace(/"/g,"")+'" />'})}},this)),o.delegate("click","[data-g-file-delete]",p(function(t,e){t.preventDefault();var n=e.parent("[data-file]"),i=JSON.parse(n.data("file")),a=v(b("filepicker/"+s.btoa(encodeURIComponent(i.pathname))+g()));if(!i.isInCustom)return!1;l("delete",a,function(t,e){e.body.success?(n.addClass("g-file-deleted"),setTimeout(function(){n.remove(),r.refreshFiles(o)},210)):m.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})},this)),o.delegate("click","[data-file]",p(function(t,e){t&&t.preventDefault&&t.preventDefault();var n=d(t.target),i=null!==n.data("g-file-delete")||n.parent("[data-g-file-delete]"),a=null!==n.data("g-file-preview")||n.parent("[data-g-file-preview]");if(!(e.hasClass("g-file-error")||e.hasClass("g-file-uploading")||i||a)){JSON.parse(e.data("file"));c.search("[data-file]").removeClass("selected"),e.addClass("selected")}},this)),o.delegate("click","[data-select]",p(function(t,e){t&&t.preventDefault&&t.preventDefault();var n=c.find("[data-file].selected"),i=n?n.data("file-url"):"";d(this.data.field).value(i),d("body").emit("input",{target:this.data.field}),m.close()},this)),o.delegate("click","[data-files-mode]",p(function(t,e){t&&t.preventDefault&&t.preventDefault(),e.hasClass("active")||(d("[data-files-mode]").removeClass("active"),e.addClass("active"),n.write("g5_files_mode",e.data("files-mode")),c.animate({opacity:0},{duration:200,callback:function(){var n=e.data("files-mode"),t=c.search("[data-file-uploadprogress]"),i="list"==n?{size:20,thickness:10,fill:{color:u.small,gradient:!1}}:{size:50,thickness:"auto",fill:{gradient:u.gradient,color:!1}};c.attribute("class","g-files g-block g-filemode-"+n),t&&t.forEach(function(t){t=d(t);var e=a(i);t.parent(".g-file-error")&&(e.fill={color:u.error},e.value=1,e.thickness="list"==n?10:25),t.progresser(e)}),c.animate({opacity:1},{duration:200})}}))},this))},addActiveState:function(t){var e=this.content.search("[data-folder].active, .g-folders > .active"),n=t.parent();for(e&&e.removeClass("active"),t.addClass("active");"ul"==n.tag()&&!n.hasClass("g-folders");)n.previousSibling().addClass("active"),n=n.parent()},acceptedFiles:function(t){var e="";switch(t){case".(jpe?g|gif|png|svg)$":e=".jpg,.jpeg,.gif,.png,.svg,.JPG,.JPEG,.GIF,.PNG,.SVG";break;case".(mp4|webm|ogv|mov)$":e=".mp4,.webm,.ogv,.mov,.MP4,.WEBM,.OGV,.MOV"}return e},refreshFiles:function(t){var e=d("[data-folder].active"),n=e[e.length-1];n&&t.emit("click",{target:d(n)})}});e(function(){d("body").delegate("click","[data-g5-filepicker]",function(t,e){t&&t.preventDefault&&t.preventDefault(),(e=d(e)).GantryFilePicker||(e.GantryFilePicker=new i(e)),e.GantryFilePicker.open()})}),r.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ui":264,"../../utils/cookie":274,"../../utils/elements.utils":276,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/translate":288,agent:1,dropzone:28,"elements/domready":32,"elements/zen":37,"mout/function/bind":92,"mout/lang/deepClone":101,"mout/object/deepFillIn":126,"mout/string/rtrim":171,prime:203}],251:[function(t,e,n){"use strict";var i=t("prime"),h=t("../../utils/elements.utils"),r=t("elements/zen"),a=t("prime/map")(),o=t("prime/emitter"),s=t("prime-util/prime/bound"),l=(t("prime-util/prime/options"),t("elements/domready")),c=t("../../utils/decouple"),p=t("mout/function/bind"),f=(t("mout/array/map"),t("mout/array/forEach"),t("mout/array/contains")),m=(t("mout/array/last"),t("mout/array/split"),t("mout/array/removeAll")),g=t("mout/array/insert"),v=(t("mout/array/append"),t("mout/array/find"),t("mout/array/combine"),t("mout/array/intersection")),u=(t("mout/object/merge"),t("mout/string/unhyphenate")),d=t("mout/string/properCase"),b=t("mout/string/trim"),y=t("../../utils/get-ajax-suffix"),w=t("../../utils/get-ajax-url").parse,x=t("../../utils/get-ajax-url").global,k=t("../../ui").modal,S=t("../../utils/async-foreach"),C=t("../../utils/translate"),E=(t("agent"),t("webfontloader"));t("../../utils/elements.viewport");var T=new i({mixin:s,inherits:o,previewSentence:{latin:"Wizard boy Jack loves the grumpy Queen's fox.","latin-ext":"Wizard boy Jack loves the grumpy Queen's fox.",arabic:"نص حكيم له سر قاطع وذو شأن عظيم مكتوب على ثوب أخضر ومغلف بجلد أزرق",cyrillic:"В чащах юга жил бы цитрус? Да, но фальшивый экземпляр!","cyrillic-ext":"В чащах юга жил бы цитрус? Да, но фальшивый экземпляр!",devanagari:"एक पल का क्रोध आपका भविष्य बिगाड सकता है",greek:"Τάχιστη αλώπηξ βαφής ψημένη γη, δρασκελίζει υπέρ νωθρού κυνός","greek-ext":"Τάχιστη αλώπηξ βαφής ψημένη γη, δρασκελίζει υπέρ νωθρού κυνός",hebrew:"דג סקרן שט בים מאוכזב ולפתע מצא חברה",khmer:"ខ្ញុំអាចញ៉ាំកញ្ចក់បាន ដោយគ្មានបញ្ហា",telugu:"దేశ భాషలందు తెలుగు లెస్స",vietnamese:"Tôi có thể ăn thủy tinh mà không hại gì."},constructor:function(){this.wf=E,this.field=null,this.element=null,this.throttle=!1,this.selected=null,this.loadedFonts=[],this.filters={search:"",script:"latin",categories:[]}},open:function(t,e){var n=e.data("g5-fontpicker");if(!n)throw new Error("No fontpicker data found");n=JSON.parse(n),this.field=h(n.field),k.open({content:C("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-fonts",remote:w(x("fontpicker")+y()),remoteLoaded:p(function(t,e){var n=e.elements.content;this.attachEvents(n),this.updateCategories(n),this.search(),this.scroll(n.find("ul.g-fonts-list")),this.updateTotal(),this.selectFromValue(),setTimeout(function(){n.find(".particle-search-wrapper input")[0].focus()},5)},this)})},scroll:function(n){clearTimeout(this.throttle),this.throttle=setTimeout(p(function(){if(n){var t,e=(n.find("ul.g-fonts-list")||n).inviewport(" > li:not(.g-font-hide)",550*(0<(t=window.navigator.userAgent).indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")?2:7)),i=[];e&&(h(e).forEach(function(t){var e=(t=h(t)).data("font"),n=t.data("variant");!f(this.loadedFonts,e)&&n?i.push(e+("regular"!=n?":"+n:"")):n&&t.find('[data-variant="'+n+'"] .preview').style({fontFamily:e,fontWeight:"regular"==n?"normal":n})},this),i&&i.length&&this.wf.load({classes:!1,google:{families:i},fontactive:p(function(t,e){n.find('li[data-font="'+t+'"]:not(.g-variant-hide) > .preview').style({fontFamily:t,fontWeight:e}),this.loadedFonts.push(t)},this)}))}else clearTimeout(this.throttle)},this),100)},unselect:function(t){if(!(t=t||this.selected))return!1;var e=t.element.data("variant");t.element.removeClass("selected"),t.element.search("input[type=checkbox]").checked(!1),t.element.search("[data-font]").addClass("g-variant-hide"),t.element.find('[data-variant="'+e+'"]').removeClass("g-variant-hide"),t.variants=[t.baseVariant],t.selected=[]},selectFromValue:function(){var t,e,n,i=this.field.value(),a=!1;if(i.match("family=")){var o=i.split("&"),r=o[0].split(":");t=r[0].replace("family=","").replace(/\+/g," "),e=r[1]?r[1].split(","):["regular"],n=o[1]?o[1].replace("subset=","").split(","):["latin"]}else{var s,l=h('[data-category="local-fonts"][data-font]')||[];if(l=l.map(function(t){return h(t).data("font")}),i=i.replace(/(\s{1,})?,(\s{1,})?/gi,",").split(","),!(s=v(l,i)).length)return!1;a=!0,t=s.shift()}var c=h('ul.g-fonts-list > [data-font="'+t+'"]'+(a?'[data-category="local-fonts"]':':not([data-category="local-fonts"])'));e=e||c.data("variants").split(",")||["regular"],f(e,"400")&&(m(e,"400"),g(e,"regular")),f(e,"400italic")&&(m(e,"400italic"),g(e,"italic")),this.selected={font:t,baseVariant:c.data("variant"),element:c,variants:e,selected:[],local:a,charsets:n,availableVariants:c.data("variants").split(","),expanded:a,loaded:a},(a?[t]:e).forEach(function(t){this.select(c,t),(t=c.find('> ul > [data-variant="'+t+'"]'))&&t.removeClass("g-variant-hide")},this);var u=c.find(".font-charsets-selected");if(u){var d=c.data("subsets").split(",").length;u.html('(<i class="fa fa-fw fa-check-square-o" aria-hidden="true"></i>  <span class="font-charsets-details">'+n.length+" of "+d+"</span> selected)")}a||(h("ul.g-fonts-list")[0].scrollTop=c[0].offsetTop),this.toggleExpansion(),setTimeout(p(function(){this.toggleExpansion()},this),50),a||setTimeout(p(function(){h("ul.g-fonts-list")[0].scrollTop=c[0].offsetTop},this,250))},select:function(t,e){var n=t.data("variant"),i=!n;if(!this.selected||this.selected.element!=t){if(e&&this.selected){var a=this.selected.element.find(".font-charsets-selected");if(a){var o=t.data("subsets").split(",").length;a.html('(<i class="fa fa-fw fa-check-square-o" aria-hidden="true"></i>  <span class="font-charsets-details">1 of '+o+"</span> selected)")}}this.selected={font:t.data("font"),baseVariant:n,element:t,variants:[n],selected:[],local:i,charsets:["latin"],availableVariants:t.data("variants").split(","),expanded:i,loaded:i}}if(e||this.toggleExpansion(),e||i){var r=h('ul.g-fonts-list > [data-font]:not([data-font="'+this.selected.font+'"]) input[type="checkbox"]:checked');r&&(r.checked(!1),r.parent("[data-variants]").removeClass("font-selected"));var s=this.selected.element.find('input[type="checkbox"][value="'+(i?this.selected.font:e)+'"]'),l=s.checked();s&&s.checked(!l),l?(e!=this.selected.baseVariant&&m(this.selected.variants,e),m(this.selected.selected,e)):(g(this.selected.variants,e),g(this.selected.selected,e)),this.updateSelection()}},toggleExpansion:function(){if(!(this.selected.availableVariants.length<=1))if(this.selected.local)this.selected.expanded=!0;else{if(this.selected.expanded){var t=':not([data-variant="'+this.selected.variants.join('"]):not([data-variant="')+'"])';(t=this.selected.element.search("[data-font]"+t))&&t.addClass("g-variant-hide")}else{var e=this.selected.element.data("variants");1<e.split(",").length&&(this.manipulateLink(this.selected.font),this.selected.element.search("[data-font]").removeClass("g-variant-hide"),this.selected.loaded||this.wf.load({classes:!1,google:{families:[this.selected.font.replace(/\s/g,"+")+":"+e]},fontactive:p(function(t,e){var n=this.fvdToStyle(t,e),i=n.fontWeight;"400"==i?i="normal"==n.fontStyle?"regular":"italic":"italic"==n.fontStyle&&(i+="italic"),this.selected.element.find('li[data-variant="'+i+'"] .preview').style(n),this.selected.loaded=!0},this)}))}this.selected.expanded=!this.selected.expanded}},manipulateLink:function(t){t=t.replace(/\s/g,"+");var e=h('head link[href*="'+t+'"]');if(e){var n=decodeURIComponent(e.href()).split("|");!n||n.length<=1||(m(n,t),e.attribute("href",encodeURI(n.join("|"))))}},toggle:function(t,e){e=h(e);var n=h(t.target);return"checkbox"==n.attribute("type")&&n.checked(!n.checked()),this.select(e.parent("[data-font]")||e,!!e.parent("[data-font]")&&e.data("variant"),e),!1},updateSelection:function(){var t,e,n=h(".g-particles-footer .font-selected");if(n){if(!this.selected.selected.length)return n.empty(),void this.selected.element.removeClass("font-selected");t=this.selected.selected.sort(),e=this.selected.local?"(<small>local</small>)":"(<small>"+t.join(", ").replace("regular","normal")+"</small>)",this.selected.element.addClass("font-selected"),n.html("<strong>"+this.selected.font+"</strong> "+e)}},updateTotal:function(){var t=h(".g-particles-header .particle-search-total"),e=h(".g-fonts-list > [data-font]:not(.g-font-hide)");t.text(e?e.length:0)},updateCategories:function(t){var e=t.find("[data-font-categories]");e&&(this.filters.categories=e.data("font-categories").split(","))},attachEvents:function(t){var e=t.find(".g-particles-header"),n=t.find(".g-fonts-list"),i=e.find("input.font-search"),a=e.find("input.font-preview");c(n,"scroll",p(this.scroll,this,n)),t.delegate("click",".g-fonts-list li[data-font]",p(this.toggle,this)),i&&i.on("keyup",p(this.search,this,i)),a&&a.on("keyup",p(this.updatePreview,this,a)),this.attachCharsets(t),this.attachLocalVariants(t),this.attachFooter(t)},attachCharsets:function(t){t.delegate("mouseover",".font-charsets-selected",p(function(t,o){if(!o.PopoverDefined){o.getPopover({placement:"auto",width:"200",trigger:"mouse",style:"font-categories, above-modal"});o.on("beforeshow.popover",p(function(t){var n,e,i=o.parent("[data-subsets]").data("subsets").split(","),a=t.$target.find(".g5-popover-content");a.empty(),i.forEach(function(t){e=f(this.selected.charsets,t)?"latin"==t?"checked disabled":"checked":"",r("div").html('<label><input type="checkbox" '+e+' value="'+t+'"/> '+d(u(t.replace("ext","extended")))+"</label>").bottom(a)},this),a.delegate("click",'input[type="checkbox"]',p(function(t,e){e=h(e),n=a.search('input[type="checkbox"]:checked'),this.selected.charsets=n?n.map("value"):[],o.html('(<i class="fa fa-fw fa-check-square-o" aria-hidden="true"></i>  <span class="font-charsets-details">'+this.selected.charsets.length+" of "+i.length+"</span> selected)")},this)),t.displayContent()},this)),o.getPopover().show()}},this))},attachLocalVariants:function(t){t.delegate("mouseover",".g-font-variants-list",p(function(t,i){if(!i.PopoverDefined){i.getPopover({placement:"auto",width:"200",trigger:"mouse",style:"font-categories, above-modal"});i.on("beforeshow.popover",p(function(t){var e=t.$target.find(".g5-popover-content"),n=i.parent("[data-variants]").data("variants").split(",");e.empty(),S(n,p(function(t){t="400"==t?"regular":"400italic"==t?"italic":t+"",r("div").text(this.mapVariant(t)).bottom(e)},this)),t.displayContent()},this))}},this))},attachFooter:function(t){var a,e=t.find(".g-particles-footer"),n=e.find("button.button-primary"),o=e.find(".font-category"),i=e.find(".font-subsets");return n.on("click",p(function(){if(!h('ul.g-fonts-list > [data-font] input[type="checkbox"]:checked'))return this.field.value(""),void k.close();var t=this.selected.font.replace(/\s/g,"+"),e=this.selected.selected,n=this.selected.charsets;e&&1==e.length&&"regular"==e[0]&&(e=[]),n&&1==n.length&&"latin"==n[0]&&(n=[]),f(e,"regular")&&(m(e,"regular"),g(e,"400")),f(e,"italic")&&(m(e,"italic"),g(e,"400italic")),this.selected.local?this.field.value(t):this.field.value("family="+t+(e.length?":"+e.join(","):"")+(n.length?"&subset="+n.join(","):"")),this.field.emit("input"),h("body").emit("input",{target:this.field}),k.close()},this)),o.popover({placement:"top",width:"200",trigger:"mouse",style:"font-categories, above-modal"}).on("beforeshow.popover",p(function(t){var n,e=o.data("font-categories").split(","),i=t.$target.find(".g5-popover-content");i.empty(),e.forEach(function(t){"local-fonts"!=t&&(a=f(this.filters.categories,t)?"checked":"",r("div").html('<label><input type="checkbox" '+a+' value="'+t+'"/> '+d(u(t))+"</label>").bottom(i))},this),i.delegate("click",'input[type="checkbox"]',p(function(t,e){e=h(e),n=i.search('input[type="checkbox"]:checked'),this.filters.categories=n?n.map("value"):[],o.find("small").text(this.filters.categories.length),this.search()},this)),t.displayContent()},this)),i.popover({placement:"top",width:"200",trigger:"mouse",style:"font-subsets, above-modal"}).on("beforeshow.popover",p(function(t){var e=i.data("font-subsets").split(","),n=t.$target.find(".g5-popover-content");n.empty(),e.forEach(function(t){a=t==this.filters.script?"checked":"",r("div").html('<label><input name="font-subset[]" type="radio" '+a+' value="'+t+'"/> '+d(u(t.replace("ext","extended")))+"</label>").bottom(n)},this),n.delegate("change",'input[type="radio"]',p(function(t,e){e=h(e),this.filters.script=e.value(),h(".g-particles-header input.font-preview").value(this.previewSentence[this.filters.script]),i.find("small").text(d(u(e.value().replace("ext","extended")))),this.search(),this.updatePreview()},this)),t.displayContent()},this)),t},search:function(t){t=t||h(".g-particles-header input.font-search");var e,n,i,a=h(".g-fonts-list"),o=t.value();a.search("> [data-font]").forEach(function(t){t=h(t),e=t.data("font"),n=t.data("subsets").split(","),i=t.data("category"),t.removeClass("g-font-hide"),this.selected&&this.selected.font==e&&this.selected.selected.length||(f(n,this.filters.script)&&f(this.filters.categories,i)&&e.match(new RegExp("^"+o+"|\\s"+o,"gi"))?t.removeClass("g-font-hide"):t.addClass("g-font-hide"))},this),this.updateTotal(),clearTimeout(t.refreshTimer),t.refreshTimer=setTimeout(p(function(){this.scroll(h("ul.g-fonts-list"))},this),400),t.previousValue=o},updatePreview:function(t){t=t||h(".g-particles-header input.font-preview"),clearTimeout(t.refreshTimer);var e=t.value(),n=h(".g-fonts-list");if(e=b(e)?b(e):this.previewSentence[this.filters.script],t.previousValue==e)return!0;n.search("[data-font] .preview").text(e),t.previousValue=e},fvdToStyle:function(t,e){var n=e.match(/([a-z])([0-9])/);if(!n)return"";return{fontFamily:t,fontStyle:{n:"normal",i:"italic",o:"oblique"}[n[1]],fontWeight:(100*n[2]).toString()}},mapVariant:function(t){switch(t){case"100":return"Thin 100";case"100italic":return"Thin 100 Italic";case"200":return"Extra-Light 200";case"200italic":return"Extra-Light 200 Italic";case"300":return"Light 300";case"300italic":return"Light 300 Italic";case"400":case"regular":return"Normal 400";case"400italic":case"italic":return"Normal 400 Italic";case"500":return"Medium 500";case"500italic":return"Medium 500 Italic";case"600":return"Semi-Bold 600";case"600italic":return"Semi-Bold 600 Italic";case"700":return"Bold 700";case"700italic":return"Bold 700 Italic";case"800":return"Extra-Bold 800";case"800italic":return"Extra-Bold 800 Italic";case"900":return"Ultra-Bold 900";case"900italic":return"Ultra-Bold 900 Italic";default:return"Unknown Variant"}}});l(function(){h("body").delegate("click","[data-g5-fontpicker]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=a.get(e);n||(n=new T,a.set(e,n)),n.open(t,e)})}),e.exports=T},{"../../ui":264,"../../utils/async-foreach":273,"../../utils/decouple":275,"../../utils/elements.utils":276,"../../utils/elements.viewport":277,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/translate":288,agent:1,"elements/domready":32,"elements/zen":37,"mout/array/append":64,"mout/array/combine":65,"mout/array/contains":66,"mout/array/find":71,"mout/array/forEach":74,"mout/array/insert":76,"mout/array/intersection":77,"mout/array/last":79,"mout/array/map":80,"mout/array/removeAll":82,"mout/array/split":85,"mout/function/bind":92,"mout/object/merge":138,"mout/string/properCase":165,"mout/string/trim":173,"mout/string/unhyphenate":176,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202,"prime/map":204,webfontloader:212}],252:[function(t,e,n){"use strict";var d=t("../../utils/elements.utils"),i=t("elements/domready"),h=t("../../ui").modal,a=t("../../utils/get-ajax-suffix"),o=t("../../utils/get-ajax-url").parse,r=t("../../utils/get-ajax-url").global,s=t("../../utils/translate"),l=t("mout/string/trim"),p=t("mout/array/contains");i(function(){var t=d("body");t.delegate("keyup",'.g-icons input[type="text"]',function(t,e){var n=(e=d(e)).sibling("[data-g5-iconpicker]")||e.siblings().find("[data-g5-iconpicker]"),i=e.value();n.find("i").attribute("class",i||"fa fa-hand-o-up picker"),n[0].offsetWidth||n.find("i").attribute("class","fa fa-hand-o-up picker")}),t.delegate("click","[data-g5-iconpicker]",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=d(e);var i=d(e.data("g5-iconpicker")),c=e,u=l(i.value()).replace(/\s{2,}/g," ").split(" ");h.open({content:s("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-icons",remote:o(r("icons")+a()),afterClose:function(){var t=d(".g5-popover");t&&t.remove()},remoteLoaded:function(t,e){var a,o,r=e.elements.content,n=r.search("[data-g-icon]");if(!n||!t.body.success)return r.html(t.body.html||t.body),!1;function s(){var n=[],t=r.find("[data-g-icon].active"),e=r.search(".g-particles-header .float-right input:checked, .g-particles-header .float-right select");t&&n.push(t.data("g-icon")),e&&e.forEach(function(t){var e=d(t).value();e&&"fa-"!==e&&n.push(e)}),r.find(".g-icon-preview").html('<i class="fa '+n.join(" ")+'" aria-hidden="true"></i> <span>'+n[0]+"</span>"),r.find("[data-g-select]").disabled(!r.find("[data-g-icon].active")||null)}function l(){var t=r.search("[data-g-icon]:not(.hide-icon)");r.find(".particle-search-total").text(t?t.length:0)}r.find("[data-g-select]").disabled(!r.find("[data-g-icon].active")||null),r.delegate("click","[data-g-icon]",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=d(e);var n=r.find("[data-g-icon].active");n&&n.removeClass("active"),e.addClass("active"),r.find("[data-g-select]").disabled(null),s()}),r.delegate("click","[data-g-select]",function(t){if(t.preventDefault(),!r.find("[data-g-icon].active"))return!1;var e=r.find(".g-icon-preview i");i.value(e.attribute("class")),c.find("i").attribute("class",e.attribute("class")),i.emit("input"),d("body").emit("input",{target:i}),h.close()}),r.delegate("change",'.g-particles-header .float-right input[type="checkbox"], .g-particles-header .float-right select',function(){s()}),r.delegate("keyup",'.particle-search-wrapper input[type="text"]',function(t,e){var n=(e=d(e)).value(),i=r.search("[data-g-icon].hide-icon");if(!n)return i&&(i.removeClass("hide-icon"),l()),!0;var a=r.search('[data-g-icon*="'+n+'"]');r.search("[data-g-icon]").addClass("hide-icon"),a&&a.removeClass("hide-icon"),l()}),n.forEach(function(t){t=d(t),a="";for(var e=5;0<e;e--)o=e?e+"x":"lg",a+='<i class="fa '+t.data("g-icon")+" fa-"+o+'" aria-hidden="true"></i> ';if(a+="<h3>"+t.data("g-icon")+"</h3>",t.popover({content:a,placement:"auto",trigger:"mouse",style:"above-modal, icons-preview",width:"auto",targetEvents:!1,delay:1}).on("hidden.popover",function(t){t.$target&&t.$target.remove()}),p(u,t.data("g-icon"))){t.addClass("active"),u.forEach(function(t){var e=r.find('[name="'+t+'"]');e?e.checked(!0):(e=r.find('option[value="'+t+'"]'))&&e.parent().value(t)});var n=t.parent(".icons-wrapper"),i=n[0].offsetHeight;n[0].scrollTop=t[0].offsetTop-i/2,s()}}),setTimeout(function(){r.find(".particle-search-wrapper input")[0].focus()},5)}})})}),e.exports={}},{"../../ui":264,"../../utils/elements.utils":276,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/translate":288,"elements/domready":32,"mout/array/contains":66,"mout/string/trim":173}],253:[function(t,e,n){"use strict";e.exports={colorpicker:t("./colorpicker"),fonts:t("./fonts"),menu:t("./menu"),icons:t("./icons"),filepicker:t("./filepicker"),collections:t("./collections"),keyvalue:t("./keyvalue"),instancepicker:t("./instancepicker")}},{"./collections":248,"./colorpicker":249,"./filepicker":250,"./fonts":251,"./icons":252,"./instancepicker":254,"./keyvalue":255,"./menu":256}],254:[function(t,e,n){"use strict";var m=t("elements"),g=t("elements/zen"),i=t("elements/domready"),v=t("../../fields/submit"),b=t("../../ui").modal,y=t("agent"),w=t("mout/string/trim"),x=t("../../utils/get-ajax-url").parse,a=t("../../utils/get-ajax-url").global,k=t("../../utils/get-ajax-suffix"),o=t("../../utils/translate"),S=t("../../utils/wp-widgets-customizer");i(function(){var t=m("body"),f=(m('[data-g-instancepicker] ~ input[type="hidden"]'),{wordpress:"widget",joomla:"module"});t.delegate("input",'[data-g-instancepicker] ~ input[type="hidden"]',function(t,e){if(!e.value()){var n=e.siblings(".g-instancepicker-title"),i=e.siblings("[data-g-instancepicker]"),a=e.sibling(".g-reset-field");n.text(""),i.text(i.data("g-instancepicker-text")),a.style("display","none")}}),t.delegate("click","[data-g-instancepicker]",function(t,h){t&&t.preventDefault();var e,n,i=JSON.parse(h.data("g-instancepicker")),p=m('[name="'+i.field+'"]');return n=i.type==f[GANTRY_PLATFORM]?("widget"!=i.type?"particle/":"")+f[GANTRY_PLATFORM]:"particle",!!p&&(e=p.value(),"particle"!=i.type&&"widget"!=i.type||!e||(n=(e=JSON.parse(e||{})).type+"/"+e[i.type]),!!i.modal_close||void b.open({content:o("GANTRY5_PLATFORM_JS_LOADING"),method:e&&"module"!=i.type?"post":"get",data:e&&"module"!=i.type?e:{},overlayClickToClose:!1,remote:x(a(n)+k()),remoteLoaded:function(t,e){if(t.body.success){var n=e.elements.content,i=n.find("[data-mm-select]"),a=n.find(".search input"),o=n.search("[data-mm-type]"),r=n.search("[data-mm-filter]");a&&r&&o&&(a.on("input",function(){if(this.value()){o.addClass("hidden");var e=[],n=this.value().toLowerCase();r.forEach(function(t){t=m(t),w(t.data("mm-filter")).toLowerCase().match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(t.matches("[data-mm-type]")?t:t.parent("[data-mm-type]"))},this),e.length&&m(e).removeClass("hidden")}else o.removeClass("hidden")}),setTimeout(function(){a[0].focus()},5));var s=JSON.parse(h.data("g-instancepicker"));if(s.type==f[GANTRY_PLATFORM]&&(s.modal_close=!0),i)i.data("g-instancepicker",JSON.stringify(s));else{var l=n.find("form"),c=g("div").html(t.body.html||t.body).find("form"),u=n.find('input[type="submit"], button[type="submit"]');if(!l&&!c||!u)return!0;var d=n.search("[data-apply-and-save]");d&&d.remove(),u.on("click",function(t){t.preventDefault(),u.showIndicator();var e=v(c[0].elements,n);y(c.attribute("method"),x(c.attribute("action")+k()),e.valid.join("&")||{},function(t,e){if(e.body.success){var n=p.siblings(".g-instancepicker-title");p&&(p.value(JSON.stringify(e.body.item)),m("body").emit("change",{target:p})),n&&n.text(e.body.item.title)}else b.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});b.close(),u.hideIndicator(),S(p)})})}}else b.enableCloseByOverlay()}}))})}),e.exports={}},{"../../fields/submit":219,"../../ui":264,"../../utils/get-ajax-suffix":280,"../../utils/get-ajax-url":281,"../../utils/translate":288,"../../utils/wp-widgets-customizer":289,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/string/trim":173}],255:[function(t,e,n){"use strict";var i=t("elements/domready"),l=t("elements"),v=(t("elements/zen"),t("mout/object/has")),b=t("mout/array/some"),y=(t("../../ui").modal,t("../../ui").toastr,t("agent"),t("mout/array/indexOf")),w=t("mout/array/contains"),c=t("mout/array/last"),s=t("mout/object/keys"),a=t("sortablejs"),x=t("mout/string/escapeUnicode"),k=t("mout/string/trim"),S=(t("../../utils/get-ajax-suffix"),t("../../utils/translate"));t("elements/insertion"),i(function(){function n(t){var e=t||l(".g-keyvalue-field ul");e&&e.forEach(function(t){(t=l(t)).SimpleSort=a.create(t[0],{handle:".fa-reorder",filter:"[data-keyvalue-nosort]",scroll:!1,animation:150,onStart:function(){l(this.el).addClass("keyvalue-sorting")},onEnd:function(t){var e=l(this.el);if(e.removeClass("keyvalue-sorting"),t.oldIndex!==t.newIndex){var n=e.parent(".settings-param").find("[data-keyvalue-data]"),i=n.value();(i=JSON.parse(i)).splice(t.newIndex,0,i.splice(t.oldIndex,1)[0]),n.value(JSON.stringify(i)),g.emit("change",{target:n})}}})})}var g=l("body");n(),g.delegate("mouseover",".g-keyvalue-field ul",function(t,e){e.SimpleSort||n(e)}),g.delegate("click","[data-keyvalue-addnew]",function(t,e){var n=e.parent(".settings-param"),i=n.find("ul"),a=n.find("[data-keyvalue-template]"),o=i.search("> [data-keyvalue-item]")||[],r=l(c(o)),s=l(a[0].cloneNode(!0));r?s.after(r):s.top(i),s.attribute("style",null).data("keyvalue-item",s.data("keyvalue-template")),s.attribute("data-keyvalue-template",null),s.attribute("data-keyvalue-nosort",null),s.find("[data-keyvalue-key]")[0].focus()}),g.delegate("click","[data-keyvalue-remove]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.parent("[data-keyvalue-item]"),i=(n.find('input[type="text"]').data("keyvalue-key"),e.parent(".settings-param").find("[data-keyvalue-data]")),a=e.parent("ul").search("> [data-keyvalue-item]"),o=y(a,n[0]),r=JSON.parse(i.value());r.splice(o,1),i.value(x(JSON.stringify(r))),n.remove(),g.emit("change",{target:i})});function i(t,e){var n=e.parent("[data-keyvalue-item]"),i=n.find(".g-keyvalue-wrapper"),a=n.find("[data-keyvalue-key]"),o=n.find("[data-keyvalue-value]"),r=a.data("keyvalue-key"),s=k(a.value()),l=k(o.value()),c=e.parent("ul").search("> [data-keyvalue-item]:not(.g-keyvalue-warning):not(.g-keyvalue-excluded)"),u=y(c,n[0]),d=e.parent(".settings-param").find("[data-keyvalue-data]"),h=JSON.parse(d.value()),p=JSON.parse(d.data("keyvalue-exclude")),f=w(p,s),m=b(h,function(t){return v(t,s)})&&r!==s;a==e&&(r===s||m||(void 0!==h[u]&&delete h[u][r],a.data("keyvalue-key",s||"")),n[m?"addClass":"removeClass"]("g-keyvalue-warning"),n[f?"addClass":"removeClass"]("g-keyvalue-excluded"),i.data("tip",m?S("GANTRY5_PLATFORM_JS_KEYVALUE_DUPLICATE",s):f?S("GANTRY5_PLATFORM_JS_KEYVALUE_EXCLUDED",s):null).data("tip-place","top-right").data("tip-spacing",2).data("tip-offset",8),f||m?window.G5.tips.get(i[0]).show():window.G5.tips.remove(i[0])),!s||f||m||(h[u]||h.splice(u,0,{}),h[u][s]=l),d.value(x(JSON.stringify(h))),g.emit("change",{target:d})}g.delegate("keydown",'[data-keyvalue-item] input[type="text"]',function(t,e){13===(t.which?t.which:t.keyCode)&&i(0,e)}),g.delegate("blur",'[data-keyvalue-item] input[type="text"]',i,!0),g.delegate("update","[data-keyvalue-data]",function(t,e){var n=e.parent(),i=n.search("[data-keyvalue-item]"),o=n.find("ul"),a=JSON.parse(e.value()),r=n.find("[data-keyvalue-template]");i&&i.remove(),a.forEach(function(t,e){var n=l(r[0].cloneNode(!0)),i=s(t).shift(),a=t[i];o.appendChild(n),n.attribute("style",null).data("keyvalue-item",n.data("keyvalue-template")),n.attribute("data-keyvalue-template",null),n.attribute("data-keyvalue-nosort",null),n.find("[data-keyvalue-key]").value(i),n.find("[data-keyvalue-value]").value(a)})})}),e.exports={}},{"../../ui":264,"../../utils/get-ajax-suffix":280,"../../utils/translate":288,agent:1,elements:34,"elements/domready":32,"elements/insertion":35,"elements/zen":37,"mout/array/contains":66,"mout/array/indexOf":75,"mout/array/last":79,"mout/array/some":84,"mout/object/has":135,"mout/object/keys":137,"mout/string/escapeUnicode":161,"mout/string/trim":173,sortablejs:210}],256:[function(t,e,n){"use strict";var i=t("../../utils/elements.utils");t("elements/domready")(function(){i("body").delegate("click","[data-g5-content] .g-main-nav .g-toplevel [data-g5-ajaxify]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=i("[data-g5-content] .g-main-nav .g-toplevel [data-g5-ajaxify] !> li");n&&n.removeClass("active"),e.parent("li").addClass("active")})}),e.exports={}},{"../../utils/elements.utils":276,"elements/domready":32}],257:[function(t,e,n){"use strict";function i(t){t&&(t.SimpleSort||u.createSortables(t))}var s=t("elements"),a=(t("elements/zen"),t("elements/domready")),o=(t("mout/string/trim"),t("mout/object/keys"),t("../ui").modal,t("../ui").toastr,t("agent"),t("../utils/get-ajax-suffix"),t("../utils/get-ajax-url").parse,t("../utils/get-ajax-url").global,t("../ui/eraser")),r=t("sortablejs"),l=t("../utils/flags-state"),c=[{name:"positions",pull:!0,put:!0},{name:"positions",pull:!1,put:!1}],u={eraser:null,lists:[],state:[],init:function(t){return u.state=u.serialize(t),u.state},equals:function(){return u.state===u.serialize()},updatePendingChanges:function(){var t=u.equals(),e=s('[data-save="Positions"]'),n=(e.find("i"),e.find(".changes-indicator"));t&&n&&e.hideIndicator(),t||n||e.showIndicator("changes-indicator fa fa-fw fa-circle-o"),l.set("pending",!t)},serialize:function(t){var e,n=[],i=s(t)||s("[data-g5-position]");return i?(i.forEach(function(t){t=s(t),(e=JSON.parse(t.data("g5-position"))).modules=[],(t.search("[data-pm-data]")||[]).forEach(function(t){t=s(t),e.modules.push(JSON.parse(t.data("pm-data")||"{}"))}),n.push(e),t.data("g5-position",JSON.stringify(e))}),JSON.stringify(n).replace(/\//g,"\\/")):"[]"},attachEraser:function(){if(u.eraser)return u.eraser.element=s("[data-g5-positions-erase]"),void u.eraser.hide("fast");u.eraser=new o("[data-g5-positions-erase]")},createSortables:function(t){var a;u.attachEraser(),c.forEach(function(n,i){s(i?"#trash":"[data-g5-position] ul").forEach(function(t,e){a=r.create(t,{sort:!i,filter:"[data-g5-position-ignore]",group:n,scroll:!0,forceFallback:!0,animation:100,onStart:function(t){u.attachEraser(),s(t.item).addClass("position-dragging"),u.eraser.show()},onEnd:function(t){var e=s(t.item),n=s("#trash"),i=s(this.originalEvent.target),a=!1;if("touchend"===this.originalEvent.type){var o=n[0].getBoundingClientRect(),r=this.originalEvent;a=(r.pageY||r.changedTouches[0].pageY)-window.scrollY<=o.height}if(i.matches("#trash")||i.parent("#trash")||a)return e.remove(),u.eraser.hide(),void this.options.onSort(t);e.removeClass("position-dragging"),u.eraser.hide()},onSort:function(t){var e=s(t.from),n=s(t.to),i=[e.parent("[data-g5-position]"),n.parent("[data-g5-position]")];t.from[0]===t.to[0]&&i.shift(),u.serialize(i),u.updatePendingChanges()},onOver:function(t){if(s(t.from).matches("ul")){var e=s(t.newIndex);e.matches("#trash")||e.parent("#trash")?u.eraser.over():u.eraser.out()}}}),i||u.lists[e]||(u.lists[e]=a)}),i||(t.SimpleSort=a)})}};a(function(){var t=s("#positions");s("body").delegate("mouseover","#positions",function(t,e){i(e)}),i(t)}),e.exports=u},{"../ui":264,"../ui/eraser":263,"../utils/flags-state":279,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/object/keys":137,"mout/string/trim":173,sortablejs:210}],258:[function(t,e,n){"use strict";var d=t("elements"),h=t("elements/zen"),i=t("elements/domready"),p=t("mout/string/trim"),f=(t("mout/object/keys"),t("../ui").modal),l=t("../ui").toastr,m=t("agent"),g=t("../utils/get-ajax-suffix"),v=t("../utils/get-ajax-url").parse,b=t("../utils/get-ajax-url").global,y=t("../fields/submit"),s=t("../utils/flags-state"),w=t("../utils/translate"),x=t("./cards");i(function(){var u=d("body"),r=v(b("confirmdeletion")+g());x.init(),u.delegate("click",'#positions [data-g-config], [data-g-create="position"]',function(t,a){var e=a.data("g-config"),n=a.data("g-config-href"),o=window.btoa(n),i=(a.data("g-config-method")||"post").toLowerCase();if(t&&t.preventDefault&&t.preventDefault(),"delete"==e&&!s.get("free:to:delete:"+o,!1))return s.warning({url:r,data:{page_type:"POSITION"},callback:function(t,e){var n=e.find("[data-g-delete-confirm]"),i=e.find("[data-g-delete-cancel]");n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;s.get("free:to:delete:"+o,!0),d([n,i]).attribute("disabled"),u.emit("click",{target:a}),f.close()}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;d([n,i]).attribute("disabled"),s.get("free:to:delete:"+o,!1),f.close()}))}}),!1;a.hideIndicator(),a.showIndicator(),m(i,v(n+g()),{},function(t,e){if(e.body.success){var n=e.body.position,i=d('[href="'+b("positions")+'"]');i?u.emit("click",{target:i}):window.location=window.location,l.success(e.body.html||"Action successfully completed.",e.body.title||""),n&&(u.positionDeleted=n)}else f.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});a.hideIndicator()})}),u.delegate("click","#positions .position-add",function(t,e){t.preventDefault();f.open({content:w("GANTRY5_PLATFORM_JS_LOADING"),method:"get",overlayClickToClose:!1,remote:v(e.attribute("href")+g()),remoteLoaded:function(t,e){if(t.body.success){var n=e.elements.content.find("form"),i=h("div").html(t.body.html).find("form"),a=e.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),o=e.elements.content.find(".search input"),r=e.elements.content.search("[data-mm-type]"),s=e.elements.content.search("[data-mm-filter]"),l=e.elements.content.find(".g-urltemplate");l&&u.emit("input",{target:l});var c=e.elements.content.find("[data-title-editable]");return c&&c.on("title-edit-end",function(t,e){if(!(t=p(t)))return t=p(e)||"Title",this.text(t).data("title-editable",t),!0}),o&&s&&r&&o.on("input",function(){if(this.value()){r.addClass("hidden");var e=[],n=this.value().toLowerCase();s.forEach(function(t){t=d(t),p(t.data("mm-filter")).toLowerCase().match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(t.matches("[data-mm-type]")?t:t.parent("[data-mm-type]"))},this),e.length&&d(e).removeClass("hidden")}else r.removeClass("hidden")}),o&&setTimeout(function(){o[0].focus()},5),!n&&!i||!a||void 0}f.enableCloseByOverlay()}})}),u.delegate("click","#positions .item-settings",function(t,s){t.preventDefault();var e={},n=s.parent("[data-pm-data]"),i=JSON.parse(s.parent("[data-g5-position]").data("g5-position"));e.position=i.name,e.item=n.data("pm-data"),f.open({content:w("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:e,overlayClickToClose:!1,remote:v(b("positions/edit/"+n.data("pm-blocktype"))+g()),remoteLoaded:function(t,n){if(t.body.success){var e=n.elements.content.find("form"),i=h("div").html(t.body.html).find("form"),a=n.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),o=n.elements.content.find("[data-title-editable]");if(o&&o.on("title-edit-end",function(t,e){if(!(t=p(t)))return t=p(e)||"Title",this.text(t).data("title-editable",t),!0}),!e&&!i||!a)return!0;a.on("click",function(t){t.preventDefault(),i=n.elements.content.find("form");var r=d(t.currentTarget);r.disabled(!0),r.hideIndicator(),r.showIndicator();var e=y(i[0].elements,n.elements.content);if(e.invalid.length)return r.disabled(!1),r.hideIndicator(),r.showIndicator("fa fa-fw fa-exclamation-triangle"),void l.error(w("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),w("GANTRY5_PLATFORM_JS_INVALID_FIELDS"));m(i.attribute("method"),v(i.attribute("action")+g()),e.valid.join("&"),function(t,e){if(e.body.success){var n=s.parent("[data-pm-data]");if(n){n.data("pm-data",JSON.stringify(e.body.item));var i=e.body.item.enabled||e.body.item.options.attributes.enabled,a=h("div").html(e.body.html);n.html(a.firstChild().html()),n["0"==i?"addClass":"removeClass"]("g-menu-item-disabled")}if(null!==r.data("apply-and-save")){var o=d("body").find(".button-save");o&&u.emit("click",{target:o})}x.serialize(s.parent("[data-g5-position]")),x.updatePendingChanges(),f.close(),l.success(w("GANTRY5_PLATFORM_JS_POSITIONS_SETTINGS_APPLIED"),w("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else f.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});r.hideIndicator()})})}else f.enableCloseByOverlay()}})});function e(t,a,e){if(this.style("text-overflow","ellipsis"),!e&&t!=a){var o=this,n=o.data("g-config-href"),i=o.data("title-editable-type"),r=(o.data("g-config-method")||"post").toLowerCase(),s=o.parent("[id]");s.showIndicator(),s.find("[data-title-edit]").addClass("disabled");var l="title"===i?{title:p(t)}:{key:p(t)};l.data=s.find("[data-g5-position]").data("g5-position"),m(r,v(n+g()),l,function(t,e){if(e.body.success){var n=h("div").html(e.body.position);s.html(n.find("[id]").html());var i=s.search("[data-title-editable]");c(i)}else f.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),o.data("title-editable",a).text(a);s.hideIndicator(),s.find("[data-title-edit]").removeClass("disabled")})}}var c=function(t){t&&t.length&&t.forEach(function(t){(t=d(t)).confWasAttached=!0,t.on("title-edit-start",function(){t.style("text-overflow","inherit")}),t.on("title-edit-end",e)})};u.delegate("change",'[data-g5-positions-assignments] input[type="hidden"]',function(t,e){var n=e.parent(".card").find(".settings-param-wrapper");n[1==e.value()?"addClass":"removeClass"]("hide"),n.search('input[type="hidden"]').forEach(function(t){(t=d(t)).value(0).disabled(!0)})}),u.on("statechangeAfter",function(t,e){var n=d("#positions [data-title-editable]");if(!n)return!0;n=n.filter(function(t){return void 0===d(t).confWasAttached}),c(n)}),c(d("#positions [data-title-editable]"))}),e.exports={}},{"../fields/submit":219,"../ui":264,"../utils/flags-state":279,"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"../utils/translate":288,"./cards":257,agent:1,elements:34,"elements/domready":32,"elements/zen":37,"mout/object/keys":137,"mout/string/trim":173}],259:[function(t,e,n){"use strict";var i=t("elements/domready"),c=t("elements/attributes"),a=t("../ui").modal,u=t("mout/array/contains"),d=t("mout/collection/forEach");t("../ui/popover");navigator.userAgent.toLowerCase().indexOf("firefox");i(function(){var l=c("body");l.delegate("click","[data-g-styles]",function(t,e){var n=c(t.target);if(t&&t.preventDefault&&t.preventDefault(),n.hasClass("swatch-preview")||n.parent(".swatch-preview"))return!0;var i,a,o,r,s=JSON.parse(e.data("g-styles"));d(s,function(t,e){i=c('[name="'+e+'"]'),a=!!i&&i.value(),i&&a!==t&&(r={target:i,forceOverride:!0},o="select"==i.tag()||u(["hidden","checkbox"],i.type())?"change":"input",i.value(t),l.emit(o,r),l.emit("keyup",r))})}),l.delegate("click","[data-g-styles] .swatch-preview",function(t,e){var n=e.parent("[data-g-styles]").find("img");if(!n)return!1;a.open({content:n[0].outerHTML,afterOpen:function(t){var e=parseInt(t.compute("padding-left"),10)+parseInt(t.compute("padding-right"),10);t.style({maxWidth:"80%",width:e+(n[0].naturalWidth||n[0].width)})}})})}),e.exports={}},{"../ui":264,"../ui/popover":266,"elements/attributes":29,"elements/domready":32,"mout/array/contains":66,"mout/collection/forEach":89}],260:[function(t,e,n){"use strict";var i=t("elements/domready"),o=t("mout/string/trim"),s=t("mout/object/forOwn"),d=t("elements"),h=t("../utils/cookie");i(function(){var r,s,u,t=d("body");t.delegate("click","[data-g-collapse]",function(t,n){if(n=t.element||n,r=JSON.parse(n.data("g-collapse")),s=d(t.target),u=(!1!==r.store?h.read("g5-collapsed"):u)||{},r.handle||(r.handle=n.find(".g-collapse")),!s.matches(r.handle)&&!s.parent(r.handle))return!1;void 0===u[r.id]&&(u[r.id]=r.collapsed,!1!==r.store&&h.write("g5-collapsed",u));var i=u[r.id],e=r.target?n.find(r.target):n,a=e.parent(".card")||e;a&&a.hasClass("g-collapsed")&&(a.removeClass("g-collapsed"),n.removeClass("g-collapsed-main"));function o(t){(i="number"!=typeof t?t:i)||(a.addClass("g-collapsed"),n.addClass("g-collapsed-main"),n.attribute("style",null)),r.handle.data("title",i?r.collapse:r.expand).data("tip",i?r.collapse:r.expand),u[r.id]=!i,r.collapsed=!i;var e=JSON.parse(n.data("g-collapse"));e.collapsed=!i,n.data("g-collapse",JSON.stringify(e)),!1!==r.store&&h.write("g5-collapsed",u)}n.gFastCollapse?(e[i?"removeClass":"addClass"]("g-collapsed"),n[i?"removeClass":"addClass"]("g-collapsed-main")):(n.removeClass("g-collapsed-main"),e.removeClass("g-collapsed")[i?"removeClass":"addClass"]("g-collapsed")),o(i),n.gFastCollapse=!1}),t.delegate("click","[data-g-collapse-all]",function(t,e){var n,i,a,o,r,s="true"===e.data("g-collapse-all"),l=e.parent(".g-filter-actions").nextSibling().search("[data-g-collapse]"),c=h.read("g5-collapsed")||{};l&&l.forEach(function(t){t=d(t),o=t.parent(".card"),r=o.find("> .g-collapsed"),i=JSON.parse(t.data("g-collapse")),a=i.handle?t.find(i.handle):t.find(".g-collapse"),n=i.target?t.find(i.target):t,a.data("title",s?i.expand:i.collapse).data("tip",s?i.expand:i.collapse),(u=(!1!==i.store?c:u)||{})[i.id]=s,!1!==i.store&&h.write("g5-collapsed",u),n.attribute("style",null),t[s?"addClass":"removeClass"]("g-collapsed-main"),o[s?"addClass":"removeClass"]("g-collapsed"),r&&r[s?"addClass":"removeClass"]("g-collapsed")})}),t.delegate("input","[data-g-collapse-filter]",function(t,e){var n=JSON.parse(e.data("g-collapse-filter")||"{}"),i=e.parent(".g-filter-actions").nextSibling().search(n.element||".card"),a=e.value();i&&(a||i.attribute("style",null),i.forEach(function(t,e){t=d(t),o(t.find(n.title||"h4 .g-title").text()).match(new RegExp("^"+a+"|\\s"+a,"gi"))?t.attribute("style",null):t.style("display","none")}))})}),e.exports=function(){var n,i,a,o,r,t=h.read("g5-collapsed")||{};if(!d("[data-g-collapse]"))return!1;s(t,function(t,e){(n=d('[data-g-collapse-id="'+e+'"]'))&&(i=JSON.parse(n.data("g-collapse")),a=i.handle?n.find(i.handle):n.find(".g-collapse"),o=i.target?n.find(i.target):n,r=n.parent(".card")||o,a.data("title",t?i.expand:i.collapse).data("tip",t?i.expand:i.collapse),o.attribute("style",null),r[t?"addClass":"removeClass"]("g-collapsed"),n[t?"addClass":"removeClass"]("g-collapsed-main"))})}},{"../utils/cookie":274,elements:34,"elements/domready":32,"mout/object/forOwn":133,"mout/string/trim":173}],261:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),o=t("prime-util/prime/bound"),r=t("prime-util/prime/options"),s=t("mout/function/bind"),l=(t("mout/array/contains"),t("./drag.events")),b=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var c="Microsoft Internet Explorer"===navigator.appName,u=new i({mixin:[o,r],inherits:a,options:{delegate:null,droppables:!1,catchClick:!1},DRAG_EVENTS:l,constructor:function(t,e){this.container=b(t),this.container&&(this.setOptions(e),this.element=null,this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}},this.matched=!1,this.lastMatched=!1,this.lastOvered=null,this.attach())},attach:function(){this.DRAG_EVENTS.EVENTS.START.forEach(s(function(t){this.container.delegate(t,this.options.delegate,this.bound("start"))},this))},detach:function(){this.DRAG_EVENTS.EVENTS.START.forEach(s(function(t){this.container.undelegate(t,this.options.delegate,this.bound("start"))},this))},start:function(t,e){clearTimeout(this.scrollInterval),e.LMTooltip&&e.LMTooltip.remove(),b("html").attribute("style","height: 100% !important"),this.scrollHeight=document.body.scrollHeight;var n=b(t.target);if(!e.parent("[data-lm-root]")&&e.hasClass("g-block")&&!n.matches(".submenu-reorder")&&!n.parent(".submenu-reorder"))return!0;if(t.which&&1!==t.which||b(t.target).matches(this.options.exclude))return!0;this.element=b(e),this.original=this.element,this.matched=!1,this.options.catchClick&&(this.moved=!1),(n.matches(".submenu-reorder")||n.parent(".submenu-reorder"))&&(this.element=n.parent("[data-mm-id]")),this.emit("dragdrop:beforestart",t,this.element),c&&this.element.style({"-ms-touch-action":"none","touch-action":"none"}),t.preventDefault(),this.origin={x:t.changedTouches?t.changedTouches[0].pageX:t.pageX,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY,transform:this.element.compute("transform")};var i=this.element[0].getBoundingClientRect();if(this.origin.offset={clientRect:i,scroll:{x:window.scrollX,y:window.scrollY},x:this.origin.x-i.right,y:i.top-this.origin.y},"grid"===this.element.data("lm-blocktype")&&Math.abs(this.origin.offset.x)<i.width)return!1;var a=Math.abs(this.origin.offset.x),o="grid"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().data("lm-root")||"container"==this.element.parent().parent().data("lm-blocktype")&&(this.element.parent().parent().parent().data("lm-root")||"wrapper"==this.element.parent().parent().parent().data("lm-blocktype"));return("grid"==this.element.data("lm-blocktype")&&"container"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().parent().data("lm-root")||"section"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().parent().data("lm-root"))&&(o=!1),a<6&&this.element.parent().find(":last-child")!==this.element||o&&3<a&&a<10?(this.element.parent('[data-lm-blocktype="atoms"]')||this.emit("dragdrop:resize",t,this.element,(this.element.parent("[data-mm-id]")||this.element).siblings(":not(.placeholder)"),this.origin.offset.x),!1):!(!o&&(!e.hasClass("submenu-column")||n.matches(".submenu-reorder")||n.parent(".submenu-reorder")))||(this.element.style({"pointer-events":"none",zIndex:100}),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){b("body").on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){b("body").on(t,this.bound("deferStop"))},this)),this.emit("dragdrop:start",t,this.element),this.element)},deferStop:function(t){var e=this;setTimeout(function(){e.stop(t)},0)},stop:function(t){if(clearTimeout(this.scrollInterval),b("html").attribute("style",null),!this.moved&&this.options.catchClick)return this.element.style({transform:this.origin.transform||"translate(0, 0)"}),this.emit("dragdrop:stop",t,this.matched,this.element),this._removeStyleAttribute(this.element),this.emit("dragdrop:stop:animation",this.element),this.emit("dragdrop:click",t,this.element),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){b("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){b("body").off(t,this.bound("deferStop"))},this)),void(this.element=null);var e={duration:"250ms"};if(this.removeElement)return this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){b("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){b("body").off(t,this.bound("deferStop"))},this)),this.emit("dragdrop:stop:erase",t,this.element);this.element&&(this.emit("dragdrop:stop",t,this.matched,this.element),this.matched&&this.element.style({opacity:0,transform:"translate(0, 0)"}).removeClass("active"),this.matched?(this.element.style({transform:this.origin.transform||"translate(0, 0)",opacity:1}),this._removeStyleAttribute(this.element),this.emit("dragdrop:stop:animation",this.element)):(e.callback=s(function(t){this._removeStyleAttribute(t),setTimeout(s(function(){this.emit("dragdrop:stop:animation",t)},this),1)},this,this.element),this.element.animate({transform:this.origin.transform||"translate(0, 0)",opacity:1},e))),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){b("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){b("body").off(t,this.bound("deferStop"))},this)),this.element=null},move:function(t){if(this.options.catchClick){var e=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=t.changedTouches?t.changedTouches[0].pageY:t.pageY;if(Math.abs(e-this.origin.x)<=3&&Math.abs(n-this.origin.y)<=3)return;this.moved||(this.element.style({opacity:.5}),this.emit("dragdrop:move:once",this.element)),this.moved=!0}var i=t.clientX||t.touches&&t.touches[0].clientX||0,a=t.clientY||t.touches&&t.touches[0].clientY||0,o=document.elementFromPoint(i,a),r="grid"===this.element.data("lm-blocktype"),s=this.scrollHeight,l=document.body.clientHeight,c=window.pageYOffset;if(clearTimeout(this.scrollInterval),o){if(!b(o).matches("#trash")&&!b(o).parent("#trash")){var u,d,h=b("#g5-container #trash");l<=a+50&&c+l<s?this.scrollInterval=setInterval(function(){d=(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),u=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),window.scrollTo(d,Math.min(s,u+4))},8):a-50<=(h?h[0].offsetHeight:0)&&0<s&&(this.scrollInterval=setInterval(function(){d=(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),u=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),window.scrollTo(d,Math.max(0,u-4))},8))}if(r&&(o=document.elementFromPoint(i+30,a)),!o)return!1;this.matched=b(o).matches(this.options.droppables)?o:(b(o).parent(this.options.droppables)||[!1])[0],this.isPlaceHolder=!!b(o).matches("[data-lm-placeholder]")||!!b(o).parent("[data-lm-placeholder]");var p=this.lastX-i,f=this.lastY-a,m=(Math.abs(p)>Math.abs(f)&&0<p?"left":Math.abs(p)>Math.abs(f)&&p<0&&"right")||Math.abs(f)>Math.abs(p)&&0<f&&"up"||"down";if(p=(t.changedTouches?t.changedTouches[0].pageX:t.pageX)-this.origin.x,f=(t.changedTouches?t.changedTouches[0].pageY:t.pageY)-this.origin.y,this.element.parent(".particles-container")&&(f+=this.origin.offset.scroll.y-window.scrollY),this.direction=m,this.element.style({transform:"translate("+p+"px, "+f+"px)"}),!this.isPlaceHolder)if(this.lastMatched&&this.matched!==this.lastMatched&&(this.emit("dragdrop:leave",t,this.lastMatched,this.element),this.lastMatched=!1),this.matched&&this.matched!==this.lastMatched&&o!==this.lastOvered&&(this.emit("dragdrop:enter",t,this.matched,this.element),this.lastMatched=this.matched),this.matched&&this.lastMatched){var g=this.matched.getBoundingClientRect(),v={x:(Math.abs(i-g.left)<g.width/2?"before":Math.abs(i-g.left)>=g.width-g.width/2&&"after")||"other",y:(Math.abs(a-g.top)<g.height/2?"above":Math.abs(a-g.top)>=g.height/2&&"below")||"other"};this.emit("dragdrop:location",t,v,this.matched,this.element)}else this.emit("dragdrop:nolocation",t);this.lastOvered=o,this.lastX=i,this.lastY=a,this.emit("dragdrop:move",t,this.element)}},_removeStyleAttribute:function(t){(t=b(t||this.element)).data("mm-id")||t.attribute("style",null)}});e.exports=u},{"../utils/elements.utils":276,"./drag.events":262,"elements/delegation":31,"elements/events":33,"mout/array/contains":66,"mout/function/bind":92,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],262:[function(t,e,n){"use strict";function a(t){t=t.split(" ");for(var e,n=document.createElement("div"),i=!1,a=t.length-1;0<=a;a--)if((i=(e="on"+t[a])in n)||(n.setAttribute(e,"return;"),i="function"==typeof n[e]),i){i=t[a];break}return n=null,i}function i(t){for(var e=!1,n=[],i=(t=t.split(" ")).length-1;0<=i;i--)(e=a(t[i]))&&n.push(e);return n}var o={START:a("mousedown touchstart MSPointerDown pointerdown"),MOVE:a("mousemove touchmove MSPointerMove pointermove"),STOP:a("mouseup touchend MSPointerUp pointerup")},r={START:i("mousedown touchstart MSPointerDown pointerdown"),MOVE:i("mousemove touchmove MSPointerMove pointermove"),STOP:i("mouseup touchend MSPointerUp pointerup")};e.exports={EVENT:o,EVENTS:r}},{}],263:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),o=t("prime/emitter"),r=t("prime-util/prime/bound"),s=new i({mixin:[t("prime-util/prime/options"),r],inherits:o,constructor:function(t,e){this.setOptions(e),this.element=a(t),this.element&&this.hide(!0)},setTop:function(){void 0===this.top&&(this.top=parseInt(this.element.compute("top"),10),this.left=a("#g5-container")[0].getBoundingClientRect().left,"grav"==GANTRY_PLATFORM&&(this.left=0))},show:function(t){this.element&&(this.setTop(),this.out(),this.element[t?"style":"animate"]({top:this.top,left:this.left},{duration:"150ms"}))},hide:function(t){if(this.element){this.setTop(),this.element.style("display","block");var e={top:-this.element[0].offsetHeight};this.out(),this.element[t?"style":"animate"](e,{duration:"150ms"})}},over:function(){this.element.find(".trash-zone").animate({transform:"scale(1.2)"},{duration:"150ms",equation:"cubic-bezier(0.5,0,0.5,1)"})},out:function(){this.element.find(".trash-zone").animate({transform:"scale(1)"},{duration:"150ms",equation:"cubic-bezier(0.5,0,0.5,1)"})}});e.exports=s},{"../utils/elements.utils":276,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],264:[function(t,e,n){"use strict";var i=t("./selectize");e.exports={modal:t("./modal"),togglers:t("./togglers"),collapse:t("./collapse"),selectize:i,toastr:t("./toastr")}},{"./collapse":260,"./modal":265,"./selectize":268,"./toastr":269,"./togglers":270}],265:[function(t,e,n){"use strict";var i=t("prime"),o=t("../utils/elements.utils"),r=t("elements/zen"),s=t("prime/map")(),a=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=t("elements/domready"),d=t("mout/function/bind"),h=t("mout/array/map"),p=t("mout/array/forEach"),f=t("mout/array/last"),m=t("mout/object/merge"),g=(t("mout/string/trim"),t("agent")),v=!1,b=new i({mixin:[l,c],inherits:a,animationEndEvent:["animationend","webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend"],globalID:1,options:{baseClassNames:{container:"g5-dialog",content:"g5-content",overlay:"g5-overlay",close:"g5-close",closing:"g5-closing",open:"g5-dialog-open"},content:"",remote:"",showCloseButton:!0,escapeToClose:!0,overlayClickToClose:!0,appendNode:"#g5-container",className:"g5-dialog-theme-default",css:{},overlayClassName:"",overlayCSS:"",contentClassName:"",contentCSS:"",closeClassName:"g5-dialog-close",closeCSS:"",afterOpen:null,afterClose:null},constructor:function(t){this.setOptions(t),this.defaults=this.options;var e=this;u(function(){o(window).on("keydown",function(t){if(27===t.keyCode)return e.closeByEscape()}),e.animationEndEvent=v}),this.on("dialogOpen",function(t){o("body").addClass(t.baseClassNames.open),o("html").addClass(t.baseClassNames.open)}).on("dialogAfterClose",d(function(t){var e=this.getAll();e&&e.length||(o("body").removeClass(t.baseClassNames.open),o("html").removeClass(t.baseClassNames.open))},this))},storage:function(){return s},open:function(i){(i=m(this.options,i)).id=this.globalID++;var a={};if(a.container=r("div").addClass(i.baseClassNames.container).addClass(i.className).style(i.css).attribute("tabindex","0").attribute("role","dialog").attribute("aria-hidden","true").attribute("aria-labelledby","g-modal-labelledby").attribute("aria-describedby","g-modal-describedby"),s.set(a.container,{dialog:i}),a.overlay=r("div").addClass(i.baseClassNames.overlay).addClass(i.overlayClassName).style(i.overlayCSS),s.set(a.overlay,{dialog:i}),i.overlayClickToClose&&(a.container.on("click",d(this._overlayClick,this,a.container[0])),a.overlay.on("click",d(this._overlayClick,this,a.overlay[0]))),a.container.appendChild(a.overlay),a.content=r("div").addClass(i.baseClassNames.content).addClass(i.contentClassName).style(i.contentCSS).attribute("aria-live","assertive").attribute("tabindex","0").html(i.content),s.set(a.content,{dialog:i}),a.container.appendChild(a.content),i.overlayClickToClose&&a.content.on("click",function(){return!0}),i.remote&&1<i.remote.length){this.showLoading(),i.method=i.method||"get";var t=g();t.method(i.method),t.url(i.remote),i.data&&t.data(i.data),t.send(d(function(t,e){if(a.container.hasClass(i.baseClassNames.closing))this.hideLoading();else{a.content.html(e.body.html||e.body),e.body.success||e.body.html||a.content.style({width:"90%"}),this.hideLoading(),i.remoteLoaded&&!a.container.hasClass(i.baseClassNames.closing)&&i.remoteLoaded(e,i),a.container.attribute("aria-hidden","false"),setTimeout(function(){a.content[0].focus()},0);var n=o("[data-selectize]");n&&n.selectize()}},this))}else a.container.attribute("aria-hidden","false"),setTimeout(function(){a.content[0].focus()},0);i.showCloseButton&&(a.closeButton=r("div").addClass(i.baseClassNames.close).addClass(i.closeClassName).attribute("role","button").attribute("aria-label","Close").style(i.closeCSS),s.set(a.closeButton,{dialog:i}),a.content.appendChild(a.closeButton)),a.container.delegate("click",".g5-dialog-close",d(function(t){t.preventDefault(),this._closeButtonClick(a.container)},this));var e=o(i.appendNode);if("wordpress"==GANTRY_PLATFORM&&"#"+(e=o("#customize-preview")||o("#widgets-right")||o(i.appendNode)).id()!=i.appendNode){var n=o("#wpwrap")||o(".wp-customizer");e="wpwrap"==n.id()?n.nextSibling(i.appendNode)||r("div.g5wp-out-of-scope"+i.appendNode).after(n):n.find("> "+i.appendNode)||r("div.g5wp-out-of-scope"+i.appendNode).top(n)}return e.appendChild(a.container),i.elements=a,i.afterOpen&&i.afterOpen(a.content,i),setTimeout(d(function(){return this.emit("dialogOpen",i)},this),0),a.content},getAll:function(){var t=this.options;return o("."+t.baseClassNames.container+":not(."+t.baseClassNames.closing+") ."+t.baseClassNames.content)},getByID:function(e){var t=this.getAll();return t?o(t.filter(function(t){return t=o(t),s.get(t).dialog.id===e})):[]},getLast:function(){var t;return!!(t=h(this.getAll(),function(t){return t=o(t),s.get(t).dialog.id})).length&&Math.max.apply(Math,t)},close:function(t){if(!t){var e=o(f(this.getAll()));if(!e)return!1;t=s.get(e).dialog.id}return this.closeByID(t)},closeAll:function(){var t;return!!(t=h(this.getAll(),function(t){return t=o(t),s.get(t).dialog.id})).length&&(p(t.reverse(),function(t){return this.closeByID(t)},this),!0)},closeByID:function(t){var e,n,i=this.getByID(t);if(!i||!i.length)return!1;e=s.get(i).dialog.elements.container,n=m({},s.get(i).dialog);function a(){return n.beforeClose&&n.beforeClose(i,n)}var o=d(function(){if(n.remoteLoaded&&(n.remoteLoaded=function(){}),i.emit("dialogClose",n),e.remove(),this.emit("dialogAfterClose",n),n.afterClose)return n.afterClose(i,n)},this);return v?(a(),e.off(this.animationEndEvent).on(this.animationEndEvent,function(){return o()}).addClass(n.baseClassNames.closing)):(a(),o()),!0},closeByEscape:function(){var t=this.getLast();if(!1===t)return!1;var e=this.getByID(t);return!!s.get(e).dialog.escapeToClose&&this.closeByID(t)},enableCloseByOverlay:function(){var t=this.getLast();if(!1===t)return!1;var e=s.get(this.getByID(t)).dialog.elements;e.container.on("click",d(this._overlayClick,this,e.container[0])),e.overlay.on("click",d(this._overlayClick,this,e.overlay[0])),e.content.on("click",function(){return!0})},showLoading:function(){return this.hideLoading(),o("#g5-container").appendChild(r("div.g5-dialog-loading-spinner."+this.options.className))},hideLoading:function(){var t=o(".g5-dialog-loading-spinner");return!!t&&t.remove()},_overlayClick:function(t,e){if(e.target===t)return this.close(s.get(o(t)).dialog.id)},_closeButtonClick:function(t){return this.close(s.get(o(t)).dialog.id)}});u(function(){var n=(document.body||document.documentElement).style;p(["animation","WebkitAnimation","MozAnimation","MsAnimation","OAnimation"],function(t,e){v=v||void 0!==n[t]&&b.prototype.animationEndEvent[e]})});var y=new b;e.exports=y},{"../utils/elements.utils":276,agent:1,"elements/domready":32,"elements/zen":37,"mout/array/forEach":74,"mout/array/last":79,"mout/array/map":80,"mout/function/bind":92,"mout/object/merge":138,"mout/string/trim":173,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202,"prime/map":204}],266:[function(t,e,n){"use strict";var i=t("prime"),d=t("../utils/elements.utils"),h=t("elements/zen"),a=t("prime/map")(),o=t("prime/emitter"),r=t("prime-util/prime/bound"),s=t("prime-util/prime/options"),l=(t("elements/domready"),t("mout/function/bind")),c=(t("mout/array/map"),t("mout/array/forEach"),t("mout/array/last"),t("mout/object/merge"),t("mout/lang/isFunction")),u=t("agent"),p=new i({mixin:[r,s],inherits:o,options:{mainClass:"g5-popover",placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:300,cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,targetEvents:!0,allowElementsClick:!1,url:"",type:"html",where:"#g5-container",template:'<div class="g5-popover"><div class="g-arrow"></div><div class="g5-popover-inner"><a href="#" class="close">x</a><h3 class="g5-popover-title"></h3><div class="g5-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>'},constructor:function(t,e){this.setOptions(e),this.element=d(t),"click"===this.options.trigger?this.element.off("click",this.bound("toggle")).on("click",this.bound("toggle")):this.element.off("mouseenter",this.bound("mouseenterHandler")).off("mouseleave",this.bound("mouseleaveHandler")).on("mouseenter",this.bound("mouseenterHandler")).on("mouseleave",this.bound("mouseleaveHandler")),this._poped=!1},destroy:function(){this.hide(),a.set(this.element[0],null),this.element.off("click",this.bound("toggle")).off("mouseenter",this.bound("mouseenterHandler")).off("mouseleave",this.bound("mouseleaveHandler")),this.$target&&this.$target.remove()},hide:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.element.emit("hide.popover",this),this.$target&&(this.$target.removeClass("in").style({display:"none"}),this.$target.remove()),this.element.emit("hidden.popover",this),this._focusAttached&&(d("body").off("focus",this.bound("focus"),!0),this._focusAttached=!1,this.restoreFocus())},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},focus:function(t){if(this.getTarget().hasClass("in")){var e=d(t.target||t);this.$target[0]===e[0]||e.parent(this.$target)||this.element[0]===e[0]||e.parent(this.element)||(this.hide(),this._focusAttached&&this.restoreFocus())}},restoreFocus:function(e){var n=(e=d(e||this.element)).tag();setTimeout(function(){if("a"!=n&&"input"!=n&&"button"!=n){var t=e.find("a, button, input");t&&t[0].focus()}else e[0].focus()},0)},hideAll:function(t){var e="";e=t?"div."+this.options.mainClass:"div."+this.options.mainClass+":not(."+this.options.mainClass+"-fixed)";var n=d(e);return n&&(n.removeClass("in").style({display:"none"}).attribute("tabindex","-1"),!t&&this._focusAttached&&this.restoreFocus(),this._focusAttached&&(d("body").off("focus",this.bound("focus"),!0),this._focusAttached=!1)),this},show:function(){var t=this.getTarget().attribute("class",null).addClass(this.options.mainClass).attribute("tabindex","0");if(this.options.multi||this.hideAll(),this.element.emit("beforeshow.popover",this),!this.options.cache||!this._poped){if(this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync())return this.setContentASync(this.options.content),void this.displayContent();this.setContent(this.getContent()),t.style({display:"block"})}this.displayContent(),this.bindBodyEvents(),setTimeout(function(){t[0].focus()},0),this._focusAttached||(d("body").on("focus",this.bound("focus"),!0),this._focusAttached=!0)},displayContent:function(){var t,e,n,i=this.element.position(),a=this.getTarget().attribute("class",null).addClass(this.options.mainClass),o=this.getContentElement();this.element.emit("show.popover",this),"auto"!==this.options.width&&a.style({width:this.options.width}),"auto"!==this.options.height&&o.style({height:this.options.height}),!this.options.arrow&&a.find(".g-arrow")&&a.find(".g-arrow").remove();var r=d(this.options.where);if("wordpress"==GANTRY_PLATFORM&&"#"+(r=d("#customize-preview")||d("#widgets-right")||d(this.options.where)).id()!=this.options.where){var s=d("#wpwrap")||d(".wp-customizer");r="wpwrap"==s.id()?s.nextSibling(this.options.where)||h("div.g5wp-out-of-scope"+this.options.where).after(s):s.find("> "+this.options.where)||h("div.g5wp-out-of-scope"+this.options.where).top(s)}a.remove().style({top:-1e3,left:-1e3,display:"block"}).bottom(r),this.options.style&&("string"==typeof this.options.style&&(this.options.style=this.options.style.split(",").map(Function.prototype.call,String.prototype.trim)),this.options.style.forEach(function(t){this.$target.addClass(this.options.mainClass+"-"+t)},this)),this.options.padding||(o.css("height",o.position().height),this.$target.addClass("g5-popover-no-padding")),t=a[0].offsetWidth,e=a[0].offsetHeight,n=this.getPlacement(i,e),this.options.targetEvents&&this.initTargetEvents();var l=this.getTargetPosition(i,n,t,e);if(this.$target.style(l.position).addClass(n).addClass("in"),"iframe"===this.options.type){var c=a.find("iframe");c.style({width:a.position().width,height:c.parent().position.height})}if(this.options.arrow||this.$target.style({margin:0}),this.options.arrow){var u=this.$target.find(".g-arrow");u.attribute("style",null),l.arrowOffset&&u.style(l.arrowOffset)}this._poped=!0,this.element[0].focus(),this.element.emit("shown.popover",this)},getTarget:function(){return this.$target||(this.$target=d(h("div").html(this.options.template).children()[0])),this.$target},getTitleElement:function(){return this.getTarget().find("."+this.options.mainClass+"-title")},getContentElement:function(){return this.getTarget().find("."+this.options.mainClass+"-content")},getTitle:function(){return this.options.title||this.element.data("g5-popover-title")||this.element.attribute("title")},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getContent:function(){if(this.options.url)"iframe"===this.options.type&&(this.content=d('<iframe frameborder="0"></iframe>').attribute("src",this.options.url));else if(!this.content){var t="";t=c(this.options.content)?this.options.content.apply(this.element[0],arguments):this.options.content,this.content=this.element.data("g5-popover-content")||t}return this.content},setContent:function(t){var e=this.getTarget();this.getContentElement().html(t),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(a){u("get",this.options.url,l(function(t,e){a&&c(a)?this.content=a.apply(this.element[0],[e]):this.content=e.body.html,this.setContent(this.content);var n=this.getContentElement();n.attribute("style",null),setTimeout(l(function(){n.parent("."+this.options.mainClass)[0].focus()},this),0),this.displayContent(),this.bindBodyEvents();var i=d("[data-selectize]");i&&i.selectize()},this))},bindBodyEvents:function(){var t=d("body");t.off("keyup",this.bound("escapeHandler")).on("keyup",this.bound("escapeHandler")),t.off("click",this.bound("bodyClickHandler")).on("click",this.bound("bodyClickHandler"))},mouseenterHandler:function(){this._timeout&&clearTimeout(this._timeout),0<this.getTarget()[0].offsetWidth||0<this.getTarget()[0].offsetHeight||this.show()},mouseleaveHandler:function(){this._timeout=setTimeout(l(function(){this.hide()},this),this.options.delay)},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(){this.hideAll()},targetClickHandler:function(t){var e=d(t.target);e.matches(this.options.allowElementsClick)&&t.preventDefault(),e.parent("[data-g-popover-follow]")||null!==e.data("g-popover-follow")||t.stopPropagation()},initTargetEvents:function(){"click"!==this.options.trigger&&this.$target.off("mouseenter",this.bound("mouseenter")).off("mouseleave",this.bound("mouseleave")).on("mouseenter",this.bound("mouseenterHandler")).on("mouseleave",this.bound("mouseleaveHandler"));var t=this.$target.find(".close");t&&t.off("click",this.bound("hide")).on("click",this.bound("hide")),this.$target.off("click",this.bound("targetClickHandler")).on("click",this.bound("targetClickHandler"))},getPlacement:function(t,e){var n,i=document.documentElement,a=document.body,o=i.clientWidth,r=i.clientHeight,s=Math.max(a.scrollTop,i.scrollTop),l=Math.max(a.scrollLeft,i.scrollLeft),c=Math.max(0,t.left-l),u=Math.max(0,t.top-s);return"auto"===(n="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.element[0]):this.element.data("g5-popover-placement")||this.options.placement)&&(n=c<o/3?u<r/3?"bottom-right":u<2*r/3?"right":"top-right":c<2*o/3?u<r/3||u<2*r/3?"bottom":"top":(n=e+20<u?"top-left":"bottom-left",u<r/3?"bottom-left":u<2*r/3?"left":"top-left")),n},getTargetPosition:function(t,e,n,i){var a=t,o=this.element[0].offsetWidth,r=this.element[0].offsetHeight,s={},l=null,c=this.options.arrow?28:0,u=o<10+c?c:0,d=r<10+c?c:0;switch(e){case"bottom":s={top:a.top+a.height,left:a.left+a.width/2-n/2};break;case"top":s={top:a.top-i,left:a.left+a.width/2-n/2};break;case"left":s={top:a.top+a.height/2-i/2,left:a.left-n};break;case"right":s={top:a.top+a.height/2-i/2,left:a.left+a.width};break;case"top-right":s={top:a.top-i,left:a.left-u},l={left:o/2+u};break;case"top-left":s={top:a.top-i,left:a.left-n+a.width+u},l={left:n-o/2-u};break;case"bottom-right":s={top:a.top+a.height,left:a.left-u},l={left:o/2+u};break;case"bottom-left":s={top:a.top+a.height,left:a.left-n+a.width+u},l={left:n-o/2-u};break;case"right-top":s={top:a.top-i+a.height+d,left:a.left+a.width},l={top:i-r/2-d};break;case"right-bottom":s={top:a.top-d,left:a.left+a.width},l={top:r/2+d};break;case"left-top":s={top:a.top-i+a.height+d,left:a.left-n},l={top:i-r/2-d};break;case"left-bottom":s={top:a.top,left:a.left-n},l={top:r/2}}return{position:s,arrowOffset:l}}});d.implement({getPopover:function(t){var e=a.get(this);return e||"destroy"===t||(e=new p(this,t=t||{}),a.set(this,e),this.PopoverDefined=!0),e},popover:function(n){return this.forEach(function(t){var e=a.get(t);e||"destroy"===n||(e=new p(t,n=n||{}),a.set(t,e))})},position:function(){var t=this[0],e=d("#g5-container")[0].getBoundingClientRect(),n={left:0,right:0,top:0,bottom:0};return void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{x:n.left-e.left,left:n.left-e.left,y:n.top-e.top,top:n.top-e.top,right:n.right-e.right,bottom:n.bottom-e.bottom,width:n.right-n.left,height:n.bottom-n.top}}}),e.exports=d},{"../utils/elements.utils":276,agent:1,"elements/domready":32,"elements/zen":37,"mout/array/forEach":74,"mout/array/last":79,"mout/array/map":80,"mout/function/bind":92,"mout/lang/isFunction":106,"mout/object/merge":138,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202,"prime/map":204}],267:[function(t,e,n){"use strict";var i=t("elements"),a=t("prime"),o=t("prime/emitter"),r=t("prime-util/prime/bound"),s=t("prime-util/prime/options"),l=t("elements/zen"),c=t("moofx"),u=t("mout/function/bind"),d=t("mout/lang/isArray"),h=t("mout/lang/isNumber"),p=new a({mixin:[r,s],inherits:o,options:{value:0,size:50,startAngle:-Math.PI/2,thickness:"auto",fill:{gradient:["#9e38eb","#4e68fc"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,equation:"cubic-bezier(0.645, 0.045, 0.355, 1)"},animationStartValue:0,reverse:!1,lineCap:"butt",insertElement:null,insertLocation:"before"},constructor:function(t,e){this.setOptions(e),this.element=this.element||i(t),this.canvas=this.canvas||l("canvas")[this.options.insertLocation||"before"](this.options.insertElement||this.element)[0],this.radius=this.options.size/2,this.arcFill=null,this.lastFrameValue=0,this.canvas.width=this.options.size,this.canvas.height=this.options.size,this.ctx=this.canvas.getContext("2d"),this.initFill(),this.draw()},initFill:function(){var t=this.options.fill,e=this.options.size,n=this.ctx;if(!t)throw Error("The fill is not specified.");if(t.color&&(this.arcFill=t.color),t.gradient){var i=t.gradient;if(1==i.length)this.arcFill=i[0];else{for(var a=t.gradientAngle||0,o=t.gradientDirection||[e/2*(1-Math.cos(a)),e/2*(1+Math.sin(a)),e/2*(1+Math.cos(a)),e/2*(1-Math.sin(a))],r=n.createLinearGradient.apply(n,o),s=0;s<i.length;s++){var l=i[s],c=s/(i.length-1);d(l)&&(c=l[1],l=l[0]),r.addColorStop(c,l)}this.arcFill=r}}},draw:function(){this[this.options.animation?"drawAnimated":"drawFrame"](this.options.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.clearRect(0,0,this.options.size,this.options.size),this.drawEmptyArc(t),this.drawArc(t)},drawArc:function(t){var e=this.ctx,n=this.radius,i=this.getThickness(),a=this.options.startAngle;e.save(),e.beginPath(),this.options.reverse?e.arc(n,n,n-i/2,a-2*Math.PI*t,a):e.arc(n,n,n-i/2,a,a+2*Math.PI*t),e.lineWidth=i,e.lineCap=this.options.lineCap,e.strokeStyle=this.arcFill,e.stroke(),e.restore()},drawEmptyArc:function(t){var e=this.ctx,n=this.radius,i=this.getThickness(),a=this.options.startAngle;t<1&&(e.save(),e.beginPath(),t<=0?e.arc(n,n,n-i/2,0,2*Math.PI):this.reverse?e.arc(n,n,n-i/2,a,a-2*Math.PI*t):e.arc(n,n,n-i/2,a+2*Math.PI*t,a),e.lineWidth=i,e.strokeStyle=this.options.emptyFill,e.stroke(),e.restore())},drawAnimated:function(n){this.element.emit("progress-animation-start"),c(u(function(t){var e=this.options.animationStartValue*(1-t)+n*t;this.drawFrame(e),this.element.emit("progress-animation-change",t,e)},this),{duration:this.options.animation.duration||"1200",equation:this.options.animation.equation||"linear",callback:u(function(){this.options.animation.callback&&this.options.animation.callback(),this.element.emit("progress-animation-end")},this)}).start(0,1)},getThickness:function(){return h(this.options.thickness)?this.options.thickness:this.options.size/14}});e.exports=p},{elements:34,"elements/zen":37,moofx:38,"mout/function/bind":92,"mout/lang/isArray":104,"mout/lang/isNumber":108,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202}],268:[function(t,e,n){"use strict";function x(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function l(t){return void 0!==t}function s(t){return(t+"").replace(/\$/g,"$$$$")}function i(e,n,t){var i,a=e.emit,o={};for(i in e.emit=function(){var t=arguments[0];if(-1===n.indexOf(t))return a.apply(e,arguments);o[t]=arguments},t.apply(e,[]),e.emit=a,o)o.hasOwnProperty(i)&&a.apply(e,o[i])}function k(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function m(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e}function S(t,e){if("string"!=typeof e||e.length){var l="string"==typeof e?new RegExp(e,"i"):e,c=function(t){var e=0;if(3===t.nodeType){var n=t.data.search(l);if(0<=n&&0<t.data.length){var i=t.data.match(l),a=document.createElement("span");a.className="g-highlight";var o=t.splitText(n),r=(o.splitText(i[0].length),o.cloneNode(!0));a.appendChild(r),o.parentNode.replaceChild(a,o),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var s=0;s<t.childNodes.length;++s)s+=c(t.childNodes[s]);return e};return f(t,function(t){c(t)})}}function u(p){function t(t,e){var n,i,a,o,r,s,l,c,u,d,h;t=t||{},(e=e||window.event||{}).metaKey||e.altKey||!t.force&&!1===p.selectizeGrow||(n=p.value(),e.type&&"keydown"===e.type.toLowerCase()&&(a=97<=(i=e.keyCode)&&i<=122||65<=i&&i<=90||48<=i&&i<=57||32===i,46===i||8===i?(c=m(p[0])).length?n=n.substring(0,c.start)+n.substring(c.start+c.length):8===i&&c.start?n=n.substring(0,c.start-1)+n.substring(c.start+1):46===i&&void 0!==c.start&&(n=n.substring(0,c.start)+n.substring(c.start+1)):a&&(s=e.shiftKey,l=String.fromCharCode(e.keyCode),n+=l=s?l.toUpperCase():l.toLowerCase())),o=p.attribute("placeholder"),!n&&o&&(n=o),d=p,(r=((u=n)?(z?(h=z).text(u):(function(t,e,n){var i,a,o={};if(n)for(i=0,a=n.length;i<a;i++)o[n[i]]=t.compute(n[i]);else o=t.compute();e.style(o)}(d,h=g("test").style({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(u).bottom("body"),["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),z=h),h[0].offsetWidth):0)+4)!==f&&(f=r,p[0].style.width=r+"px",p.emit("resize")))}p=C(p);var f=null;p.on("keydown",t),p.on("keyup",t),p.on("update",t),p.on("blur",t),t()}var a=t("prime"),o=t("elements/domready"),g=t("elements/zen"),r=t("sifter"),c=t("prime/emitter"),d=t("prime-util/prime/bound"),h=t("prime-util/prime/options"),C=t("../utils/elements.utils"),p=(t("moofx"),t("mout/function/bind")),f=t("mout/collection/forEach"),v=t("mout/array/indexOf"),b=t("mout/array/last"),y=t("mout/function/debounce"),E=t("mout/lang/isArray"),w=t("mout/lang/isBoolean"),T=t("mout/object/merge"),O=(t("mout/object/unset"),t("mout/object/size")),I=(t("mout/object/values"),t("mout/string/escapeHtml")),_=t("mout/string/trim"),A=t("mout/string/slugify"),D=/Mac/.test(navigator.userAgent),N=(/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent),D?91:17),j=D?18:17,F=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,z=null,R=new a({mixin:[d,h],inherits:c,options:{delimiter:" ",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!0,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,searchOnKeypress:!0,scrollDuration:60,loadThrottle:300,loadingClass:"g-loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"g-selectize-control",inputClass:"g-selectize-input",dropdownClass:"g-selectize-dropdown",dropdownContentClass:"g-selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},constructor:function(t,e){t=C(t),this.setOptions(e);var n,i,a=window.getComputedStyle&&window.getComputedStyle(t[0],null),o=a?a.getPropertyValue("direction"):t[0].currentStyle&&t[0].currentStyle.direction;if(o=o||t.parents("[dir]:first").attr("dir")||"",this.rand="selectize-id-"+(Math.random()+1).toString(36).substring(5),this.input=t,(this.input.selectizeInstance=this).order=0,this.tabIndex=t.attribute("tabindex")||"",this.tagType="select"==t.tag()?1:2,this.rtl=/rtl/i.test(o),this.highlightedValue=null,this.isRequired=t.attribute("required"),f(["isOpen","isDisabled","isInvalid","isLocked","isFocused","isInputHidden","isSetup","isShiftDown","isCmdDown","isCtrlDown","ignoreFocus","ignoreBlur","ignoreHover","hasOptions"],function(t){this[t]=!1},this),this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.$activeOption=null,this.$activeItems=[],this.Optgroups={},this.Options={},this.UserOptions={},this.items=[],this.renderCache={},this.onSearchChange=null===this.options.loadThrottle?this.onSearchChange:y(this.onSearchChange,this.options.loadThrottle),this.sifter=new r(this.Options,{diacritics:this.options.diacritics}),this.options.Options){for(n=0,i=this.options.Options.length;n<i;n++)this.registerOption(this.options.Options[n]);delete this.options.Options}if(this.options.Optgroups){for(n=0,i=this.options.Optgroups.length;n<i;n++)this.registerOptionGroup(this.options.Optgroups[n]);delete this.options.Optgroups}this.options.mode=this.options.mode||(1===this.options.maxItems?"single":"multi"),w(this.options.hideSelected)||(this.options.hideSelected="multi"===this.options.mode),this.setupCallbacks(),this.setupTemplates(),this.setup()},setup:function(){var t,n,e,i,a,o,r,s,l=this.input;if(r=this.options.mode,s=l.attribute("class")||"",t=g("div").addClass(this.options.wrapperClass).addClass(s).addClass("g-"+r).after(this.input),n=g("div").addClass(this.options.inputClass).addClass("g-items").bottom(t),e=g('input[type="text"][autocomplete="off"][role="textbox"]').bottom(n).attribute("tabindex",l.disabled()?"-1":this.tabIndex),o=C(this.options.dropdownParent||t),i=g("div").addClass(this.options.dropdownClass).addClass("g-"+r).hide().bottom(o),a=g('div[id="'+this.rand+'"]').addClass(this.options.dropdownContentClass).bottom(i),this.options.copyClassesToDropdown&&i.addClass(s),"single"==r&&t.style("width",parseInt(l[0].offsetWidth)+12+24),(null===this.options.maxItems||1<this.options.maxItems)&&1===this.tagType&&l.attribute("multiple","multiple"),this.options.placeholder&&e.attribute("placeholder",this.options.placeholder),!this.options.splitOn&&this.options.delimiter){var c=this.options.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");this.options.splitOn=new RegExp("\\s*"+c+"+\\s*")}l.attribute("autocorrect")&&e.attribute("autocorrect",l.attribute("autocorrect")),l.attribute("autocapitalize")&&e.attribute("autocapitalize",l.attribute("autocapitalize")),this.$wrapper=t,this.$control=n,this.$control_input=e,this.$dropdown=i,this.$dropdown_content=a,i.delegate("mouseover","[data-selectable]",p(function(){return this.onOptionHover.apply(this,arguments)},this)),i.delegate("mousedown","[data-selectable]",p(function(){return this.onOptionSelect.apply(this,arguments)},this)),i.delegate("click","[data-selectable]",p(function(){return this.onOptionSelect.apply(this,arguments)},this)),u(e),n.delegate("mousedown","*:not(input)",p(function(t,e){return e==n||this.onItemSelect.apply(this,arguments)},this)),n.on("mousedown",p(function(){return this.onMouseDown.apply(this,arguments)},this)),n.on("click",p(function(){return this.onClick.apply(this,arguments)},this)),n.delegate("click",".g-remove-single-item",p(function(){return this.onItemRemoveViaX.apply(this,arguments)},this)),e.on("mousedown",function(t){t.stopPropagation()}),e.on("keydown",p(function(){return this.onKeyDown.apply(this,arguments)},this)),e.on("keyup",p(function(){return this.onKeyUp.apply(this,arguments)},this)),e.on("keypress",p(function(){return this.onKeyPress.apply(this,arguments)},this)),e.on("resize",p(function(){this.positionDropdown.apply(this,[])},this)),e.on("blur",p(function(){return this.onBlur.apply(this,arguments)},this)),e.on("focus",p(function(){return this.ignoreBlur=!1,this.onFocus.apply(this,arguments)},this)),e.on("paste",p(function(){return this.onPaste.apply(this,arguments)},this)),C(document).on("keydown",p(function(t){this.isCmdDown=t[D?"metaKey":"ctrlKey"],this.isCtrlDown=t[D?"altKey":"ctrlKey"],this.isShiftDown=t.shiftKey},this)),C(document).on("keyup",p(function(t){t.keyCode===j&&(this.isCtrlDown=!1),16===t.keyCode&&(this.isShiftDown=!1),t.keyCode===N&&(this.isCmdDown=!1)},this)),C(document).on("mousedown",p(function(t){if(this.isFocused){if(t.target===this.$dropdown[0]||t.target.parentNode===this.$dropdown[0])return t.preventDefault(),!1;this.$control.find(C(t.target))||t.target===this.$control[0]||this.blur(t.target)}},this)),C(window).on("scroll",p(function(){this.isOpen&&this.positionDropdown.apply(this,arguments)},this)),C(window).on("resize",p(function(){this.isOpen&&this.positionDropdown.apply(this,arguments)},this)),C(window).on("mousemove",p(function(){this.ignoreHover=!1},this)),this.revertSettings={$children:this.input.children(),tabindex:this.input.attribute("tabindex")},this.input.attribute("tabindex",-1).attribute("aria-hidden",!0).hide().after(t),E(this.options.items)&&(this.setValue(this.options.items),delete this.options.items),F&&this.input.on("invalid",p(function(t){t.preventDefault(),this.isInvalid=!0,this.refreshState()},this)),this.updateOriginalInput(),this.refreshItems(),this.refreshState(),this.updatePlaceholder(),this.isSetup=!0,this.input.disabled()&&this.disable(),this.on("change",this.onChange),(this.input.selectizeInstance=this).input.addClass("selectized"),this.emit("initialize"),!0===this.options.preload&&this.onSearchChange(""),t.attribute("role","combobox").attribute("aria-autocomplete","list").attribute("aria-haspopup",!0).attribute("aria-expanded",!1).attribute("aria-labelledby",this.rand+"-"+A(this.getValue())),a.attribute("role","tree").attribute("aria-expanded",!1).attribute("aria-hidden",!0)},setupTemplates:function(){var a=this.options.labelField,o=this.options.valueField,n=this.options.optgroupLabelField,r=this.options.mode,t={optgroup:function(t){return'<div class="g-optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="g-optgroup-header">'+e(t[n])+"</div>"},option:function(t,e){var n='<div class="g-option">'+e(t[a])+"</div>";return this.options.Subtitles&&(n='<div class="g-option"><span>'+e(t[a])+'</span> <div class="g-option-subtitle"><small>'+e(t[o])+"</small></div></div>"),n},item:function(t,e){var n="",i=e(t[o]);return"single"!==r&&(n='<span  class="g-remove-single-item" tabindex="-1" title="Remove">&times;</span></div>'),this.options.Subtitles&&(i="class name: "+i),'<div class="g-item" title="'+i+'">'+e(t[a])+n},option_create:function(t,e){return'<div class="g-create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.options.render=T({},t,this.options.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.options[n[t]])&&this.on(t,e)},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(t){var e=t.defaultPrevented||void 0===t.defaultPrevented;C(t.target);if(this.isFocused){if(t.target!==this.$control_input[0])return"single"===this.options.mode?this.isOpen?this.close():this.open():e||this.setActiveItem(null),!1}else e||window.setTimeout(p(function(){this.focus()},this),0)},onChange:function(){this.input.emit("change",this.input.value(),this),C("body").emit("change",{target:this.input})},onPaste:function(t){this.isFull()||this.isInputHidden||this.isLocked?t.preventDefault():this.options.splitOn&&setTimeout(p(function(){for(var t=_(this.$control_input.value()||"").split(this.options.splitOn),e=0,n=t.length;e<n;e++)this.createItem(t[e])},this),0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.options.create&&"multi"===this.options.mode&&e===this.options.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){t.target,this.$control_input[0];if(this.isLocked)9!==t.keyCode&&t.preventDefault();else{switch(t.keyCode){case 65:if(this.isCmdDown)return void this.selectAll();break;case 27:return void(this.isOpen&&(t.preventDefault(),t.stopPropagation(),this.close()));case 78:if(!t.ctrlKey||t.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var e=this.getAdjacentOption(this.$activeOption,1);e&&this.setActiveOption(e,!0,!0)}return void t.preventDefault();case 80:if(!t.ctrlKey||t.altKey)break;case 38:if(this.$activeOption){this.ignoreHover=!0;var n=this.getAdjacentOption(this.$activeOption,-1);n&&this.setActiveOption(n,!0,!0)}return void t.preventDefault();case 13:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),t.preventDefault()));case 37:return void this.advanceSelection(-1,t);case 39:return void this.advanceSelection(1,t);case 9:return this.options.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),self.isFull()||t.preventDefault()),void(this.options.create&&this.createItem()&&t.preventDefault());case 8:case 46:return void this.deleteSelection(t)}!this.isFull()&&!this.isInputHidden||(D?t.metaKey:t.ctrlKey)||t.preventDefault()}},onKeyUp:function(t){if(this.isLocked)return t&&t.preventDefault();var e=this.$control_input.value()||"";this.lastValue!==e&&(this.lastValue=e,this.onSearchChange(e),this.refreshOptions(),this.emit("type",e))},onSearchChange:function(e){var n=this.options.load;n&&(this.loadedSearches.hasOwnProperty(e)||(this.loadedSearches[e]=!0,this.load(p(function(t){n.apply(this,[e,t])},this))))},onFocus:function(t){var e=this.isFocused;if(this.isDisabled)return this.blur(),t&&t.preventDefault(),!1;this.ignoreFocus||(this.isFocused=!0,"focus"===this.options.preload&&this.onSearchChange(""),e||this.emit("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.options.openOnFocus)),this.refreshState())},onBlur:function(t,e){if(this.isFocused&&(this.isFocused=!1,!this.ignoreFocus)){if(!this.ignoreBlur&&document.activeElement===this.$dropdown_content[0])return this.ignoreBlur=!0,void this.onFocus(t);var n=p(function(){this.close(),this.setTextboxValue(""),this.setActiveItem(null),this.setActiveOption(null),this.setCaret(this.items.length),this.refreshState(),e&&e.focus(),this.ignoreFocus=!1,this.emit("blur")},this);this.ignoreFocus=!0,this.options.create&&this.options.createOnBlur?this.createItem(null,!1,n):n()}},onOptionHover:function(t,e){e=C(e),this.ignoreHover||this.setActiveOption(e||t.currentTarget,!1)},onOptionSelect:function(t,e){var n,i;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(i=C(e||t.currentTarget)).hasClass("g-create")?this.createItem(null,p(function(){this.options.closeAfterSelect&&this.close()},this)):void 0!==(n=i.attribute("data-value"))&&(this.lastQuery=null,this.setTextboxValue(""),this.addItem(n),this.options.closeAfterSelect?this.close():!this.options.hideSelected&&t.type&&/mouse/.test(t.type)&&this.setActiveOption(this.getOption(n)))},onItemSelect:function(t,e){this.isLocked||"multi"===this.options.mode&&(t.preventDefault(),this.setActiveItem(e||t.currentTarget,t))},onItemRemoveViaX:function(t,e){if(t.preventDefault(),!this.isLocked&&"single"!=this.options.mode){var n=e.parent();this.setActiveItem(n),this.deleteSelection()&&this.setCaret(this.items.length)}},load:function(t){var e=this.$wrapper.addClass(this.options.loadingClass);this.loading++,t.apply(this,[p(function(t){this.loading=Math.max(this.loading-1,0),t&&t.length&&(this.addOption(t),this.refreshOptions(this.isFocused&&!this.isInputHidden)),this.loading||e.removeClass(this.options.loadingClass),this.emit("load",t)},this)])},setTextboxValue:function(t){var e=this.$control_input;e.value()!==t&&(e.value(t).emit("update"),this.lastValue=t)},getValue:function(t){return 1===this.tagType&&this.input.attribute("multiple")?t||this.items:(t||this.items).join(this.options.delimiter)},setValue:function(t,e){i(this,e?[]:["change"],function(){this.clear(e),this.previousValue=this.getValue()||t,this.addItems(t,e)})},setActiveItem:function(t,e){var n,i,a,o,r,s,l;if("single"!==this.options.mode){if(!(t=C(t)))return this.$activeItems.length&&C(this.$activeItems).removeClass("g-active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(n=e&&e.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){l=C(b(this.$control.children(".g-active"))),a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[l[0]]),(o=Array.prototype.indexOf.apply(this.$control[0].childNodes,[t[0]]))<a&&(s=a,a=o,o=s);for(var c=a;c<=o;c++)r=this.$control[0].childNodes[c],-1===this.$activeItems.indexOf(r)&&(C(r).addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+C(r).attribute("data-value"))),this.$activeItems.push(r));e.preventDefault()}else"mousedown"===n&&this.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("g-active")?(i=this.$activeItems.indexOf(t[0]),this.$activeItems.splice(i,1),t.removeClass("g-active")):(this.$activeItems.push(t.addClass("g-active")[0]),this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+t.attribute("data-value")))):(C(this.$activeItems)&&C(this.$activeItems).removeClass("g-active"),this.$activeItems=[t.addClass("g-active")[0]],this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+t.attribute("data-value"))));this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(t,e,n){var i,a,o,r,s;this.$activeOption&&this.$activeOption.removeClass("g-active"),this.$activeOption=null,(t=C(t))&&(this.$activeOption=t.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+t.attribute("data-value"))),!e&&l(e)||(i=this.$dropdown_content[0].offsetHeight,a=this.$activeOption[0].offsetHeight,e=this.$dropdown_content[0].scrollTop||0,s=(r=o=this.$activeOption.position().top-this.$dropdown_content.position().top+e)-i+a,i+e<o+a?this.$dropdown_content[0].scrollTop=s:o<e&&(this.$dropdown_content[0].scrollTop=r)))},selectAll:function(){if("single"!==this.options.mode){var t=this.$control.children(":not(input)");t&&(t.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+t.attribute("data-value")))),this.$activeItems=Array.prototype.slice.apply(t||[]),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus()}},hideInput:function(){this.setTextboxValue(""),this.$control_input.style({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.style({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){this.isDisabled||(this.ignoreFocus=!0,this.$control_input[0].focus(),setTimeout(p(function(){this.ignoreFocus=!1,this.onFocus()},this),0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.options.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:this.options.searchField,conjunction:this.options.searchConjunction,sort:t}},search:function(t){var e,n,i,a=this.getSearchOptions();if(this.options.score&&"function"!=typeof(i=this.options.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,n=this.sifter.search(t,T(a,{score:i})),this.currentResults=n):n=T({},this.currentResults),this.options.hideSelected)for(e=n.items.length-1;0<=e;e--)-1!==this.items.indexOf(x(n.items[e].id))&&n.items.splice(e,1);return n},refreshOptions:function(t){var e,n,i,a,o,r,s,l,c,u,d,h,p,f,m,g;void 0===t&&(t=!0);var v=_(this.$control_input.value()),b=this.search(v),y=this.$dropdown_content,w=this.$activeOption&&x(this.$activeOption.attribute("data-value"));for(a=b.items.length,"number"==typeof this.options.maxOptions&&(a=Math.min(a,this.options.maxOptions)),o={},r=[],e=0;e<a;e++)for(s=this.Options[b.items[e].id],l=this.render("option",s),c=s[this.options.optgroupField]||"",n=0,i=(u=E(c)?c:[c])&&u.length;n<i;n++)c=u[n],this.Optgroups.hasOwnProperty(c)||(c=""),o.hasOwnProperty(c)||(o[c]=document.createDocumentFragment(),r.push(c)),o[c].appendChild(l);for(this.options.lockOptgroupOrder&&r.sort(function(t,e){return(this.Optgroups[t].$order||0)-(this.Optgroups[e].$order||0)}),d=document.createDocumentFragment(),e=0,a=r.length;e<a;e++)c=r[e],this.Optgroups.hasOwnProperty(c)&&o[c].childNodes.length?((h=document.createDocumentFragment()).appendChild(this.render("optgroup_header",this.Optgroups[c])),h.appendChild(o[c]),d.appendChild(this.render("optgroup",T({},this.Optgroups[c],{html:k(h),dom:h})))):d.appendChild(o[c]);if(y.html(k(d)),this.options.highlight&&b.query.length&&b.tokens.length)for(e=0,a=b.tokens.length;e<a;e++)S(y,b.tokens[e].regex);if(!this.options.hideSelected)for(e=0,a=this.items.length;e<a;e++)this.getOption(this.items[e]).addClass("g-selected").attribute("aria-selected",!0);(p=this.canCreate(v))&&(C(this.render("option_create",{input:v})).top(y),g=C(y[0].childNodes[0])),this.hasOptions=0<b.items.length||p,this.hasOptions?(0<b.items.length?((m=w&&this.getOption(w))&&m.length?f=m:"single"===this.options.mode&&this.items.length&&(f=this.getOption(this.items[0])),f&&f.length||(f=g&&!this.options.addPrecedence?this.getAdjacentOption(g,1):y.find("[data-selectable]:first-child"))):f=g,this.setActiveOption(f),t&&!this.isOpen&&this.open()):(this.setActiveOption(null),t&&this.isOpen&&this.close())},addOption:function(t){var e;if(E(t))for(var n=0,i=t.length;n<i;n++)this.addOption(t[n]);else(e=this.registerOption(t))&&(this.UserOptions[e]=!0,this.lastQuery=null,this.emit("option_add",e,t))},registerOption:function(t){var e=x(t[this.options.valueField]);return!(!e&&!this.options.allowEmptyOption||this.options.hasOwnProperty(e))&&(t.$order=t.$order||++this.order,this.Options[e]=t,e)},registerOptionGroup:function(t){var e=x(t[this.options.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.Optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.options.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.emit("optgroup_add",t,e)},removeOptionGroup:function(t){this.Optgroups.hasOwnProperty(t)&&(delete this.Optgroups[t],this.renderCache={},this.emit("optgroup_remove",t))},clearOptionGroups:function(){this.Optgroups={},this.renderCache={},this.emit("optgroup_clear")},updateOption:function(t,e){var n,i,a,o,r,s,l;if(t=x(t),a=x(e[this.options.valueField]),null!==t&&this.Options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");l=this.Options[t].$order,a!==t&&(delete this.Options[t],-1!==(o=this.items.indexOf(t))&&this.items.splice(o,1,a)),e.$order=e.$order||l,this.Options[a]=e,r=this.renderCache.item,s=this.renderCache.option,r&&(delete r[t],delete r[a]),s&&(delete s[t],delete s[a]),-1!==this.items.indexOf(a)&&(n=this.getItem(t),i=C(this.render("item",e)),n.hasClass("g-active")&&(i.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",A(this.rand+"-"+i.attribute("data-value")))),i.after(n),n.remove()),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(t,e){t=x(t);var n=this.renderCache.item,i=this.renderCache.option;n&&delete n[t],i&&delete i[t],delete this.UserOptions[t],delete this.Options[t],this.lastQuery=null,this.emit("option_remove",t),this.removeItem(t,e)},clearOptions:function(){this.loadedSearches={},this.UserOptions={},this.renderCache={},this.Options=this.sifter.items={},this.lastQuery=null,this.emit("option_clear"),this.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.search("[data-selectable]"))},getAdjacentOption:function(t,e){var n=this.$dropdown.search("[data-selectable]"),i=v(n,t?t[0]:null)+e;return 0<=i&&i<(n?n.length:0)?C(n[i]):C()},getElementWithValue:function(t,e){if(null!=(t=x(t)))for(var n=0,i=e?e.length:0;n<i;n++)if(e[n].getAttribute("data-value")===t)return C(e[n]);return C()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(t,e){for(var n=E(t)?t:[t],i=0,a=n.length;i<a;i++)this.isPending=i<a-1,this.addItem(n[i],e)},addItem:function(s,l){i(this,l?[]:["change"],function(){var t,e,n,i,a,o=this.options.mode;if(s=x(s),-1===this.items.indexOf(s)){if(this.Options.hasOwnProperty(s)&&("single"===o&&this.clear(l),("multi"!==o||!this.isFull())&&((t=C(this.render("item",this.Options[s]))).attribute("id",this.rand+"-"+A(t.attribute("data-value"))),"multi"===o&&t.attribute("aria-selected",!0),a=this.isFull(),this.items.splice(this.caretPos,0,s),this.insertAtCaret(t),this.isPending&&(a||!this.isFull())||this.refreshState(),this.isSetup))){if(n=this.$dropdown_content.search("[data-selectable]"),!this.isPending){e=this.getOption(s);var r=this.getAdjacentOption(e,1);i=r?r.attribute("data-value"):null,this.refreshOptions(this.isFocused&&"single"!==o),i&&this.setActiveOption(this.getOption(i))}!n||this.isFull()?this.close():this.positionDropdown(),this.updatePlaceholder(),this.emit("item_add",s,t),this.updateOriginalInput({silent:l})}}else"single"===o&&this.close()})},removeItem:function(t,e){var n,i,a;n=t instanceof C?t:this.getItem(t),t=x(n.attribute("data-value")),-1!==(i=this.items.indexOf(t))&&(n.remove(),n.hasClass("g-active")&&(a=this.$activeItems.indexOf(n[0]),this.$activeItems.splice(a,1)),this.items.splice(i,1),this.lastQuery=null,!this.options.persist&&this.UserOptions.hasOwnProperty(t)&&this.removeOption(t,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:e}),this.positionDropdown(),this.emit("item_remove",t,n))},createItem:function(t,n){var i=this.caretPos;t=t||_(this.$control_input.value()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),w(n)||(n=!0),!this.canCreate(t))return a(),!1;this.lock();var e,o,r="function"==typeof this.options.create?this.options.create:p(function(t){var e={};return e[this.options.labelField]=t,e[this.options.valueField]=t,e},this),s=(e=p(function(t){if(this.unlock(),!t||"object"!=typeof t)return a();var e=x(t[this.options.valueField]);if("string"!=typeof e)return a();this.setTextboxValue(""),this.addOption(t),this.setCaret(i),this.addItem(e),this.refreshOptions(n&&"single"!==this.options.mode),a(t)},this),o=!1,function(){o||(o=!0,e.apply(this,arguments))}),l=r.apply(this,[t,s]);return void 0!==l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.isRequired&&(this.items.length&&(this.isInvalid=!1),this.$control_input.attribute("required",this.isInvalid||null)),this.refreshClasses()},refreshClasses:function(){var t=this.isFull(),e=this.isLocked;this.$wrapper.toggleClass("g-rtl",this.rtl),this.$control.toggleClass("g-focus",this.isFocused),this.$control.toggleClass("g-disabled",this.isDisabled),this.$control.toggleClass("g-required",this.isRequired),this.$control.toggleClass("g-invalid",this.isInvalid),this.$control.toggleClass("g-locked",e),this.$control.toggleClass("g-full",t),this.$control.toggleClass("g-not-full",!t),this.$control.toggleClass("g-input-active",this.isFocused&&!this.isInputHidden),this.$control.toggleClass("g-dropdown-active",this.isOpen),this.$control.toggleClass("g-has-options",!O(this.options.Options)),this.$control.toggleClass("g-has-items",0<this.items.length),this.isOpen?(this.$wrapper.attribute("aria-owns",this.rand).attribute("aria-activedescendant",A(this.rand+"-"+this.getValue())).attribute("aria-expanded",!0),this.$dropdown_content.attribute("aria-expanded",!0).attribute("aria-hidden",!1)):(this.$wrapper.attribute("aria-owns",null).attribute("aria-activedescendant",null).attribute("aria-expanded",!1),this.$dropdown_content.attribute("aria-expanded",!1).attribute("aria-hidden",!0)),this.$control_input.selectizeGrow=!t&&!e},isFull:function(){return null!==this.options.maxItems&&this.items.length>=this.options.maxItems},updateOriginalInput:function(t){var e,n;if(t=t||{},1===this.tagType){e=[];for(var i=0,a=this.items.length;i<a;i++)n=this.Options[this.items[i]][this.options.labelField]||"",e.push('<option value="'+I(this.items[i])+'" selected="selected">'+I(n)+"</option>");e.length||this.input.attribute("multiple")||e.push('<option value="" selected="selected"></option>'),this.input.html(e.join(""))}else this.input.value(this.getValue()),this.input.attribute("value",this.input.value());this.isSetup&&!t.silent&&this.emit("change",this.input.value())},updatePlaceholder:function(){if(this.options.placeholder){var t=this.$control_input;this.items.length?t.attribute("placeholder",null):t.attribute("placeholder",this.options.placeholder),t.emit("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.options.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.style({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.style({visibility:"visible"}),this.emit("dropdown_open",this.$dropdown))},close:function(){var t=this.isOpen;"single"===this.options.mode&&this.items.length&&this.hideInput(),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),t&&this.emit("dropdown_close",this.$dropdown)},positionDropdown:function(){var t=this.$control;t.position().top+=t[0].offsetHeight,this.$dropdown.style({width:t[0].offsetWidth,top:t[0].offsetTop+t[0].offsetHeight,left:t[0].offsetLeft})},clear:function(t){if(this.items.length){var e=this.$control.children(":not(input)");e&&e.remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.emit("clear")}},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length);0===e?t.top(this.$control):t.after(this.$control.find(":nth-child("+e+")")),this.setCaret(e+1)},deleteSelection:function(t){var e,n,i,a,o,r,s,l,c;if(i=t&&8===t.keyCode?-1:1,a=m(this.$control_input[0]),this.$activeOption&&!this.options.hideSelected&&(s=(s=this.getAdjacentOption(this.$activeOption,-1))&&s.attribute("data-value")),o=[],this.$activeItems.length){var u=this.$control.children(":not(input)");for(c=(c=this.$control.children(".g-active"))&&C(0<i?b(c):c[0]),r=u?v(u,c[0]):-1,0<i&&r++,e=0,n=this.$activeItems.length;e<n;e++)o.push(C(this.$activeItems[e]).attribute("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(this.isFocused||"single"===this.options.mode)&&this.items.length&&(i<0&&0===a.start&&0===a.length?o.push(this.items[this.caretPos-1]):0<i&&a.start===this.$control_input.value().length&&o.push(this.items[this.caretPos]));if(!o.length||"function"==typeof this.options.onDelete&&!1===this.options.onDelete.apply(this,[o]))return!1;for(void 0!==r&&this.setCaret(r);o.length;)this.removeItem(o.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),s&&(l=this.getOption(s)).length&&this.setActiveOption(l),!0},advanceSelection:function(t,e){var n,i,a,o,r;0!==t&&(this.rtl&&(t*=-1),n=0<t?"last-child":"first-child",i=m(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(o=this.$control_input.value().length,(t<0?0!==i.start||0!==i.length:i.start!==o)||o||this.advanceCaret(t,e)):(r=this.$control.children(".g-active:"+n))&&(a=v(this.$control.children(":not(input)"),r),this.setActiveItem(null),this.setCaret(0<t?a+1:a)))},advanceCaret:function(t,e){var n,i;0!==t&&(n=0<t?"nextSibling":"previousSibling",this.isShiftDown?(i=this.$control_input[n]())&&(this.hideInput(),this.setActiveItem(i),e&&e.preventDefault()):this.setCaret(this.caretPos+t))},setCaret:function(t){var e,n,i,a;if(t="single"===this.options.mode?this.items.length:Math.max(0,Math.min(this.items.length,t)),!this.isPending)for(e=0,n=(i=this.$control.children(":not(input)"))?i.length:0;e<n;e++)a=C(i[e]),e<t?a.before(this.$control_input):this.$control.appendChild(a);this.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.input.disabled(!0),this.$control_input.attribute("disabled",!0).attribute("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.input.attribute("disabled",null),this.$control_input.attribute("disabled",null).attribute("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var t=this.revertSettings;this.emit("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.input.html("").appendChild(t.$children).attribute("tabindex",null).removeClass("selectized").attribute({tabindex:t.tabindex}).show(),delete this.$control_input.selectizeGrow,delete this.input.selectizeInstance,delete this.input[0].selectize},render:function(t,e){var n,i,a="",o=!1;if("option"!==t&&"item"!==t||(o=!!(n=x(e[this.options.valueField]))),o&&(l(this.renderCache[t])||(this.renderCache[t]={}),this.renderCache[t].hasOwnProperty(n)))return this.renderCache[t][n];var r=g("div").html(this.options.render[t].apply(this,[e,I]));return r=r.firstChild(),"option"!==t&&"option_create"!==t||(r=r.data("selectable","")),"optgroup"===t&&(i=e[this.options.optgroupValueField]||"",a=s(I(i)),r=r.data("group",a).attribute("role","group").attribute("aria-label",a)),"option"!==t&&"item"!==t||(a=s(I(n||"")),r=r.data("value",a).attribute("id",A(this.rand+"-"+a)).attribute("role","treeitem").attribute("aria-label",_(e.text)).attribute("aria-selected","false")),o&&(this.renderCache[t][n]=r[0]),r[0]},clearCache:function(t){void 0===t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){if(!this.options.create)return!1;var e=this.options.createFilter;return t.length&&("function"!=typeof e||e.apply(self,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))},getPreviousValue:function(){return this.previousValue}});C.implement({selectize:function(s){s=s||{};function l(t,r){function s(t){var e=h&&t.attribute(h);return"string"==typeof e&&e.length?JSON.parse(e):null}function l(t,e){var n,i;if(t=C(t),(n=x(t.value())).length||d.allowEmptyOption)if(u.hasOwnProperty(n)){if(e){var a=u[n][m];a?E(a)?a.push(e):u[n][m]=[a,e]:u[n][m]=e}}else(i=s(t)||{})[p]=i[p]||t.text(),i[f]=i[f]||n,i[m]=i[m]||e,u[n]=i,c.push(i),t.matches(":selected")&&r.items.push(n)}function e(t){var e,n,i,a,o;for((i=(t=C(t)).attribute("label"))&&((a=s(t)||{})[g]=i,a[v]=i,r.Optgroups.push(a)),e=0,n=(o=t.search("option")).length;e<n;e++)l(o[e],i)}var n,i,a,o,c=r.Options,u={};for(r.maxItems=t.attribute("multiple")?null:1,n=0,i=(o=t.children()||0).length;n<i;n++)"optgroup"===(a=o[n].tagName.toLowerCase())?e(o[n]):"option"===a&&l(o[n])}var c=R.prototype.options,d=T({},c,s),h=d.dataAttr,p=d.labelField,f=d.valueField,m=d.optgroupField,g=d.optgroupLabelField,v=d.optgroupValueField;return this.forEach(function(t,e){if(d=T({},c,s),!(t=C(t)).selectizeInstance){var n,i=t.data("selectize"),a=t.tag().toLowerCase(),o=t.attribute("placeholder")||t.attribute("data-placeholder");if(i=i&&JSON.parse(i),d=T({},d,i),!o&&!d.allowEmptyOption)o=t.children('option[value=""]')?t.children('option[value=""]').text():"";var r={placeholder:o,Options:[],Optgroups:[],items:[]};("select"===a?l:function(t,e){var n,i,a,o,r=(t=C(t)).attribute(h);if(r)for(e.Options=JSON.parse(r),n=0,i=e.Options.length;n<i;n++)e.items.push(e.Options[n][f]);else{var s=_(t.value()||"");if(!d.allowEmptyOption&&!s.length)return;for(n=0,i=(a=s.split(d.delimiter)).length;n<i;n++)(o={})[p]=a[n],o[f]=a[n],e.Options.push(o);e.items=a}})(t,r),n=new R(t,T({},c,r,s,i)),t.selectizeInstance=n}})}}),o(function(){var t=C("[data-selectize]");t&&t.selectize()}),e.exports=R},{"../utils/elements.utils":276,"elements/domready":32,"elements/zen":37,moofx:38,"mout/array/indexOf":75,"mout/array/last":79,"mout/collection/forEach":89,"mout/function/bind":92,"mout/function/debounce":93,"mout/lang/isArray":104,"mout/lang/isBoolean":105,"mout/object/merge":138,"mout/object/size":143,"mout/object/unset":145,"mout/object/values":146,"mout/string/escapeHtml":160,"mout/string/slugify":172,"mout/string/trim":173,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202,sifter:206}],269:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),o=t("prime-util/prime/bound"),r=t("prime-util/prime/options"),d=t("elements/zen"),s=t("../utils/elements.utils.js"),l=t("prime/map")(),h=t("mout/function/bind"),c=t("mout/object/merge"),u=new new i({mixin:[o,r],inherits:a,options:{tapToDismiss:!0,noticeClass:"g-notifications",containerID:"g-notifications-container",types:{base:"",error:"fa-minus-circle",info:"fa-info-circle",success:"fa-check-circle",warning:"fa-exclamation-triangle"},showDuration:300,showEquation:"cubic-bezier(0.02, 0.01, 0.47, 1)",hideDuration:500,hideEquation:"cubic-bezier(0.02, 0.01, 0.47, 1)",timeOut:2500,extendedTimeout:2500,location:"bottom-right",titleClass:"g-notifications-title",messageClass:"g-notifications-message",closeButton:!0,target:"#g5-container",targetLocation:"bottom",newestOnTop:!0,preventDuplicates:!1,progressBar:!0},constructor:function(t){this.setOptions(t),this.id=0,this.previousNotice=null,this.map=l},mergeOptions:function(t){return c(this.options,t||{})},base:function(t,e,n){return n=this.mergeOptions(n),this.notify(c(n,{title:e||"",type:n.type||"base",message:t}))},success:function(t,e,n){return n=this.mergeOptions(n),this.notify(c(n,{title:e||"Success!",type:"success",message:t}))},info:function(t,e,n){return n=this.mergeOptions(n),this.notify(c(n,{title:e||"Info",type:"info",message:t}))},warning:function(t,e,n){return n=this.mergeOptions(n),this.notify(c(n,{title:e||"Warning!",type:"warning",message:t}))},error:function(t,e,n){return n=this.mergeOptions(n),this.notify(c(n,{title:e||"Error!",type:"error",message:t}))},notify:function(t){if(!(t=this.mergeOptions(t)).preventDuplicates||this.previousNotice!==t.message){this.id++,this.previousNotice=t.message;var e=this.getContainer(t,!0),n=d("div"),i=d("div"),a=d("div"),o=d("i.fa"),r=d("div.g-notifications-progress"),s=d('a.fa.fa-close[href="#"]');if(this.map.set(n,{container:e,interval:null,progressBar:{interval:null,hideETA:null,maxHideTime:null},response:{id:this.id,state:"visible",start:new Date,options:t},options:t}),t.title&&n.appendChild(i.html(t.title).addClass(t.titleClass)),t.message&&n.appendChild(a.html(t.message).addClass(t.messageClass)),t.closeButton&&s.top(n),t.progressBar&&r.top(n),t.type&&t.title&&t.types[t.type]&&(n.addClass("g-notifications-theme-"+t.type),o.top(i).addClass(t.types[t.type])),n.style({opacity:0}),n[t.newestOnTop?"top":"bottom"](e),n.animate({opacity:1},{duration:t.showDuration,equation:t.showEquation,callback:t.onShow}),0<t.timeOut){var l=this.map.get(n);l.interval=setTimeout(h(function(){this.hide(n)},this),t.timeOut),l.progressBar.maxHideTime=parseFloat(t.timeOut),l.progressBar.hideETA=(new Date).getTime()+l.progressBar.maxHideTime,t.progressBar&&(l.progressBar.interval=setInterval(h(function(){this.updateProgress(n,r)},this),10)),this.map.set(n,l)}var c=h(function(){this.stickAround(n)},this),u=h(function(){this.delayedHide(n)},this);n.on("mouseover",c),n.on("mouseout",u),!t.onClick&&t.tapToDismiss&&n.on("click",h(function(){n.off("mouseover",c),n.off("mouseout",u),this.hide(n)},this)),t.closeButton&&s&&s.on("click",h(function(t){t.stopPropagation(),t.preventDefault(),n.off("mouseover",c),n.off("mouseout",u),this.hide(n,!0)},this))}},stickAround:function(t){var e=this.map.get(t);clearTimeout(e.interval),e.progressBar.hideETA=0,t.animate({opacity:1},{duration:e.options.showDuration,equation:e.options.showEquation,callback:e.options.onShow}),this.map.set(t,e)},hide:function(t,e){if(!t.find(":focus")||e){var n=this.map.get(t);return clearTimeout(n.progressBar.interval),this.map.set(t,n),t.animate({opacity:0},{duration:n.options.hideDuration,equation:n.options.hideEquation,callback:h(function(){this.remove(t),n.options.onHidden&&"hidden"!==n.response.state&&n.options.onHidden(),n.response.state="hidden",n.response.endTime=new Date,this.map.set(t,n)},this)})}},delayedHide:function(t,e){var n=this.map.get(t);(0<n.options.timeOut||0<n.options.extendedTimeout)&&(n.interval=setTimeout(h(function(){this.hide(t)},this),n.options.extendedTimeout),n.progressBar.maxHideTime=parseFloat(n.options.extendedTimeout),n.progressBar.hideETA=(new Date).getTime()+n.progressBar.maxHideTime),this.map.set(t,n)},updateProgress:function(t,e){var n=this.map.get(t),i=(n.progressBar.hideETA-(new Date).getTime())/n.progressBar.maxHideTime*100;this.map.set(t,n),e.style({width:i+"%"})},getContainer:function(t,e){t=this.mergeOptions(t);var n=s("#"+t.containerID);return n||(e&&(n=this.createContainer(t)),n)},createContainer:function(t){return t=this.mergeOptions(t),d("div#"+t.containerID+"."+t.location)[t.targetLocation](t.target).attribute("aria-live","polite").attribute("role","alert")},remove:function(t){if(t){var e=this.map.get(t);e.container||(e.container=this.getContainer(e.options)),t.remove(),e.container.children()||(e.container.remove(),this.previousNotice=null),this.map.set(t,e)}}});e.exports=u},{"../utils/elements.utils.js":276,"elements/zen":37,"mout/function/bind":92,"mout/object/merge":138,prime:203,"prime-util/prime/bound":199,"prime-util/prime/options":200,"prime/emitter":202,"prime/map":204}],270:[function(t,e,n){"use strict";function i(t,e){return!t.type.match(/^touch/)&&"click"!=t.type||t.preventDefault(),"click"!=t.type&&(e=s(e),!(a=e.find("~~ [type=hidden]"))||(a.value("0"==a.value()?"1":"0"),e.parent(".enabler").attribute("aria-checked","1"==a.value()?"true":"false"),a.emit("change"),s("body").emit("change",{target:a}),!1))}var a,o=t("elements/domready"),s=t("elements"),l=t("./modal"),c=t("./toastr"),u=t("agent"),d=t("../utils/get-ajax-suffix"),h=t("../utils/get-ajax-url").parse,p=t("../utils/get-ajax-url").global;o(function(){var e=s("body");e.delegate("keydown",".enabler",function(t,e){if(!(e=s(e)).disabled()&&!e.find("[disabled]")){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),i(t,e.find(".toggle")))}}),["touchend","mouseup","click"].forEach(function(t){e.delegate(t,".enabler .toggle",i)});var r=h(p("devprod")+d());e.delegate("change",'[data-g-devprod] input[type="hidden"]',function(t,n){var i=n.value(),a=n.parent("[data-g-devprod]"),o=JSON.parse(a.data("g-devprod"));a.showIndicator(),u("post",r,{mode:i},function(t,e){e.body.success?(a.find(".devprod-mode").text(o[e.body.mode]||"Unknown"),c.success(e.body.html,e.body.title)):(l.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),n.value(!i)),a.hideIndicator()})})}),e.exports={}},{"../utils/get-ajax-suffix":280,"../utils/get-ajax-url":281,"./modal":265,"./toastr":269,agent:1,elements:34,"elements/domready":32}],271:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("ext/tooltips");a.defaults={baseClass:"g-tips",typeClass:null,effectClass:"g-fade",inClass:"g-tip-in",place:"top",spacing:10,offset:-3,auto:1};var o=null;i(function(){o=new a(document,{tooltip:a.defaults,key:"tip",showOn:"mouseenter",hideOn:"mouseleave",observe:1}),window.G5.tips=o}),e.exports=o},{"elements/domready":32,"ext/tooltips":"ext/tooltips"}],272:[function(t,e,n){"use strict";t("prime");var f=t("../utils/elements.utils"),i=(t("elements/zen"),t("elements/domready")),m=t("prime/map")(),g=t("../ui").modal,r=t("mout/collection/size"),a=t("mout/array/indexOf"),v=t("mout/object/merge"),l=t("mout/object/keys"),b=t("mout/random/guid"),u=t("mout/queryString/encode"),d=t("mout/string/contains"),o=t("mout/queryString/getParam"),s=t("mout/queryString/setParam"),h=t("agent")(),y=t("./history"),w=t("./flags-state"),p=t("./get-ajax-url").parse,x=t("./get-ajax-suffix"),k=(t("../lm"),t("../menu")),S=t("../assignments");t("../ui/popover");var C=!1,c=!1,E=-1;y.Adapter.bind(window,"statechange",function(){if(h.running())return!1;var s=f("body"),t=y.getState(),e=t.url,l=t.data,n=f("#navbar"),i=f("#main-header"),a="";if(l.doNothing)return!0;if(r(l)&&!1!==l.parsed&&m.get(l.uuid)&&(l=m.get(l.uuid)),l.element){var c=l.element.parent("#main-header")||l.element.matches(".menu-select-wrap");s.emit("statechangeBefore",{target:l.element,Data:l})}else{var o=e.replace(window.location.origin,"");l.element=f('[href="'+o+'"]')}if(e=p(e+x()),n&&l.element){n.search("li.active");n.search("li").removeClass("active"),l.element.parent("#navbar")&&l.element.parent("li").addClass("active")}i&&l.element&&!l.element.matches("a.menu-item")&&!l.element.matches("select.menu-select-wrap")&&(i.search(".float-right li").removeClass("active"),l.element.parent("#main-header")&&l.element.parent("li").addClass("active")),l.params&&(a=u(JSON.parse(l.params)),d(e,"?")&&(a=a.replace(/^\?/,"&"))),C||g.closeAll(),h.url(e+a).data(l.extras||{}).method(l.extras?"post":"get").send(function(t,e){if(!e.body.success)return C?C=!1:(C=!0,g.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),y.back()),l.element&&l.element.hideIndicator(),!1;var n,i=(l.parent?l.element.parent(l.parent):f(l.target))||f("[data-g5-content]")||s;if(e.body&&e.body.html){if(i.html(e.body.html),n=i.matches("[data-g5-content]")?i:i.find("[data-g5-content]")){var a=f("#navbar");n.style({opacity:0}),c&&f(a).attribute("tabindex","-1").attribute("aria-hidden","true"),a[c?"slideUp":"slideDown"](),n.animate({opacity:1})}}else i.html(e.body);s.getPopover().hideAll(!0).destroy(),l.element&&s.emit("statechangeAfter",{target:l.element,Data:l});var o=l.event&&l.event.activeSpinner||l.element;o&&o.hideIndicator();var r=f("[data-selectize]");r&&r.selectize(),T(),S.chromeFix(),s.emit("statechangeEnd")})});var T=function(){var t=f("[data-selectize-ajaxify]");t&&t.forEach(function(i){var o=(i=f(i)).selectize().selectizeInstance;o&&!o.HasChangeEvent&&(o.on("change",function(){if(c)return c=!1;var e=o.getValue(),n=o.Options,a=function(){w.off("update:pending",a),g.close(),o.input.data("g5-ajaxify","").data("g5-ajaxify-target",i.data("g5-ajaxify-target")||"[data-g5-content-wrapper]").data("g5-ajaxify-target-parent",i.data("g5-ajaxify-target-parent")||null).data("g5-ajaxify-href",n[e].url).data("g5-ajaxify-params",n[e].params?JSON.stringify(n[e].params):null);var t=f("#navbar li.active")||f("#main-header li.active")||f("#navbar li:nth-child(2)");t&&t.showIndicator(),f("body").emit("click",{target:o.input,activeSpinner:t})};n[e]&&(w.get("pending")?w.warning({callback:function(t,e){var n=e.find("[data-g-unsaved-save]"),i=e.find("[data-g-unsaved-discard]");n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.on("update:pending",a),f("body").emit("click",{target:f(".button-save")})}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.set("pending",!1),a()}))},afterclose:function(){c=!0,o.setValue(o.getPreviousValue())}}):a())}),o.HasChangeEvent=!0)})};i(function(){var p=f("body");if(GANTRY_AJAX_NONCE){var t=y.getPageUrl();switch(GANTRY_PLATFORM){case"wordpress":o(t,"_wpnonce")!==GANTRY_AJAX_NONCE&&(t=s(t,"_wpnonce",GANTRY_AJAX_NONCE),y.replaceState({uuid:b(),doNothing:!0},window.document.title,t));break;case"grav":o(t,"nonce")!==GANTRY_AJAX_NONCE&&(t=s(t,"nonce",GANTRY_AJAX_NONCE),y.replaceState({uuid:b(),doNothing:!0},window.document.title,t))}}p.delegate("click",".button-back-to-conf",function(t,e){t.preventDefault();var n=f("#configuration-selector"),i=p.outlineDeleted,a=n.value();E=-1==E?1:E;var o=f("#navbar"),r=o.find("li:nth-child("+(E+1)+") [data-g5-ajaxify]");if(w.get("pending"))w.warning({callback:function(t,e){var n=e.find("[data-g-unsaved-save]"),i=e.find("[data-g-unsaved-discard]"),a=function(){w.off("update:pending",a),g.close(),p.emit("click",{target:r}),o.attribute("tabindex",null).attribute("aria-hidden","false"),o.slideDown()};n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.on("update:pending",a),p.emit("click",{target:f(".button-save")})}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.set("pending",!1),a()}))}});else{if(e.showIndicator(),i==a){var s=l(n.selectizeInstance.Options).shift();p.outlineDeleted=null,r.href(r.href().replace("/"+i+"/","/"+s+"/").replace("style="+i,"style="+s))}p.emit("click",{target:r}),o.attribute("tabindex",null),o.slideDown()}}),p.delegate("click","#navbar a[data-g5-ajaxify]",function(t,e){var n=f("#navbar").search("li a[data-g5-ajaxify]");E=a(n,e[0])+1}),p.delegate("click","[data-g5-ajaxify]",function(o,t){if(o&&o.preventDefault){if(2===o.which||o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return!0;o.preventDefault()}if(!w.get("pending")||t.matches("a.menu-item")||t.parent("[data-menu-items]")){t.showIndicator();var e=t.data("g5-ajaxify"),n=t.data("g5-ajaxify-target"),i=t.data("g5-ajaxify-target-parent"),a=t.attribute("href")||t.data("g5-ajaxify-href"),r=t.data("g5-ajaxify-params")||!1,s=t.attribute("title")||window.document.title;if(e=e?JSON.parse(e):{parsed:!1}){var l,c=b();(t.data("mm-id")||t.parent("[data-mm-id]"))&&((l={}).menutype=f("select.menu-select-wrap").value(),l.settings=JSON.stringify(k.menumanager.settings),l.ordering=JSON.stringify(k.menumanager.ordering),l.items=JSON.stringify(k.menumanager.items)),m.set(c,v({},e,{target:n,parent:i,element:t,params:r,extras:l,event:o})),e={uuid:c}}y.pushState(e,s,a);var u,d,h=f("#navbar .active, #main-header .active");(u=t.parent("#navbar, #main-header"))&&(h&&h.removeClass("active"),(d=u.search(".active"))&&d.removeClass("active"),t.parent("li").addClass("active"))}else w.warning({callback:function(t,e){var n=e.find("[data-g-unsaved-save]"),i=e.find("[data-g-unsaved-discard]"),a=function(){w.off("update:pending",a),g.close(),p.emit("click",o)};n&&(n.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.on("update:pending",a),p.emit("click",{target:f(".button-save")})}),i.on("click",function(t){if(t.preventDefault(),this.attribute("disabled"))return!1;f([n,i]).attribute("disabled"),w.set("pending",!1),a()}))}})}),T()}),e.exports={}},{"../assignments":213,"../lm":238,"../menu":245,"../ui":264,"../ui/popover":266,"../utils/elements.utils":276,"./flags-state":279,"./get-ajax-suffix":280,"./get-ajax-url":281,"./history":285,agent:1,"elements/domready":32,"elements/zen":37,"mout/array/indexOf":75,"mout/collection/size":91,"mout/object/keys":137,"mout/object/merge":138,"mout/queryString/encode":147,"mout/queryString/getParam":148,"mout/queryString/setParam":150,"mout/random/guid":152,"mout/string/contains":158,prime:203,"prime/map":204}],273:[function(t,e,n){"use strict";e.exports=function(a,o,r){var s=-1,l=(a=a||[]).length>>>0;!function t(e){for(var n,i=!1===e;!(++s in a)&&s!==l;);i||s===l?r&&r(!i,a):(e=o.call({async:function(){return n=!0,t}},a[s],s,a),n||t(e))}()}},{}],274:[function(t,e,n){"use strict";var i={write:function(t,e){var n=new Date;n.setTime(n.getTime()+31536e7);var i=window.location.host.toString(),a=i.substring(i.lastIndexOf(".",i.lastIndexOf(".")-1)+1);i.match(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)&&(a=i);var o=[t,"=",JSON.stringify(e),"; expires=",n.toGMTString(),"; domain=.",a,"; path=/;"];document.cookie=o.join("")},read:function(t){t=t.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var e=document.cookie.match("(?:^|;)\\s*"+t+"=([^;]*)");return e?JSON.parse(decodeURIComponent(e[1])):null}};e.exports=i},{}],275:[function(t,e,n){"use strict";var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};e.exports=function(t,e,n){var i,a=!1;t=t[0]||t;function o(t){i=t,r()}var r=function(){a||(l(s),a=!0)},s=function(){n.call(t,i),a=!1};try{t.addEventListener(e,o,!1)}catch(t){}return o}},{}],276:[function(t,e,n){"use strict";function i(n,i){return function(t){var e=l.parse(t||"*");return t=r(e,function(t){return n+" "+t}).join(", "),this[i](t)}}var a=t("elements"),o=t("moofx"),r=t("mout/array/map"),s=t("mout/function/series"),l=t("slick"),c=t("elements/zen"),u=t("../ui/progresser");a.implement({style:function(){var t=o(this);return t.style.apply(t,arguments),this},animate:function(){var t=o(this);return t.animate.apply(t,arguments),this},hide:function(){return this.style("display","none")},show:function(t){return this.style("display",t||"inherit")},progresser:function(e){var n;this.forEach(function(t){return(n=t.ProgresserInstance)?n.constructor(t,e):n=new u(t,e),t.ProgresserInstance=n})},compute:function(){var t=o(this);return t.compute.apply(t,arguments)},showIndicator:function(n,i){this.forEach(function(t){t=a(t),"boolean"==typeof n&&(i=n,n=null);var e=!i&&t.find("i");t.gHadIcon=!!e,e||(t.find("span")||t.children()||c("span").text(t.text()).top(t.empty()),(e=c("i")).top(t)),t.gIndicator||(t.gIndicator=e.attribute("class")||!0),e.attribute("class",n||"fa fa-fw fa-spin-fast fa-spinner")})},hideIndicator:function(){this.forEach(function(t){if((t=a(t)).gIndicator){var e=t.find("i");e&&(t.gHadIcon?e.attribute("class",t.gIndicator):e.remove(),t.gIndicator=null)}})},slideDown:function(t,e){var n=this,i=this.getRealSize();if(e="function"==typeof t?t:e||function(){},!1===this.gSlideCollapsed)return e();e=s(function(){n.gSlideCollapsed=!1},e,function(){n.attribute("style",n.gSlideStyle)}),t="string"==typeof t?t:{duration:"250ms",callback:e},this.style("visibility","visible").attribute("aria-hidden",!1),this.animate({height:i.height},t)},slideUp:function(t,e){void 0===this.gSlideCollapsed&&(this.gSlideStyle=this.attribute("style"));var n=this;if(e="function"==typeof t?t:e||function(){},!0===this.gSlideCollapsed)return e();e=s(function(){n.gSlideCollapsed=!0},e,function(){n.style("visibility","hidden").attribute("aria-hidden",!0)}),t="string"==typeof t?t:{duration:"250ms",callback:e},this.style({overflow:"hidden"}).animate({height:0},t)},slideToggle:function(t,e){var n=this.getRealSize();return this[n.height&&!this.gSlideCollapsed?"slideUp":"slideDown"](t,e)},getRealSize:function(){var t,e=this.attribute("style");return this.style({position:"relative",overflow:"inherit",top:-5e4,height:"auto",width:"auto"}),t={width:parseInt(this.compute("width"),10),height:parseInt(this.compute("height"),10)},this[0].style=e,t},sibling:i("++","find"),siblings:i("~~","search")}),e.exports=a},{"../ui/progresser":267,elements:34,"elements/zen":37,moofx:38,"mout/array/map":80,"mout/function/series":97,slick:208}],277:[function(t,e,n){"use strict";var a=t("elements");a.implement({belowthefold:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var i=this.position().height+this[0].scrollTop;return n.filter(function(t){return i<=a(t)[0].offsetTop-e})},abovethetop:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var i=this[0].scrollTop;return n.filter(function(t){return i>=a(t)[0].offsetTop+a(t).position().height-e})},rightofscreen:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var i=this.position().width+this[0].scrollLeft;return n.filter(function(t){return i<=a(t)[0].offsetLeft-e})},leftofscreen:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var i=this[0].scrollLeft;return n.filter(function(t){return i>=a(t)[0].offsetLeft+a(t).position().width-e})},inviewport:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var i=this.position();return n.filter(function(t){return(t=a(t))[0].offsetTop+e>=this[0].scrollTop&&t[0].offsetTop-e<=this[0].scrollTop+i.height},this)}}),e.exports=a},{elements:34}],278:[function(t,e,n){"use strict";var h=t("elements"),o=function(t){var e=!0,n=(t=h(t)).value(),i=t.type(),a="checkbox"==i||"radio"==i,o=t.attribute("disabled"),r=t.attribute("required"),s=t.attribute("minlength"),l=t.attribute("maxlength"),c=t.attribute("min"),u=t.attribute("max"),d=t.attribute("pattern");return o||((e=(e=e&&(!r||a&&t.checked()||!a&&n))&&(a||(!s||n.length>=s)&&(!l||n.length<=l)))&&d&&(e=(d=new RegExp(d)).test(n)),!e||null===c&&null===u||(null!==c&&(e=parseFloat(n)>=parseFloat(c)),null!==u&&(e=parseFloat(n)<=parseFloat(u)))),e};e.exports=function(t){var e=(t=h(t))[0],n=t.tag(),i=t.type(),a=!0;return~["input","textarea","select"].indexOf(n)?(void 0!==e.willValidate?("input"!=n||e.type.toLowerCase()===i&&!t.hasClass("custom-validation-field")||e.setCustomValidity(o(t)?"":"The field value is invalid"),e.checkValidity()):(e.validity=e.validity||{},e.validity.valid=o(t)),a=e.validity.valid):a}},{elements:34}],279:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/map"),o=t("prime/emitter"),r=t("../ui").modal,s=t("./get-ajax-url").global,l=t("./get-ajax-url").parse,c=t("./get-ajax-suffix"),u=new i({inherits:o,constructor:function(){this.flags=a()},set:function(t,e){return this.flags.set(t,e).get(t)},get:function(t,e){var n=this.flags.get(t);return n||this.set(t,e)},keys:function(){return this.flags.keys()},values:function(){return this.flags.values()},warning:function(t){var i=t.callback||function(){},e=t.afterclose||function(){},n=l(t.url||s("unsaved")+c());t.url||t.message||(t.url=!0),t.url?r.open({content:"Loading...",remote:n,data:t.data||!1,remoteLoaded:function(t,e){var n=e.elements.content;i&&i.call(this,t,n,e)},afterClose:e||function(){}}):r.open({content:t.message,afterOpen:function(t,e){var n=e.elements.content;i&&i.call(this,t,n,e)},afterClose:e||function(){}})}});e.exports=new u},{"../ui":264,"./get-ajax-suffix":280,"./get-ajax-url":281,prime:203,"prime/emitter":202,"prime/map":204}],280:[function(t,e,n){"use strict";e.exports=function(){var t=window.GANTRY_AJAX_SUFFIX||void 0;return void 0===t?"":t}},{}],281:[function(t,e,n){"use strict";var a=t("mout/string/unescapeHtml"),o=t("./get-ajax-suffix"),r=t("mout/string/endsWith"),s=t("mout/queryString/getQuery"),l=t("mout/queryString/getParam");t("mout/queryString/setParam");e.exports={global:function(t,e){var n=window.GANTRY_AJAX_URL||"";e=e||"%ajax%";var i=new RegExp(e,"g");return a((void 0===n?"":n).replace(i,t))},config:function(t,e){var n=window.GANTRY_AJAX_CONF_URL||"";e=e||"%ajax%";var i=new RegExp(e,"g");return a((void 0===n?"":n).replace(i,t))},parse:function(t){var e=window.GANTRY_PLATFORM||"";switch(void 0===e?"":e){case"wordpress":t=t.replace(/themes\.php/gi,"admin-ajax.php");break;case"grav":var n=o();if(r(t,n)){var i=""+s(t),a=""+l(t,"nonce");t=t.replace(i,n)+i.replace(a,a.replace(n,""))}}return t}}},{"./get-ajax-suffix":280,"mout/queryString/getParam":148,"mout/queryString/getQuery":149,"mout/queryString/setParam":150,"mout/string/endsWith":159,"mout/string/unescapeHtml":175}],282:[function(t,e,n){"use strict";var i=t("elements"),a=t("mout/string/trim");e.exports={getOutlineNameById:function(t){return null==t?"":a(i("#configuration-selector").selectizeInstance.Options[t].text)},getCurrentOutline:function(){return a(i("#configuration-selector").selectizeInstance.getValue())}}},{elements:34,"mout/string/trim":173}],283:[function(t,e,n){"use strict";var i=t("elements/zen"),a=null;e.exports=function(){if(null!==a)return a;var t,e=i("div").bottom("#g5-container");return e.style({width:100,height:100,overflow:"scroll",position:"absolute",zIndex:-9999}),t=e[0].offsetWidth-e[0].clientWidth,e.remove(),a=t}},{"elements/zen":37}],284:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/domready"),o={};if(void 0!==o.Adapter)throw new Error("History.js Adapter has already been loaded...");o.Adapter={bind:function(t,e,n){i(t).on(e,n)},trigger:function(t,e,n){i(t).emit(e,n)},extractEventData:function(t,e){return e&&e.event&&e.event[t]||e&&e[t]||void 0},onDomLoad:function(t){a(t)}},void 0!==o.init&&o.init(),e.exports=o},{elements:34,"elements/domready":32}],285:[function(t,e,n){"use strict";var s=window.console||void 0,l=window.document,i=window.navigator,a=!1,o=window.setTimeout,r=window.clearTimeout,c=window.setInterval,u=window.clearInterval,d=window.JSON,h=window.alert,p=window.History=t("./history-adapter")||{},f=window.history;try{(a=window.sessionStorage).setItem("TEST","1"),a.removeItem("TEST")}catch(t){a=!1}d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,void 0===p.init&&(p.init=function(t){return void 0!==p.Adapter&&(void 0!==p.initCore&&p.initCore(),void 0!==p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(t){if(void 0!==p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||l.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if(null!=e){for(t=0;t<e.length;t++)u(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,e,n,i,a,o=!(void 0===s||void 0===s.log||void 0===s.log.apply),r=l.getElementById("log");for(o?(t=(i=Array.prototype.slice.call(arguments)).shift(),void 0!==s.debug?s.debug.apply(s,[t,i]):s.log.apply(s,[t,i])):t="\n"+arguments[0]+"\n",e=1,n=arguments.length;e<n;++e){if("object"==typeof(a=arguments[e])&&void 0!==d)try{a=d.stringify(a)}catch(t){}t+="\n"+a+"\n"}return r?(r.value+=t+"\n-----\n",r.scrollTop=r.scrollHeight-r.clientHeight):o||h(t),!0},p.getInternetExplorerMajorVersion=function(){return p.getInternetExplorerMajorVersion.cached=void 0!==p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=l.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e")&&n[0];);return 4<t&&t}()},p.isInternetExplorer=function(){return p.isInternetExplorer.cached=void 0!==p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion())},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent))),hashChange:Boolean(!("onhashchange"in window||"onhashchange"in l)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e;return t?(e=d.stringify(t),d.parse(e)):{}},p.getRootUrl=function(){var t=l.location.protocol+"//"+(l.location.hostname||l.location.host);return l.location.port&&(t+=":"+l.location.port),t+="/"},p.getBaseHref=function(){var t=l.getElementsByTagName("base"),e="";return 1===t.length&&(e=t[0].href.replace(/[^\/]+$/,"")),(e=e.replace(/\/+$/,""))&&(e+="/"),e},p.getBaseUrl=function(){return p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl()},p.getPageUrl=function(){return((p.getState(!1,!1)||{}).url||p.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,n){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){return p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,n){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},p.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e=void 0===e||e,/[a-z]+\:\/\//.test(t)||(n="/"===i?p.getRootUrl()+t.replace(/^\/+/,""):"#"===i?p.getPageUrl().replace(/#.*/,"")+t:"?"===i?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,n=p.getBaseUrl(),i=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),p.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return(t=t||l).URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:(!t.location.hash||decodeURIComponent(t.location.href.replace(/^[^#]+/,""))!==t.location.hash)&&(-1!=t.URL.indexOf("#")||-1==t.location.href.indexOf("#"))&&t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n=p.getLastSavedState();return!n&&e&&(n=p.createStateObject()),t&&((n=p.cloneObject(n)).url=n.cleanUrl||n.url),n},p.getIdByState=function(t){var e,n=p.extractId(t.url);if(!n)if(e=p.getStateString(t),void 0!==p.stateToId[e])n=p.stateToId[e];else if(void 0!==p.store.stateToId[e])n=p.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==p.idToState[n]||void 0!==p.store.idToState[n];);p.stateToId[e]=n,p.idToState[n]=t}return n},p.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),void 0!==t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),(e={normalized:!0}).title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!p.isEmptyObject(e.data),(e.title||n)&&!0!==p.options.disableSuid&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},p.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=p.normalizeState(i)},p.getStateById=function(t){return t=String(t),p.idToState[t]||p.store.idToState[t]||void 0},p.getStateString=function(t){var e;return e={data:p.normalizeState(t).data,title:t.title,url:t.url},d.stringify(e)},p.getStateId=function(t){return p.normalizeState(t).id},p.getHashByState=function(t){return p.normalizeState(t).hash},p.extractId=function(t){var e,n;return n=-1!=t.indexOf("#")?t.split("#")[0]:t,(e=/(.*)\&_suid=([0-9]+)$/.exec(n))&&e[1],(e?String(e[2]||""):"")||!1},p.isTraditionalAnchor=function(t){return!/[\/\?\.]/.test(t)},p.extractState=function(t,e){var n,i,a=null;return e=e||!1,(n=p.extractId(t))&&(a=p.getStateById(n)),a||(i=p.getFullUrl(t),(n=p.getIdByUrl(i)||!1)&&(a=p.getStateById(n)),a||!e||p.isTraditionalAnchor(t)||(a=p.createStateObject(null,null,i))),a},p.getIdByUrl=function(t){return p.urlToId[t]||p.store.urlToId[t]||void 0},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||void 0},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||void 0},p.hasUrlDuplicate=function(t){var e;return(e=p.extractState(t.url))&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e=!1;return p.savedStates.length&&(e=t.id===p.getLastSavedState().id),e},p.saveState=function(t){return!p.isLastSavedState(t)&&(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){return void 0===t?p.savedStates[p.savedStates.length-1]:t<0?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){return p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e=p.getLocationHref(t);return p.getHashByUrl(e)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){return t.replace(/[^#]*#/,"").replace(/#.*/,"")},p.setHash=function(t,e){var n,i;return!1!==e&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),(n=p.extractState(t,!0))&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==t&&(p.bugs.setHash?(i=p.getPageUrl(),p.pushState(null,null,i+"#"+t,!1)):l.location.hash=t),p)},p.escapeHash=function(t){var e=p.normalizeHash(t);return e=window.encodeURIComponent(e),p.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,n=t.title;n||(e=p.getStateByIndex(0))&&e.url===t.url&&(n=e.title||p.options.initialTitle);try{l.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}return l.title=n,p},p.queues=[],p.busy=function(t){if(void 0!==t?p.busy.flag=t:void 0===p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){r(p.busy.timeout);var i=function(){var t,e,n;if(!p.busy.flag)for(t=p.queues.length-1;0<=t;--t)0!==(e=p.queues[t]).length&&(n=e.shift(),p.fireQueueItem(n),p.busy.timeout=o(i,p.options.busyDelay))};p.busy.timeout=o(i,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),void 0!==e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(r(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=o(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t=p.extractState(p.getLocationHref());if(!p.isLastSavedState(t))return t||p.createStateObject(),p.Adapter.trigger(window,"popstate"),p},p.back=function(t){return!1!==t&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(t){return!1!==t&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(t,e){var n;if(0<t)for(n=1;n<=t;++n)p.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;t<=n;--n)p.back(e)}return p},p.emulated.pushState){var e=function(){};p.pushState=p.pushState||e,p.replaceState=p.replaceState||e}else p.onPopState=function(t,e){var n,i,a,o=!1;return p.doubleCheckComplete(),(i=p.getHash())?((a=p.extractState(i||p.getLocationHref(),!0))?p.replaceState(a.data,a.title,a.url,!1):(p.Adapter.trigger(window,"anchorchange"),p.busy(!1)),p.expectedStateId=!1):(o=(o=(n=p.Adapter.extractEventData("state",t,e)||!1)?p.getStateById(n):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()))||p.createStateObject(null,null,p.getLocationHref()),p.expectedStateId=!1,p.isLastSavedState(o)?(p.busy(!1),!1):(p.storeState(o),p.saveState(o),p.setTitle(o),p.Adapter.trigger(window,"statechange"),p.busy(!1),!0))},p.Adapter.bind(window,"popstate",p.onPopState),p.pushState=function(t,e,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,e,n);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),p.Adapter.trigger(window,"popstate")),!0},p.replaceState=function(t,e,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,e,n);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),p.Adapter.trigger(window,"popstate")),!0};if(a){try{p.store=d.parse(a.getItem("History.store"))||{}}catch(t){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(window,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),a&&(p.onUnload=function(){var e,t,n;try{e=d.parse(a.getItem("History.store"))||{}}catch(t){e={}}for(t in e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{},p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),n=d.stringify(e);try{a.setItem("History.store",n)}catch(t){if(t.code!==DOMException.QUOTA_EXCEEDED_ERR)throw t;a.length&&(a.removeItem("History.store"),a.setItem("History.store",n))}},p.isInternetExplorer()&&p.intervalList.push(c(p.onUnload,p.options.storeInterval)),p.Adapter.bind(window,"beforeunload",p.onUnload),p.Adapter.bind(window,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(c(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."!==i.vendor&&"Mozilla"!==(i.appCodeName||"")||(p.Adapter.bind(window,"hashchange",function(){p.Adapter.trigger(window,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(window,"hashchange")})))},p.options&&p.options.delayInit||p.init()),e.exports=p},{"./history-adapter":284}],286:[function(t,e,n){!function(){for(var o=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-o)),a=window.setTimeout(function(){t(n+i)},i);return o=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),e.exports={}},{}],287:[function(t,e,n){var i=t("prime"),a=t("mout/lang/deepClone"),o=new i({constructor:function(t){t=a(t),this.setSession(t)},setSession:function(t){return t=t?{time:+new Date,data:a(t)}:{},this.session=t,this.session},getTime:function(){return this.session.time},getData:function(){return this.session.data},getSession:function(){return this.session},getDiff:function(t){return t}});e.exports=o},{"mout/lang/deepClone":101,prime:203}],288:[function(t,e,n){(function(i){"use strict";var a=t("mout/string/replace");e.exports=function(t,e){var n=i.G5T||function(t){return t};return a(n(t),"%s",e||"")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"mout/string/replace":168}],289:[function(t,e,n){var a=t("elements");e.exports=function(t){if(!t)return!1;if((a("body").hasClass("wp-customizer")||a("body").hasClass("widgets-php"))&&jQuery){var e=t.parent(".widget-content"),n=t.siblings(".g-instancepicker-title");if(e){var i=jQuery.Event("change");i.target=t[0],jQuery(e[0]).trigger(i)}n&&setTimeout(function(){n.hideIndicator()},5)}}},{elements:34}],"ext/tooltips":[function(t,e,n){!function(){function s(t,e,n){var i=s.resolve(t);if(null==i){n=n||t,e=e||"root";var a=new Error('Failed to fakeRequire "'+n+'" from "'+e+'"');throw a.path=n,a.parent=e,a.fakeRequire=!0,a}var o=s.modules[i];if(!o._resolving&&!o.exports){var r={exports:{}};r.client=r.component=!0,o._resolving=!0,o.call(this,r.exports,s.relative(i),r),delete o._resolving,o.exports=r.exports}return o.exports}s.modules={},s.aliases={},s.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var e=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],n=0;n<e.length;n++){t=e[n];if(s.modules.hasOwnProperty(t))return t;if(s.aliases.hasOwnProperty(t))return s.aliases[t]}},s.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},s.register=function(t,e){s.modules[t]=e},s.alias=function(t,e){if(!s.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');s.aliases[e]=t},s.relative=function(a){var o=s.normalize(a,"..");function e(t){return s(e.resolve(t),a,t)}return e.resolve=function(t){var e=t.charAt(0);if("/"==e)return t.slice(1);if("."==e)return s.normalize(o,t);var n=a.split("/"),i=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}(n,"deps")+1;return i=i||0,t=n.slice(0,i+1).join("/")+"/deps/"+t},e.exists=function(t){return s.modules.hasOwnProperty(e.resolve(t))},e},s.register("darsain-position/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Transport.\n         */\n        module.exports = position;\n        \n        /**\n         * Globals.\n         */\n        var win = window;\n        var doc = win.document;\n        var docEl = doc.documentElement;\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Checks whether object is window.\n         *\n         * @param {Object} obj\n         *\n         * @return {Boolean}\n         */\n        function isWin(obj) {\n        \treturn obj && obj.setInterval != null;\n        }\n        \n        /**\n         * Returns element's object with `left`, `top`, `bottom`, `right`, `width`, and `height`\n         * properties indicating the position and dimensions of element on a page.\n         *\n         * @param {Element} element\n         *\n         * @return {Object}\n         */\n        function position(element) {\n        \tvar winTop = win.pageYOffset || docEl.scrollTop;\n        \tvar winLeft = win.pageXOffset || docEl.scrollLeft;\n        \tvar box = { left: 0, right: 0, top: 0, bottom: 0, width: 0, height: 0 };\n        \n        \tif (isWin(element)) {\n        \t\tbox.width = win.innerWidth || docEl.clientWidth;\n        \t\tbox.height = win.innerHeight || docEl.clientHeight;\n        \t} else if (docEl.contains(element) && element.getBoundingClientRect != null) {\n        \t\textend(box, element.getBoundingClientRect());\n        \t\t// width & height don't exist in <IE9\n        \t\tbox.width = box.right - box.left;\n        \t\tbox.height = box.bottom - box.top;\n        \t} else {\n        \t\treturn box;\n        \t}\n        \n        \tbox.top = box.top + winTop - docEl.clientTop;\n        \tbox.left = box.left + winLeft - docEl.clientLeft;\n        \tbox.right = box.left + box.width;\n        \tbox.bottom = box.top + box.height;\n        \n        \treturn box;\n        }//# sourceURL=darsain-position/index.js")),s.register("component-classes/index.js",Function("exports, fakeRequire, module","/**\n         * Module dependencies.\n         */\n        \n        var index = fakeRequire('indexof');\n        \n        /**\n         * Whitespace regexp.\n         */\n        \n        var re = /\\s+/;\n        \n        /**\n         * toString reference.\n         */\n        \n        var toString = Object.prototype.toString;\n        \n        /**\n         * Wrap `el` in a `ClassList`.\n         *\n         * @param {Element} el\n         * @return {ClassList}\n         * @api public\n         */\n        \n        module.exports = function(el){\n          return new ClassList(el);\n        };\n        \n        /**\n         * Initialize a new ClassList for `el`.\n         *\n         * @param {Element} el\n         * @api private\n         */\n        \n        function ClassList(el) {\n          if (!el) throw new Error('A DOM element reference is fakeRequired');\n          this.el = el;\n          this.list = el.classList;\n        }\n        \n        /**\n         * Add class `name` if not already present.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.add = function(name){\n          // classList\n          if (this.list) {\n            this.list.add(name);\n            return this;\n          }\n        \n          // fallback\n          var arr = this.array();\n          var i = index(arr, name);\n          if (!~i) arr.push(name);\n          this.el.className = arr.join(' ');\n          return this;\n        };\n        \n        /**\n         * Remove class `name` when present, or\n         * pass a regular expression to remove\n         * any which match.\n         *\n         * @param {String|RegExp} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.remove = function(name){\n          if ('[object RegExp]' == toString.call(name)) {\n            return this.removeMatching(name);\n          }\n        \n          // classList\n          if (this.list) {\n            this.list.remove(name);\n            return this;\n          }\n        \n          // fallback\n          var arr = this.array();\n          var i = index(arr, name);\n          if (~i) arr.splice(i, 1);\n          this.el.className = arr.join(' ');\n          return this;\n        };\n        \n        /**\n         * Remove all classes matching `re`.\n         *\n         * @param {RegExp} re\n         * @return {ClassList}\n         * @api private\n         */\n        \n        ClassList.prototype.removeMatching = function(re){\n          var arr = this.array();\n          for (var i = 0; i < arr.length; i++) {\n            if (re.test(arr[i])) {\n              this.remove(arr[i]);\n            }\n          }\n          return this;\n        };\n        \n        /**\n         * Toggle class `name`.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.toggle = function(name){\n          // classList\n          if (this.list) {\n            this.list.toggle(name);\n            return this;\n          }\n        \n          // fallback\n          if (this.has(name)) {\n            this.remove(name);\n          } else {\n            this.add(name);\n          }\n          return this;\n        };\n        \n        /**\n         * Return an array of classes.\n         *\n         * @return {Array}\n         * @api public\n         */\n        \n        ClassList.prototype.array = function(){\n          var str = this.el.className.replace(/^\\s+|\\s+$/g, '');\n          var arr = str.split(re);\n          if ('' === arr[0]) arr.shift();\n          return arr;\n        };\n        \n        /**\n         * Check if class `name` is present.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.has =\n        ClassList.prototype.contains = function(name){\n          return this.list\n            ? this.list.contains(name)\n            : !! ~index(this.array(), name);\n        };\n        //# sourceURL=component-classes/index.js")),s.register("darsain-tooltip/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Dependencies.\n         */\n        var evt = fakeRequire('event');\n        var classes = fakeRequire('classes');\n        var indexOf = fakeRequire('indexof');\n        var position = fakeRequire('position');\n        \n        /**\n         * Globals.\n         */\n        var win = window;\n        var doc = win.document;\n        var body = doc.body;\n        var verticalPlaces = ['top', 'bottom'];\n        \n        /**\n         * Transport.\n         */\n        module.exports = Tooltip;\n        \n        /**\n         * Prototypal inheritance.\n         *\n         * @param {Object} o\n         *\n         * @return {Object}\n         */\n        var objectCreate = Object.create || (function () {\n        \tfunction F() {}\n        \treturn function (o) {\n        \t\tF.prototype = o;\n        \t\treturn new F();\n        \t};\n        })();\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Parse integer from strings like '-50px'.\n         *\n         * @param {Mixed} value\n         *\n         * @return {Integer}\n         */\n        function parsePx(value) {\n        \treturn 0 | Math.round(String(value).replace(/[^\\-0-9.]/g, ''));\n        }\n        \n        /**\n         * Get computed style of element.\n         *\n         * @param {Element} element\n         *\n         * @type {String}\n         */\n        var style = win.getComputedStyle ? function style(element, name) {\n        \treturn win.getComputedStyle(element, null)[name];\n        } : function style(element, name) {\n        \treturn element.currentStyle[name];\n        };\n        \n        /**\n         * Returns transition duration of element in ms.\n         *\n         * @param {Element} element\n         *\n         * @return {Int}\n         */\n        function transitionDuration(element) {\n        \tvar duration = String(style(element, transitionDuration.propName));\n        \tvar match = duration.match(/([0-9.]+)([ms]{1,2})/);\n        \tif (match) {\n        \t\tduration = Number(match[1]);\n        \t\tif (match[2] === 's') {\n        \t\t\tduration *= 1000;\n        \t\t}\n        \t}\n        \treturn 0|duration;\n        }\n        transitionDuration.propName = (function () {\n        \tvar element = doc.createElement('div');\n        \tvar names = ['transitionDuration', 'webkitTransitionDuration'];\n        \tvar value = '1s';\n        \tfor (var i = 0; i < names.length; i++) {\n        \t\telement.style[names[i]] = value;\n        \t\tif (element.style[names[i]] === value) {\n        \t\t\treturn names[i];\n        \t\t}\n        \t}\n        }());\n        \n        /**\n         * Tooltip construnctor.\n         *\n         * @param {String|Element} content\n         * @param {Object}         options\n         *\n         * @return {Tooltip}\n         */\n        function Tooltip(content, options) {\n        \tif (!(this instanceof Tooltip)) {\n        \t\treturn new Tooltip(content, options);\n        \t}\n        \tthis.hidden = 1;\n        \tthis.options = extend(objectCreate(Tooltip.defaults), options);\n        \tthis._createElement();\n        \tthis.content(content);\n        }\n        \n        /**\n         * Creates a tooltip element.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._createElement = function () {\n        \tthis.element = doc.createElement('div');\n        \tthis.classes = classes(this.element);\n        \tthis.classes.add(this.options.baseClass);\n        \tvar propName;\n        \tfor (var i = 0; i < Tooltip.classTypes.length; i++) {\n        \t\tpropName = Tooltip.classTypes[i] + 'Class';\n        \t\tif (this.options[propName]) {\n        \t\t\tthis.classes.add(this.options[propName]);\n        \t\t}\n        \t}\n        };\n        \n        /**\n         * Changes tooltip's type class type.\n         *\n         * @param {String} name\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.type = function (name) {\n        \treturn this.changeClassType('type', name);\n        };\n        \n        /**\n         * Changes tooltip's effect class type.\n         *\n         * @param {String} name\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.effect = function (name) {\n        \treturn this.changeClassType('effect', name);\n        };\n        \n        /**\n         * Changes class type.\n         *\n         * @param {String} propName\n         * @param {String} newClass\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.changeClassType = function (propName, newClass) {\n        \tpropName += 'Class';\n        \tif (this.options[propName]) {\n        \t\tthis.classes.remove(this.options[propName]);\n        \t}\n        \tthis.options[propName] = newClass;\n        \tif (newClass) {\n        \t\tthis.classes.add(newClass);\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Updates tooltip's dimensions.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.updateSize = function () {\n        \tif (this.hidden) {\n        \t\tthis.element.style.visibility = 'hidden';\n        \t\twindow.document.body.appendChild(this.element);\n        \t}\n        \tthis.width = this.element.offsetWidth;\n        \tthis.height = this.element.offsetHeight;\n        \tif (this.spacing == null) {\n        \t\tthis.spacing = this.options.spacing != null ? this.options.spacing : parsePx(style(this.element, 'top'));\n        \t}\n        \tif (this.offset == null) {\n        \t\tthis.offset = this.options.offset != null ? this.options.offset : 0;\n    \t}\n        \tif (this.hidden) {\n        \t\twindow.document.body.removeChild(this.element);\n        \t\tthis.element.style.visibility = '';\n        \t} else {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Change tooltip content.\n         *\n         * When tooltip is visible, its size is automatically\n         * synced and tooltip correctly repositioned.\n         *\n         * @param {String|Element} content\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.content = function (content) {\n        \tif (typeof content === 'object') {\n        \t\tthis.element.innerHTML = '';\n        \t\tthis.element.appendChild(content);\n        \t} else {\n        \t\tthis.element.innerHTML = content;\n        \t}\n        \tthis.updateSize();\n        \treturn this;\n        };\n        \n        /**\n         * Pick new place tooltip should be displayed at.\n         *\n         * When the tooltip is visible, it is automatically positioned there.\n         *\n         * @param {String} place\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.place = function (place) {\n        \tthis.options.place = place;\n        \tif (!this.hidden) {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Attach tooltip to an element.\n         *\n         * @param {Element} element\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.attach = function (element) {\n        \tthis.attachedTo = element;\n        \tif (!this.hidden) {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Detach tooltip from element.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.detach = function () {\n        \tthis.hide();\n        \tthis.attachedTo = null;\n        \treturn this;\n        };\n        \n        /**\n         * Pick the most reasonable place for target position.\n         *\n         * @param {Object} target\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype._pickPlace = function (target) {\n        \tif (!this.options.auto) {\n        \t\treturn this.options.place;\n        \t}\n        \tvar winPos = position(win);\n        \tvar place = this.options.place.split('-');\n        \tvar spacing = this.spacing;\n        \n        \tif (~indexOf(verticalPlaces, place[0])) {\n        \t\tif (target.top - this.height - spacing <= winPos.top) {\n        \t\t\tplace[0] = 'bottom';\n        \t\t} else if (target.bottom + this.height + spacing >= winPos.bottom) {\n        \t\t\tplace[0] = 'top';\n        \t\t}\n        \t\tswitch (place[1]) {\n        \t\t\tcase 'left':\n        \t\t\t\tif (target.right - this.width <= winPos.left) {\n        \t\t\t\t\tplace[1] = 'right';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tcase 'right':\n        \t\t\t\tif (target.left + this.width >= winPos.right) {\n        \t\t\t\t\tplace[1] = 'left';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tdefault:\n        \t\t\t\tif (target.left + target.width / 2 + this.width / 2 >= winPos.right) {\n        \t\t\t\t\tplace[1] = 'left';\n        \t\t\t\t} else if (target.right - target.width / 2 - this.width / 2 <= winPos.left) {\n        \t\t\t\t\tplace[1] = 'right';\n        \t\t\t\t}\n        \t\t}\n        \t} else {\n        \t\tif (target.left - this.width - spacing <= winPos.left) {\n        \t\t\tplace[0] = 'right';\n        \t\t} else if (target.right + this.width + spacing >= winPos.right) {\n        \t\t\tplace[0] = 'left';\n        \t\t}\n        \t\tswitch (place[1]) {\n        \t\t\tcase 'top':\n        \t\t\t\tif (target.bottom - this.height <= winPos.top) {\n        \t\t\t\t\tplace[1] = 'bottom';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tcase 'bottom':\n        \t\t\t\tif (target.top + this.height >= winPos.bottom) {\n        \t\t\t\t\tplace[1] = 'top';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tdefault:\n        \t\t\t\tif (target.top + target.height / 2 + this.height / 2 >= winPos.bottom) {\n        \t\t\t\t\tplace[1] = 'top';\n        \t\t\t\t} else if (target.bottom - target.height / 2 - this.height / 2 <= winPos.top) {\n        \t\t\t\t\tplace[1] = 'bottom';\n        \t\t\t\t}\n        \t\t}\n        \t}\n        \n        \treturn place.join('-');\n        };\n        \n        /**\n         * Position the element to an element or a specific coordinates.\n         *\n         * @param {Integer|Element} x\n         * @param {Integer}         y\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.position = function (x, y) {\n        \tif (this.attachedTo) {\n        \t\tx = this.attachedTo;\n        \t}\n        \tif (x == null && this._p) {\n        \t\tx = this._p[0];\n        \t\ty = this._p[1];\n        \t} else {\n        \t\tthis._p = arguments;\n        \t}\n        \tvar target = typeof x === 'number' ? {\n        \t\tleft: 0|x,\n        \t\tright: 0|x,\n        \t\ttop: 0|y,\n        \t\tbottom: 0|y,\n        \t\twidth: 0,\n        \t\theight: 0\n        \t} : position(x);\n        \tvar spacing = Number(this.spacing), offset = Number(this.offset);\n        \tvar newPlace = this._pickPlace(target);\n        \n        \t// Add/Change place class when necessary\n        \tif (newPlace !== this.curPlace) {\n        \t\tif (this.curPlace) {\n        \t\t\tthis.classes.remove(this.curPlace);\n        \t\t}\n        \t\tthis.classes.add(newPlace);\n        \t\tthis.curPlace = newPlace;\n        \t}\n        \n        \t// Position the tip\n        \tvar top, left;\n        \tswitch (this.curPlace) {\n        \t\tcase 'top':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.left + target.width / 2 - this.width / 2;\n        \t\t\tbreak;\n        \t\tcase 'top-left':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.right - this.width - offset;\n        \t\t\tbreak;\n        \t\tcase 'top-right':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.left + offset;\n        \t\t\tbreak;\n        \n        \t\tcase 'bottom':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.left + target.width / 2 - this.width / 2;\n        \t\t\tbreak;\n        \t\tcase 'bottom-left':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.right - this.width - offset;\n        \t\t\tbreak;\n        \t\tcase 'bottom-right':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.left + offset;\n        \t\t\tbreak;\n        \n        \t\tcase 'left':\n        \t\t\ttop = target.top + target.height / 2 - this.height / 2;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \t\tcase 'left-top':\n        \t\t\ttop = target.bottom - this.height;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \t\tcase 'left-bottom':\n        \t\t\ttop = target.top;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \n        \t\tcase 'right':\n        \t\t\ttop = target.top + target.height / 2 - this.height / 2;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t\tcase 'right-top':\n        \t\t\ttop = target.bottom - this.height;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t\tcase 'right-bottom':\n        \t\t\ttop = target.top;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t}\n        \n        \t// Set tip position & class\n        \tthis.element.style.top = Math.round(top) + 'px';\n        \tthis.element.style.left = Math.round(left) + 'px';\n        \n        \treturn this;\n        };\n        \n        /**\n         * Show the tooltip.\n         *\n         * @param {Integer|Element} x\n         * @param {Integer}         y\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.show = function (x, y) {\n        \tx = this.attachedTo ? this.attachedTo : x;\n        \n        \t// Clear potential ongoing animation\n        \tclearTimeout(this.aIndex);\n        \n        \t// Position the element when requested\n        \tif (x != null) {\n        \t\tthis.position(x, y);\n        \t}\n        \n        \t// Stop here if tip is already visible\n        \tif (this.hidden) {\n        \t\tthis.hidden = 0;\n        \t\twindow.document.body.appendChild(this.element);\n        \t}\n        \n        \t// Make tooltip aware of window resize\n        \tif (this.attachedTo) {\n        \t\tthis._aware();\n        \t}\n        \n        \t// Trigger layout and kick in the transition\n        \tif (this.options.inClass) {\n        \t\tif (this.options.effectClass) {\n        \t\t\tvoid this.element.clientHeight;\n        \t\t}\n        \t\tthis.classes.add(this.options.inClass);\n        \t}\n        \n        \treturn this;\n        };\n        \n        /**\n         * Hide the tooltip.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.hide = function () {\n        \tif (this.hidden) {\n        \t\treturn;\n        \t}\n        \n        \tvar self = this;\n        \tvar duration = 0;\n        \n        \t// Remove .in class and calculate transition duration if any\n        \tif (this.options.inClass) {\n        \t\tthis.classes.remove(this.options.inClass);\n        \t\tif (this.options.effectClass) {\n        \t\t\tduration = transitionDuration(this.element);\n        \t\t}\n        \t}\n        \n        \t// Remove tip from window resize awareness\n        \tif (this.attachedTo) {\n        \t\tthis._unaware();\n        \t}\n        \n        \t// Remove the tip from the DOM when transition is done\n        \tclearTimeout(this.aIndex);\n        \tthis.aIndex = setTimeout(function () {\n        \t\tself.aIndex = 0;\n        \t\twindow.document.body.removeChild(self.element);\n        \t\tself.hidden = 1;\n        \t}, duration);\n        \n        \treturn this;\n        };\n        \n        Tooltip.prototype.toggle = function (x, y) {\n        \treturn this[this.hidden ? 'show' : 'hide'](x, y);\n        };\n        \n        Tooltip.prototype.destroy = function () {\n        \tclearTimeout(this.aIndex);\n        \tthis._unaware();\n        \tif (!this.hidden) {\n        \t\twindow.document.body.removeChild(this.element);\n        \t}\n        \tthis.element = this.options = null;\n        };\n        \n        /**\n         * Make the tip window resize aware.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._aware = function () {\n        \tvar index = indexOf(Tooltip.winAware, this);\n        \tif (!~index) {\n        \t\tTooltip.winAware.push(this);\n        \t}\n        };\n        \n        /**\n         * Remove the window resize awareness.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._unaware = function () {\n        \tvar index = indexOf(Tooltip.winAware, this);\n        \tif (~index) {\n        \t\tTooltip.winAware.splice(index, 1);\n        \t}\n        };\n        \n        /**\n         * Handles repositioning of tooltips on window resize.\n         *\n         * @return {Void}\n         */\n        Tooltip.reposition = (function () {\n        \tvar rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (fn) {\n        \t\treturn setTimeout(fn, 17);\n        \t};\n        \tvar rIndex;\n        \n        \tfunction requestReposition() {\n        \t\tif (rIndex || !Tooltip.winAware.length) {\n        \t\t\treturn;\n        \t\t}\n        \t\trIndex = rAF(reposition, 17);\n        \t}\n        \n        \tfunction reposition() {\n        \t\trIndex = 0;\n        \t\tvar tip;\n        \t\tfor (var i = 0, l = Tooltip.winAware.length; i < l; i++) {\n        \t\t\ttip = Tooltip.winAware[i];\n        \t\t\ttip.position();\n        \t\t}\n        \t}\n        \n        \treturn requestReposition;\n        }());\n        Tooltip.winAware = [];\n        \n        // Bind winAware repositioning to window resize event\n        evt.bind(window, 'resize', Tooltip.reposition);\n        evt.bind(window, 'scroll', Tooltip.reposition);\n        \n        /**\n         * Array with dynamic class types.\n         *\n         * @type {Array}\n         */\n        Tooltip.classTypes = ['type', 'effect'];\n        \n        /**\n         * Default options for Tooltip constructor.\n         *\n         * @type {Object}\n         */\n        Tooltip.defaults = {\n        \tbaseClass:   'tooltip', // Base tooltip class name.\n        \ttypeClass:   null,      // Type tooltip class name.\n        \teffectClass: null,      // Effect tooltip class name.\n        \tinClass:     'in',      // Class used to transition stuff in.\n        \tplace:       'top',     // Default place.\n        \tspacing:     null,      // Gap between target and tooltip.\n        \toffset:      null,      // Horizontal offset to align arrow\n        \tauto:        0          // Whether to automatically adjust place to fit into window.\n        };//# sourceURL=darsain-tooltip/index.js")),s.register("darsain-event/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Bind `el` event `type` to `fn`.\n         *\n         * @param {Element}  el\n         * @param {String}   type\n         * @param {Function} fn\n         * @param {Boolean}  capture\n         *\n         * @return {Function}\n         */\n        exports.bind = window.addEventListener ? function (el, type, fn, capture) {\n        \tel.addEventListener(type, fn, capture || false);\n        \treturn fn;\n        } : function (el, type, fn) {\n        \tvar fnid = type + fn;\n        \tel[fnid] = el[fnid] || function () {\n        \t\tvar event = window.event;\n        \t\tevent.target = event.srcElement;\n        \t\tevent.preventDefault = function () {\n        \t\t\tevent.returnValue = false;\n        \t\t};\n        \t\tevent.stopPropagation = function () {\n        \t\t\tevent.cancelBubble = true;\n        \t\t};\n        \t\tfn.call(el, event);\n        \t};\n        \tel.attachEvent('on' + type, el[fnid]);\n        \treturn fn;\n        };\n        \n        /**\n         * Unbind `el` event `type`'s callback `fn`.\n         *\n         * @param {Element}  el\n         * @param {String}   type\n         * @param {Function} fn\n         * @param {Boolean}  capture\n         *\n         * @return {Function}\n         */\n        exports.unbind = window.removeEventListener ? function (el, type, fn, capture) {\n        \tel.removeEventListener(type, fn, capture || false);\n        \treturn fn;\n        } : function (el, type, fn) {\n        \tvar fnid = type + fn;\n        \tel.detachEvent('on' + type, el[fnid]);\n        \ttry {\n        \t\tdelete el[fnid];\n        \t} catch (err) {\n        \t\t// can't delete window object properties\n        \t\tel[fnid] = undefined;\n        \t}\n        \treturn fn;\n        };//# sourceURL=darsain-event/index.js")),s.register("component-indexof/index.js",Function("exports, fakeRequire, module","module.exports = function(arr, obj){\n          if (arr.indexOf) return arr.indexOf(obj);\n          for (var i = 0; i < arr.length; ++i) {\n            if (arr[i] === obj) return i;\n          }\n          return -1;\n        };//# sourceURL=component-indexof/index.js")),s.register("code42day-dataset/index.js",Function("exports, fakeRequire, module","module.exports=dataset;\n        \n        /*global document*/\n        \n        \n        // replace namesLikeThis with names-like-this\n        function toDashed(name) {\n          return name.replace(/([A-Z])/g, function(u) {\n            return \"-\" + u.toLowerCase();\n          });\n        }\n        \n        var fn;\n        \n        if (document.head.dataset) {\n          fn = {\n            set: function(node, attr, value) {\n               if (!node.dataset) return;               node.dataset[attr] = value;\n            },\n            get: function(node, attr) {\n              return node.dataset && node.dataset[attr];\n            }\n          };\n        } else {\n          fn = {\n            set: function(node, attr, value) {\n              node.setAttribute('data-' + toDashed(attr), value);\n            },\n            get: function(node, attr) {\n              return node.getAttribute('data-' + toDashed(attr));\n            }\n          };\n        }\n        \n        function dataset(node, attr, value) {\n          var self = {\n            set: set,\n            get: get\n          };\n        \n          function set(attr, value) {\n            fn.set(node, attr, value);\n            return self;\n          }\n        \n          function get(attr) {\n            return fn.get(node, attr);\n          }\n        \n          if (arguments.length === 3) {\n            return set(attr, value);\n          }\n          if (arguments.length == 2) {\n            return get(attr);\n          }\n        \n          return self;\n        }//# sourceURL=code42day-dataset/index.js")),s.register("tooltips/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Dependencies.\n         */\n        var evt = fakeRequire('event');\n        var indexOf = fakeRequire('indexof');\n        var Tooltip = fakeRequire('tooltip');\n        var dataset = fakeRequire('dataset');\n        \n        /**\n         * Transport.\n         */\n        module.exports = Tooltips;\n        \n        /**\n         * Globals.\n         */\n        var MObserver = window.MutationObserver || window.WebkitMutationObserver;\n        \n        /**\n         * Prototypal inheritance.\n         *\n         * @param {Object} o\n         *\n         * @return {Object}\n         */\n        var objectCreate = Object.create || (function () {\n        \tfunction F() {}\n        \treturn function (o) {\n        \t\tF.prototype = o;\n        \t\treturn new F();\n        \t};\n        })();\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Capitalize the first letter of a string.\n         *\n         * @param {String} string\n         *\n         * @return {String}\n         */\n        function ucFirst(string) {\n        \treturn string.charAt(0).toUpperCase() + string.slice(1);\n        }\n        \n        /**\n         * Tooltips constructor.\n         *\n         * @param {Element} container\n         * @param {Object}  options\n         *\n         * @return {Tooltips}\n         */\n        function Tooltips(container, options) {\n        \tif (!(this instanceof Tooltips)) {\n        \t\treturn new Tooltips(container, options);\n        \t}\n        \n        \tvar self = this;\n        \tvar observer, TID;\n        \n        \t/**\n        \t * Show tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.show = function (element) {\n        \t\treturn callTooltipMethod(element, 'show');\n        \t};\n        \n        \t/**\n        \t * Hide tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.hide = function (element) {\n        \t\treturn callTooltipMethod(element, 'hide');\n        \t};\n        \n        \t/**\n        \t * Toggle tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.toggle = function (element) {\n        \t\treturn callTooltipMethod(element, 'toggle');\n        \t};\n        \n        \t/**\n        \t * Retrieve tooltip attached to an element and call it's method.\n        \t *\n        \t * @param {Element} element\n        \t * @param {String}  method\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tfunction callTooltipMethod(element, method) {\n        \t\tvar tip = self.get(element);\n        \t\tif (tip) {\n        \t\t\ttip[method]();\n        \t\t}\n        \t\treturn self;\n        \t}\n        \n        \t/**\n        \t * Return a tooltip attached to an element. Tooltip is created if it doesn't exist yet.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltip}\n        \t */\n        \tself.get = function (element) {\n        \t\tvar tip = !!element && (element[TID] || createTip(element));\n        \t\tif (tip && !element[TID]) {\n        \t\t\telement[TID] = tip;\n        \t\t}\n        \t\treturn tip;\n        \t};\n        \n        \t/**\n        \t * Add element(s) to Tooltips instance.\n        \t *\n        \t * @param {[type]} element Can be element, or container containing elements to be added.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.add = function (element) {\n        \t\tif (!element || element.nodeType !== 1) {\n        \t\t\treturn self;\n        \t\t}\n        \t\tif (dataset(element).get(options.key)) {\n        \t\t\tbindElement(element);\n        \t\t} else if (element.children) {\n        \t\t\tbindElements(element.querySelectorAll(self.selector));\n        \t\t}\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Remove element(s) from Tooltips instance.\n        \t *\n        \t * @param {Element} element Can be element, or container containing elements to be removed.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.remove = function (element) {\n        \t\tif (!element || element.nodeType !== 1) {\n        \t\t\treturn self;\n        \t\t}\n        \t\tif (dataset(element).get(options.key)) {\n        \t\t\tunbindElement(element);\n        \t\t} else if (element.children) {\n        \t\t\tunbindElements(element.querySelectorAll(self.selector));\n        \t\t}\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Reload Tooltips instance.\n        \t *\n        \t * Unbinds current tooltipped elements, than selects the\n        \t * data-key elements from container and binds them again.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.reload = function () {\n        \t\t// Unbind old elements\n        \t\tunbindElements(self.elements);\n        \t\t// Bind new elements\n        \t\tbindElements(self.container.querySelectorAll(self.selector));\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Destroy Tooltips instance.\n        \t *\n        \t * @return {Void}\n        \t */\n        \tself.destroy = function () {\n        \t\tunbindElements(this.elements);\n        \t\tif (observer) {\n        \t\t\tobserver.disconnect();\n        \t\t}\n        \t\tthis.container = this.elements = this.options = observer = null;\n        \t};\n        \n        \t/**\n        \t * Create a tip from element data attributes.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltip}\n        \t */\n        \tfunction createTip(element) {\n        \t\tvar data = dataset(element);\n        \t\tvar content = data.get(options.key);\n        \t\tif (!content) {\n        \t\t\treturn false;\n        \t\t}\n        \t\tvar tipOptions = objectCreate(options.tooltip);\n        \t\tvar keyData;\n        \t\tfor (var key in Tooltip.defaults) {\n        \t\t\tkeyData = data.get(options.key + ucFirst(key.replace(/Class$/, '')));\n        \t\t\tif (!keyData) {\n        \t\t\t\tcontinue;\n        \t\t\t}\n        \t\t\ttipOptions[key] = keyData;\n        \t\t}\n        \t\treturn new Tooltip(content, tipOptions).attach(element);\n        \t}\n        \n        \t/**\n        \t * Bind Tooltips events to Array/NodeList of elements.\n        \t *\n        \t * @param {Array} elements\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction bindElements(elements) {\n        \t\tfor (var i = 0, l = elements.length; i < l; i++) {\n        \t\t\tbindElement(elements[i]);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Bind Tooltips events to element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction bindElement(element) {\n        \t\tif (element[TID] || ~indexOf(self.elements, element)) {\n        \t\t\treturn;\n        \t\t}\n        \t\tevt.bind(element, options.showOn, eventHandler);\n        \t\tevt.bind(element, options.hideOn, eventHandler);\n        \t\tself.elements.push(element);\n        \t}\n        \n        \t/**\n        \t * Unbind Tooltips events from Array/NodeList of elements.\n        \t *\n        \t * @param {Array} elements\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction unbindElements(elements) {\n        \t\tif (self.elements === elements) {\n        \t\t\telements = elements.slice();\n        \t\t}\n        \t\tfor (var i = 0, l = elements.length; i < l; i++) {\n        \t\t\tunbindElement(elements[i]);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Unbind Tooltips events from element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction unbindElement(element) {\n        \t\tvar index = indexOf(self.elements, element);\n        \t\tif (!~index) {\n        \t\t\treturn;\n        \t\t}\n        \t\tif (element[TID]) {\n        \t\t\telement[TID].destroy();\n        \t\t\tdelete element[TID];\n        \t\t}\n        \t\tevt.unbind(element, options.showOn, eventHandler);\n        \t\tevt.unbind(element, options.hideOn, eventHandler);\n        \t\tself.elements.splice(index, 1);\n        \t}\n        \n        \t/**\n        \t * Tooltips events handler.\n        \t *\n        \t * @param {Event} event\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction eventHandler(event) {\n        \t\t/*jshint validthis:true */\n        \t\tif (options.showOn === options.hideOn) {\n        \t\t\tself.toggle(this);\n        \t\t} else {\n        \t\t\tself[event.type === options.showOn ? 'show' : 'hide'](this);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Mutations handler.\n        \t *\n        \t * @param {Array} mutations\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction mutationsHandler(mutations) {\n        \t\tvar added, removed, i, l;\n        \t\tfor (var m = 0, ml = mutations.length; m < ml; m++) {\n        \t\t\tadded = mutations[m].addedNodes;\n        \t\t\tremoved = mutations[m].removedNodes;\n        \t\t\tfor (i = 0, l = added.length; i < l; i++) {\n        \t\t\t\tself.add(added[i]);\n        \t\t\t}\n        \t\t\tfor (i = 0, l = removed.length; i < l; i++) {\n        \t\t\t\tself.remove(removed[i]);\n        \t\t\t}\n        \t\t\tif (mutations[m].type == 'attributes' && mutations[m].attributeName == 'data-title'){\n        \t\t\t\tif (!self.get(mutations[m])) { self.add(mutations[m].target); }\n        \t\t\t\tself.get(mutations[m].target).content(dataset(mutations[m].target).get('title'));\n        \t\t\t}\n        \t\t}\n        \t}\n        \n        \t// Construct\n        \t(function () {\n        \t\tself.container = container;\n        \t\tself.options = options = extend(objectCreate(Tooltips.defaults), options);\n        \t\tself.ID = TID = options.key + Math.random().toString(36).slice(2);\n        \t\tself.elements = [];\n        \n        \t\t// Create tips selector\n        \t\tself.selector = '[data-' + options.key + ']';\n        \n        \t\t// Load tips\n        \t\tself.reload();\n        \n        \t\t// Create mutations observer\n        \t\tif (options.observe && MObserver) {\n        \t\t\tobserver = new MObserver(mutationsHandler);\n        \t\t\tobserver.observe(self.container, {\n        \t\t\t\tchildList: true,\n        \t\t\t\tsubtree: true,\n        \t\t\t\tattributes: true\n        \t\t\t});\n        \t\t}\n        \t}());\n        }\n        \n        /**\n         * Expose Tooltip.\n         */\n        Tooltips.Tooltip = Tooltip;\n        \n        /**\n         * Default Tooltips options.\n         *\n         * @type {Object}\n         */\n        Tooltips.defaults = {\n        \ttooltip:    {},          // Options for individual Tooltip instances.\n        \tkey:       'tooltip',    // Tooltips data attribute key.\n        \tshowOn:    'mouseenter', // Show tooltip event.\n        \thideOn:    'mouseleave', // Hide tooltip event.\n        \tobserve:   0             // Enable mutation observer (used only when supported).\n        };//# sourceURL=tooltips/index.js")),s.alias("darsain-tooltip/index.js","tooltips/deps/tooltip/index.js"),s.alias("darsain-tooltip/index.js","tooltip/index.js"),s.alias("darsain-event/index.js","darsain-tooltip/deps/event/index.js"),s.alias("darsain-position/index.js","darsain-tooltip/deps/position/index.js"),s.alias("component-classes/index.js","darsain-tooltip/deps/classes/index.js"),s.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),s.alias("component-indexof/index.js","darsain-tooltip/deps/indexof/index.js"),s.alias("darsain-event/index.js","tooltips/deps/event/index.js"),s.alias("darsain-event/index.js","event/index.js"),s.alias("component-indexof/index.js","tooltips/deps/indexof/index.js"),s.alias("component-indexof/index.js","indexof/index.js"),s.alias("code42day-dataset/index.js","tooltips/deps/dataset/index.js"),s.alias("code42day-dataset/index.js","dataset/index.js"),"object"==typeof n?e.exports=s("tooltips"):"function"==typeof define&&define.amd?define(function(){return s("tooltips")}):this.Tooltips=s("tooltips")}()},{}]},{},[242]);