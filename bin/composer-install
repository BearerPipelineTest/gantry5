#!/bin/bash

OUTPUT=--quiet
if [[ "$1" == '--loud' || "$1" == '-l' ]]; then
    OUTPUT=''
fi

cd "${0%/*}"
cd ../platforms

echo "# Running composer install for Grav"
cd grav/gantry5 && composer install --no-dev --no-progress ${OUTPUT} && cd ../..

echo "# Running composer install for Joomla"
cd joomla/lib_gantry5 && composer install --no-dev --no-progress ${OUTPUT} && cd ../..
cd joomla/plg_system_gantry5_debugbar && composer install --no-dev --no-progress ${OUTPUT} && cd ../..

echo "# Running composer install for WP"
cd wordpress/gantry5 && composer install --no-dev --no-progress ${OUTPUT} && cd ../..
cd wordpress/gantry5_debugbar && composer install --no-dev --no-progress ${OUTPUT} && cd ../..

echo "# Running composer install for build"
cd ../bin/build && composer install --no-dev --no-progress ${OUTPUT} && cd ../..
